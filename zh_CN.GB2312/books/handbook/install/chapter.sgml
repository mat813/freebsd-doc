<!--
     The FreeBSD Documentation Project
     The FreeBSD Simplified Chinese Project

     Original Revision: 1.338
     $FreeBSD$
-->

<chapter id="install">
  <chapterinfo>
    <authorgroup>
      <author>
        <firstname>Jim</firstname>
	<surname>Mock</surname>
	<contrib>结构、组织重整, 部分重写 </contrib>
      </author>
    </authorgroup>

    <authorgroup>
      <author>
	<firstname>Randy</firstname>
	<surname>Pratt</surname>
	<contrib>sysinstall 操作流程、屏幕抓图以及一般性文件</contrib>
      </author>
    </authorgroup>
    <!-- January 2000 -->
  </chapterinfo>

  <title>安装 FreeBSD</title>

  <sect1 id="install-synopsis">
    <title>概述</title>

    <indexterm><primary>installation</primary></indexterm>

    <para>FreeBSD 提供了一个以文字为主，简单好用的安装程序，叫做
    <application>sysinstall</application> 。这是 FreeBSD 默认使用的安装程序；
    厂商如果想，也可以提供适合自己需要的安装程序。本章说明如何使用
    <application>sysinstall</application> 来安装 FreeBSD。</para>

    <para>学习完本章之后，您将会知道：</para>

    <itemizedlist>
      <listitem>
	<para>如何制作 FreeBSD 安装磁盘</para>
      </listitem>

      <listitem>
	<para>FreeBSD如何参照及分割您的硬盘</para>
      </listitem>

      <listitem>
	<para>如何启动 <application>sysinstall</application>.</para>
      </listitem>

      <listitem>
	<para>在执行 <application>sysinstall</application> 时您将要回答的问题、
	  问题代表什么意义，以及该如何回答它们。</para>
      </listitem>
    </itemizedlist>

    <para>在阅读本章之前，您应该：</para>

    <itemizedlist>
      <listitem>
	<para>阅读您要安装的 FreeBSD 版本所附的硬件支持列表以确定您的硬件有没有被支持。</para>
      </listitem>
    </itemizedlist>

    <note>
      <para>一般来说，此安装说明是针对 &i386; (<quote>PC 兼容机</quote>) 体系结构的电脑。
		如果有其它体系结构(如Alpha)的安装说明，我们将一并列出。
		虽然本文档经常保持更新，但有可能与您安装版本上所带的说明文档有些许出入。
		在这里建议您使用本说明文章作为一般性的安装指导参考手册。</para>
    </note>

  </sect1>

  <sect1 id="install-pre">
    <title>安装前的准备工作</title>

    <sect2 id="install-inventory">
      <title>列出您电脑的硬件清单</title>

      <para>在安装 FreeBSD 之前，您应该试着将您电脑中的硬件清单列出来。FreeBSD
	安装程序会将这些硬件(磁盘、网卡、光驱等等)以及型号及制造厂商列出来。
	FreeBSD 也会尝试为这些设备找出最适当的 IRQ 及 IO 端口的设定。但是因为 PC
	的硬件种类实在太过复杂，这个步骤不一定总是能成功。
	这时，您就可能需要手动更改有问题的设备的设定值。</para>

      <para>如果您已经安装了其它的操作系统，如 &windows; 或 Linux，那么您可以先由
      这些系统所提供的工具来查看您的设备设定值是怎么分配的。如果您真的没办法
      确定某些接口卡用什么设定值，那么您可以检查看看，说不定它的设定已经标示
      在卡上。常用的 IRQ 号号码为 3、5 以及 7；IO 端口的值通常以 16 进制位表示，例如
      Ox330。</para>

      <para>我们建议您在安装 FreeBSD 之前把这些信息打印或记录下来，做成表格
      的样子也许会比较有帮助，例如：</para>

      <table pgwide="1" frame="none">
	<title>硬件设备清单</title>

	<tgroup cols="4">
          <colspec colwidth="2*">
          <colspec colwidth="1*">
          <colspec colwidth="1*">
          <colspec colwidth="4*">
	  <thead>
	    <row>
	      <entry>设备名</entry>

	      <entry>IRQ</entry>

	      <entry>IO 端口号</entry>

	      <entry>备注</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>第一块硬盘</entry>

	      <entry>N/A</entry>

	      <entry>N/A</entry>

	      <entry>40&nbsp;GB，Seagate 制造，第一个 IDE 接口主设备</entry>
	    </row>

	    <row>
	      <entry>CDROM</entry>

	      <entry>N/A</entry>

	      <entry>N/A</entry>

	      <entry>第一个 IDE 接口从设备</entry>
	    </row>

	    <row>
	      <entry>第二块硬盘</entry>

	      <entry>N/A</entry>

	      <entry>N/A</entry>

	      <entry>20&nbsp;GB，IBM 制造, 第二个 IDE 接口主设备</entry>
	    </row>

	    <row>
	      <entry>第一个 IDE 控制器</entry>

	      <entry>14</entry>

	      <entry>0x1f0</entry>

	      <entry></entry>
	    </row>

	    <row>
	      <entry>网卡</entry>

	      <entry>N/A</entry>

	      <entry>N/A</entry>

	      <entry>&intel; 10/100</entry>
	    </row>

	    <row>
	      <entry>Modem</entry>

	      <entry>N/A</entry>

	      <entry>N/A</entry>

	      <entry>&tm.3com; 56K faxmodem，位于 COM1 口</entry>
	    </row>

	    <row>
	      <entry>&hellip;</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>
    </sect2>

    <sect2>
      <title>备份您的数据</title>

      <para>如果您的电脑上面存有重要的数据资料，那么在安装 FreeBSD 前请确定
		您已经将这些资料备份了，并且先测试这些备份文档是否有问题。FreeBSD
		安装程序在要写入任何资料到您的硬盘前都会先提醒您确认，一旦您确定要
		写入，那么以后就没有反悔的机会。</para>
    </sect2>

    <sect2 id="install-where">
      <title>决定要将 FreeBSD 安装到哪里</title>

      <para>如果您想让 FreeBSD 使用整个硬盘，那么请直接跳到下一节。</para>
      <para>但是，如果您想让 FreeBSD 跟您已有的系统并存，那么您必须对您数据
		存在硬盘的分布方式有深入的了解以及其所造成的影响。</para>

      <sect3 id="install-where-i386">
	<title>&i386; 体系结构的硬盘分配方式</title>

      <para>一个 PC 硬盘可以被细分为许多分散的区域。这些区域叫做
     	<firstterm>分区(partitions)</firstterm>。  由于设计的原因，每个硬盘仅
	支持四个分区；这些分区叫做<firstterm>主分区(Primary partion)</firstterm>。
	为了突破这个限制以便能使用更多的分区，就有了新的分区类型，叫做<firstterm>
	扩展分区(Extended partition)</firstterm>。一个硬盘可以拥有一个扩展分区。在
	扩展分区里可以建立许多个所谓的<firstterm>逻辑分区(Logical partitions)</firstterm>。</para>

      <para>每个分区都有其独立的<firstterm>分区号(partition ID)</firstterm>,
      用以区分每个分区的数据类型。FreeBSD 分区的分区号为 <literal>165</literal>。
      </para>

      <para>一般而言，每种操作系统都会有自己独特的方式来区别分区。例如 DOS 及其
	之后的 &windows;， 会分配给每个主分区及逻辑分区一个
	<firstterm>驱动器字符</firstterm>，
	从 <devicename>C:</devicename> 开始。</para>

      <para>FreeBSD 必须安装在主分区。 FreeBSD 可以在这个分区上面存放系统数据
	或是您建立的任何文件。然而，如果您有多个硬盘，您也可以在这些硬盘上(全部
	或部分)建立 FreeBSD 分区。在您安装 FreeBSD 的时候，必须要有一个分区可以给
	FreeBSD 使用。这个分区可以是尚未规划的分区或是已经划好，但是里面的数据
	您都不想保存的分区。</para>

      <para>如果您已经用完了您硬盘上的所有分区，那么您必须使用其它操作系统所
	提供的工具(如 DOS 或 &windows; 下的 <command>fdisk</command>)来腾出一个分区
	给 FreeBSD 使用。</para>

      <para>如果您的某个分区有多余的空间，您可以使用它。但是使用前您需要先整理
	一下这些分区。</para>

      <para>FreeBSD 最小安装需要约 100&nbsp;MB 的空间，但是这仅是 <emphasis>非常</emphasis>
	基本的安装，几乎没有剩下多少空间可以建立您自己的文件。一个较理想的最小安装是
	250&nbsp;MB，不含图形界面；或是 350&nbsp;MB 以上，包含图形界面。如果您还需要安装
	其它的第三方厂商的套件，那么将需要更多的硬盘空间。</para>

      <para>您可以使用商业软件，例如 <application>&partitionmagic;</application> (硬盘分区魔术师)
	或类似 <application>GParted</application> 这样的免费工具来调整分区尺寸，
	为 FreeBSD 腾出空间。 FreeBSD 光盘的 <filename>tools</filename>
	目录包含两个免费的工具也可以完成这个工作：<application>FIPS</application> 以及
	<application>PResizer</application>，它们的文档可以在同一目录中找到。<application>FIPS</application>、
	<application>PResizer</application>，和 <application>&partitionmagic;</application>
	能够改变 <acronym>FAT16</acronym> 以及 <acronym>FAT32</acronym> 分区的大小 &mdash;
	它们可以在 &ms-dos; 以及 &windows; ME 系统中使用。 这些工具的说明文件可以在同一个目录下面找到
	<application>&partitionmagic;</application> 和 <application>GParted</application>
	都能改变 <acronym>NTFS</acronym> 分区的尺寸。</para>

      <warning>
	<para>不当的使用这些工具可能会删掉您硬盘上的数据资料！在使用这些工具前
	确定您有最近的、没问题的备份数据。</para>
      </warning>

      <example>
	<title>使用已存在的分区</title>

	<para>假设您只有一个 4GB 的硬盘，而且已经装了 &windows; 然后您将这个硬盘分成两个分区
	<devicename>C:</devicename> 跟 <devicename>D:</devicename>，每个分区大小为
	2&nbsp;GB。在 <devicename>C:</devicename> 分区上存放有 1&nbsp;GB 的数据、
	<devicename>D:</devicename>分区上存放 0.5&nbsp;GB 的数据。</para>

	<para>这意味着您的盘上有两个分区，一个驱动器符号是一个分区(如 c:、d:)。
	您可以把所有存放在 <devicename>D:</devicename> 分区上的数据复制到
	<devicename>C:</devicename> 分区,这样就空出了一个分区(d:)给 FreeBSD 使用。</para>
      </example>

      <example>
	<title>缩减已现在的分区</title>

	<para>假设您只有一个 4&nbsp;GB 的硬盘，而且已经装了 &windows;。您在安装 &windows; 的时候
	把 4&nbsp;GB 都给了 <devicename>C:</devicename> 分区，并且已经使用了 1.5&nbsp;GB 的空间。
	您想将剩余空间中的 2&nbsp;GB 给 FreeBSD 使用。</para>

	<para>为了安装 FreeBSD，您必须从下面两种方式中选择一种：</para>

	<orderedlist>
	  <listitem>
	    <para>备份 &windows; 的数据资料，然后重新安装 &windows;，并给 &windows; 分配 2&nbsp;GB
		的空间。</para>
	  </listitem>

	  <listitem>
	    <para>使用上面提及的 <application>&partitionmagic;</application> 来整理
	或切割您的分区。</para>
	  </listitem>
	</orderedlist>
      </example>

      </sect3>

      <sect3>
	<title>Alpha 体系结构的硬盘分配方式</title>

	<indexterm><primary>Alpha</primary></indexterm>

	<para>在 Alpha 上，您必须使用一整颗硬盘给 FreeBSD，没有办法在同一个硬盘上跟
	其它操作系统共存。根据不同的 Alpha 机器，您的硬盘可以是 SCSI 或 IDE 硬盘，只要
	您的机器可以从这些硬盘开机就可以。</para>

	<para>按照 Digital/Compaq 使用手册书写的惯例，所有 SRM 输入的部分都用大写
	表示。注意，SRM 大小写有别。</para>

	<para>要想得知您硬盘的名称以及型号，可以在 SRM console 提示符下使用 <literal>
	SHOW DEVICE</literal> 命令:</para>

	<screen>&gt;&gt;&gt;<userinput>SHOW DEVICE</userinput>
dka0.0.0.4.0               DKA0           TOSHIBA CD-ROM XM-57  3476
dkc0.0.0.1009.0            DKC0                       RZ1BB-BS  0658
dkc100.1.0.1009.0          DKC100             SEAGATE ST34501W  0015
dva0.0.0.0.1               DVA0
ewa0.0.0.3.0               EWA0              00-00-F8-75-6D-01
pkc0.7.0.1009.0            PKC0                  SCSI Bus ID 7  5.27
pqa0.0.0.4.0               PQA0                       PCI EIDE
pqb0.0.1.4.0               PQB0                       PCI EIDE</screen>

	<para>此范例使用 Digital Personal Workstation 433au 并且显示出此机器联接
	有三个硬盘。第一个是 CDROM，叫做 <devicename>DKA0</devicename>；另外两个
	是两个硬盘，分别叫做 <devicename>DKC0</devicename> 及 <devicename>DKC100
	</devicename>。</para>

	<para>硬盘名称中有 <devicename>DKx</devicename> 字样的是 SCSI 硬盘。例如
	<devicename>DKA100</devicename> 表示是一个 SCSI 设备，其 SCSI ID 为 1，位于
	第一个 SCSI 接口 (A)。 <devicename>DKC300</devicename> 表示一个 SCSI 硬盘，
	SCSI ID 为 3，位于第三个 SCSI 接口 (C)。设备名称 <devicename>PKx</devicename>
	表示 SCSI 控制卡。由以上 <literal>SHOW DEVICE</literal> 指令的输出结果看来，
	SCSI 光盘也被视为是 SCSI 硬盘的一种。</para>

	<para>IDE 硬盘的名称类似 <devicename>DQx</devicename>，而 <devicename>PQx
	</devicename> 则表示相对应的硬盘控制器。</para>

      </sect3>
    </sect2>

    <sect2>
      <title>收集您的网络配置相关资料</title>

      <para>如果您想通过网络(FTP 或是 NFS)安装 FreeBSD，那么您就必须知道您的网络配置
	信息。在安装 FreeBSD 的过程中将会提示您输入这些资料，以顺利完成安装过程。</para>

      <sect3>
	<title>使用以太网或电缆/DSL Modem</title>

	<para>如果您通过局域网或是要通过网卡使用电缆/DSL 上网，那么您必须准备下面
	的信息：</para>

	<orderedlist>
	  <listitem>
	    <para>IP 地址。</para>
	  </listitem>

	  <listitem>
	    <para>默认网关 IP 地址。</para>
	  </listitem>

	  <listitem>
	    <para>主机名称。</para>
	  </listitem>

	  <listitem>
	    <para>DNS 服务器的 IP 地址。</para>
	  </listitem>

	  <listitem>
	    <para>子网掩码。</para>
	  </listitem>
	</orderedlist>

	<para>如果您不知道这些信息，您可以询问系统管理员或是您的网络服务提供者。
	他们可能会说这些信息会由 <firstterm>DHCP</firstterm> 自动分配；如果这样的话，
	请记住这一点就可以了。</para>
      </sect3>

      <sect3>
	<title>使用 Modem 连接</title>

	<para>如果您由 ISP 提供的拨号服务上网，您仍然可以通过它安装 FreeBSD，
	只是会需要很长的时间。</para>

	<para>您必须知道：</para>

	<orderedlist>
	  <listitem>
	    <para>拨号到 ISP 的电话号码。</para>
	  </listitem>

	  <listitem>
	    <para>您的 modem 是连接到哪个 COM 端口。</para>
	  </listitem>

	  <listitem>
	    <para>您拨号到 ISP 所用的账号和密码。</para>
	  </listitem>
	</orderedlist>
      </sect3>
    </sect2>
    <sect2>
      <title>检查 FreeBSD 发行勘误</title>
      
      <para>虽然我们尽力确保每个 FreeBSD 发行版本的稳定性，但偶尔也会有一些错误进入发行版。
	极少数情况下，这些问题甚至可能会影响安装。
	当发现和修正问题之后，它们会列在 FreeBSD 网站中的
	<ulink url="http://www.FreeBSD.org/releases/&rel.current;R/errata.html">FreeBSD 发行勘误</ulink> 中。
	在您安装之前，应该首先看一看这份勘误表，以了解可能存在的问题。</para>

      <para>虽然我们尽力使得每个 FreeBSD 释出版本都很稳定，但是过程中仍然不免有时
	会发现错误。在很罕见的情形下，这些错误会影响到安装过程。当我们发现这些
	错误并且修正后，会将它们列在 FreeBSD 网站的 <ulink url="http://www.freebsd.org/releases/&rel.current;R/errata.html">FreeBSD Errata(勘误表)</ulink>中, 在您安装FreeBSD前应该
	先看看勘误表中有没有什么问题会影响到您的安装。</para>

      <para>关于所有释出版本的信息，包括勘误表，可以在
	<ulink
	  url="&url.base;/index.html">FreeBSD 网站</ulink>的<ulink
	url="&url.base;/releases/index.html">发行版信息</ulink> 一节中找到。</para>
    </sect2>

    <sect2>
      <title>准备安装介质</title>

      <para>FreeBSD 可以通过下面任何一种安装介质进行安装：</para>

      <itemizedlist>
	<title>安装介质</title>

	<listitem>
	  <para>CDROM 或 DVD</para>
	</listitem>

	<listitem>
	  <para>在同一计算机上的 DOS 分区</para>
	</listitem>

	<listitem>
	  <para> SCSI 或 QIC 磁带</para>
	</listitem>

	<listitem>
	  <para>软盘</para>
	</listitem>
      </itemizedlist>

      <itemizedlist>
	<title>网络</title>

	<listitem>
	  <para>通过防火墙的一个 FTP 站点，或使用 HTTP 代理。</para>
	</listitem>

	<listitem>
	  <para> NFS 服务器</para>
	</listitem>

	<listitem>
	  <para>一个指定的并行或串行接口</para>
	</listitem>
      </itemizedlist>

      <para>如果您购买了 FreeBSD 的 CD 或 DVD，那么您可以直接进入下一节
	<xref linkend="install-floppies">。</para>

      <para>如果您还没有 FreeBSD 的安装文件，您应该回到
    <xref linkend="install-diff-media"> 一节，
    它介绍了如何准备所需要的安装介质。之后，您就可以回到这一节，
    并从 <xref linkend="install-floppies"> 继续。</para>
    </sect2>

    <sect2 id="install-floppies">
      <title>准备引导介质</title>

      <para>FreeBSD 的安装过程开始于将您的电脑开机进入 FreeBSD 安装环境&mdash;－并非在
	其它的操作系统上运行一个程序。计算机通常使用安装在硬盘上的操作系统进行
	引导，也可以配置成使用一张<quote>bootable(可引导)</quote>的软盘进行启动。
	大多数现代计算机都可以从光驱进行引导系统。</para>

      <tip>
	<para>如果您有 FreeBSD 的安装光盘或 DVD(或者是您购买的，或者是您自己准备的。)
	并且您的计算机可以从光驱进行启动 (通常在 BIOS 中会有 <quote>Boot Order</quote>
	或类似的选项可以设置)，那么您就可以跳过此小节。因为 FreeBSD 光盘及 DVD 光盘都是可
	以引导的，用它们开机您不用做什么特别的准备。</para>
      </tip>

      <para>一般来说，要建立安装盘(软盘)请依照下列步骤：</para>

      <procedure>
	<step>
	  <title>获取开机软盘映像文件</title>
	  
	  <para>开机软盘映像文件可以在您的安装介质的
	    <filename>floppies/</filename> 目录下找到，
	    另外您也可以从下述网站的 floppies 目录下载： <literal>ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/<replaceable>&lt;架构名&gt;</replaceable>/<replaceable>&lt;版本&gt;</replaceable>-RELEASE/floppies/</literal>.
	    将 <replaceable>&lt;架构名&gt;</replaceable> 和
	    <replaceable>&lt;版本&gt;</replaceable>
	    替换为您使用的计算机体系结构和希望安装的版本号。
	    例如，用于安装 &i386; 上的
	    &os;&nbsp;&rel.current;-RELEASE 的文件的地址，
	    应该是 <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/&rel.current;-RELEASE/floppies/"></ulink>。</para>

	  <para>软盘映像文件的扩展名是 <filename>.flp</filename>。
	    在 <filename>floppies/</filename> 目录中包括了许多不同的映像文件，
	    随您安装的 FreeBSD 版本， 某些时候也随硬件的不同，
	    您需要使用的映像文件可能会有所不同。 您通常会需要三张软盘，
	    即 <filename>boot.flp</filename>、
	    <filename>kern1.flp</filename>， 以及
	    <filename>kern2.flp</filename>。 请查阅同一目录下的
	    <filename>README.TXT</filename> 文件以了解关于这些映像文件的最新信息。</para>

	  <note><para>在安装 &os;&nbsp;5.3 之前的 5.X 系统时，
	    某些设备可能会需要另一张软盘来加载它们的驱动。 这些驱动在
	    <filename>drivers.flp</filename> 映像中提供。</para></note>

	  <important>
	    <para>您的 FTP 程序必须使用 <emphasis>二进制模式</emphasis> 来下载这些映
		像文件。有些浏览器只会用 <emphasis>text</emphasis> (或<emphasis>ASCII
		</emphasis>) 模式来传输数据，
		用这些浏览器下载的映像文件做成的软盘将无法正常开机。</para>
	  </important>
	</step>

	<step>
	  <title>准备软盘</title>

	  <para>您必须为您下载的每一个映像文件准备一张软盘。并且请避免使用到坏掉的
		软盘。最简单的方式就是您先将这些软盘格式化，不要相信所谓的已格式化的软
		盘。在 &windows; 下的格式化程序不会告诉您出现多少坏块，它只是简单的标记它
		们为 <quote>bad</quote> 并且忽略它们。根据建议您应该使用全新的软盘来存放
		安装程序。</para>

	  <important>
	    <para>如果您在安装 FreeBSD 的过程中造成当机、冻结或是其它怪异现象，第一个
			要怀疑的就是引导软盘。请用其它的软盘制作映像文件再试试看。</para>
	  </important>
	</step>

	<step>
	  <title>将映像文件写入软盘中</title>

	  <para><filename>.flp</filename> 文件 <emphasis>并非</emphasis> 一般的文件，
	您不能直接将它们复制到软盘上。事实上它是一张包含完整磁盘内容的映像文件。这
	表示您 <emphasis>不能</emphasis> 简单的使用 DOS 的 copy 命令将文件写到软盘上，
	而必须使用特别的工具程序将映像文件直接写到软盘中。</para>

	  <indexterm><primary>DOS</primary></indexterm>
	  <para>如果您使用 &ms-dos; 或 &windows; 操作系统来制作引导盘，那么您可以使用我们提供
	的 <command>fdimage</command> 程序来将映像文件写到软盘中。</para>

	  <para>如果您使用的是光盘，假设光盘的驱动器符号为 <devicename>E:</devicename>，
	那么请执行下面的命令：</para>

	  <screen><prompt>E:\&gt;</prompt> <userinput>tools\fdimage floppies\kern.flp A:</userinput></screen>

	  <para>重复上述命令以完成每个 <filename>.flp</filename> 文件的写入，每换一个
	映像文件都必须更换软盘；制作好的软盘请注明是使用哪个映像文件做的。如果您的映
	像文件存放在不同的地方，请自行修改上面的指令指向您存放 <filename>.flp</filename>
	文件的地方。要是您没有 FreeBSD 光盘，您可以到 FreeBSD 的 FTP 站点<ulink  url="ftp://ftp.FreeBSD.org/pub/FreeBSD/tools/"><filename class="directory">tools</filename>
	    目录</ulink> 中下载。</para>

	  <para>如果您在 &unix; 系统上制作软盘(例如其它 FreeBSD 机器)，您可以使用
	&man.dd.1; 命令来将映像文件写到软盘中。如果您用 FreeBSD,可以执行下面的命令：
		</para>

	  <screen>&prompt.root; <userinput>dd if=kern.flp of=/dev/fd0</userinput></screen>

	  <para>在 FreeBSD 中，<filename>/dev/fd0</filename> 指的是第一个软驱(即
	  <devicename>A:</devicename> 驱动器)；<filename>/dev/fd1</filename> 是
	    <devicename>B:</devicename> 驱动器,依此类推。其它的 &unix; 系统可能会用
	不同的的名称，这时您就要查阅该系统的说明文件。</para>
	</step>
      </procedure>

      <para>您现在可以安装 FreeBSD 了</para>
    </sect2>
  </sect1>

  <sect1 id="install-start">
    <title>开始安装</title>

    <important>
      <para>默认情况下, 安装过程并不会改变任何您硬盘中的数据，除非您看到
	下面的讯息：</para>

      <literallayout class="monospaced">Last Chance: Are you SURE you want continue the installation?

If you're running this on a disk with data you wish to save then WE
STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

We can take no responsibility for lost disk contents!</literallayout>

      <para>在看到这最后的警告讯息前您都可以随时离开安装程序面不会变更您的硬盘。
	如果您发现有任何设定错误，这时您可以直接将电源关掉而不会造成任何伤害。</para>
    </important>

    <sect2 id="install-starting">
      <title>开机启动</title>

      <sect3 id="install-starting-i386">
        <title>引导 &i386; 系统</title>

      <procedure>
	<step>
	  <para>从电脑尚未开机开始说起</para>
	</step>

	<step>
	  <para>将电脑电源打开。刚开始的时候它应该会显示进入系统设置菜单或 BIOS
	要按哪个键，常见的是 <keycap>F2</keycap>、<keycap>F10</keycap>、
	    <keycap>Del</keycap> 或 <keycombo action="simul">
	      <keycap>Alt</keycap>
	      <keycap>S</keycap>
	    </keycombo>。不论是要按哪个键，请按它进入 BIOS 设置画面。有时您的计算机
	可能会显示一个图形画面，典型的做法是按 <keycap>Esc</keycap> 将关掉这个图形
	画面，以使您能够看到必要的设置信息。</para>
	</step>

	<step>
	  <para>找到设置开机顺序的选项，它的标记为 <quote>Boot Order</quote>
	通常会列出一些设备让您选择，例如：<literal>Floppy</literal>、
	<literal>CDROM</literal>、<literal>First Hard Disk</literal> 等等。</para>

	  <para>如果您要用软盘安装，请确定选到 floppy disk；如果您要用光盘安装，
	请选择 CDROM。为了避免疑惑，请参考您的主板说明手册。</para>

	  <para>储存设定并离开，系统应该会重新启动。</para>
	</step>

	<step>
	  <para>如果您用软盘安装，请将在 <xref linkend="install-floppies">
	一节中制作好的第一张引导盘，里面包含<filename>kern.flp</filename>
	文件的那张盘，放入软盘驱动器中。</para>

	  <para>如果您是从光盘安装，那么开机后请将 FreeBSD 光盘放入光驱中。</para>

	  <para>如果您开机后如往常一样并没有从软盘或光盘引导，请检查：</para>

	  <orderedlist>
	    <listitem>
	      <para>是不是软盘或光盘太晚放入面错失开机引导时间。如果是，请将它们
	放入后重新开机。</para>
	    </listitem>

	    <listitem>
	      <para>BIOS 设定不对，请重新检查 BIOS 的设定。</para>
	    </listitem>

	    <listitem>
	      <para>您的 BIOS 不支持从这些安装介质引导。</para>
	    </listitem>
	</orderedlist>
	</step>

	<step>
	  <para>FreeBSD 即将启动。如果您是从光盘引导，您会见到类似下面的画面：</para>

	  <screen>Verifying DMI Pool Data ........
Boot from ATAPI CD-ROM :
 1. FD 2.88MB  System Type-(00)
Uncompressing ... done

BTX loader 1.00 BTX version is 1.01
Console: internal video/keyboard
BIOS drive A: is disk0
BIOS drive B: is disk1
BIOS drive C: is disk2
BIOS drive D: is disk3
BIOS 639kB/261120kB available memory

FreeBSD/i386 bootstrap loader, Revision 0.8

/kernel text=0x277391 data=0x3268c+0x332a8 |

|
Hit [Enter] to boot immediately, or any other key for command prompt.
Booting [kernel] in 9 seconds... _</screen>

	  <para>如果您是从软盘引导，会看到类似下面的画画：</para>

	  <screen>Verifying DMI Pool Data ........

BTX loader 1.00  BTX version is 1.01
Console: internal video/keyboard
BIOS drive A: is disk0
BIOS drive C: is disk1
BIOS 639kB/261120kB available memory

FreeBSD/i386 bootstrap loader, Revision 0.8

/kernel text=0x277391 data=0x3268c+0x332a8 |

Please insert MFS root floppy and press enter:</screen>

	  <para>请根据提示将
	    <filename>kern.flp</filename> 软盘取出， 并插入
	    <filename>mfsroot.flp</filename> 这张盘， 然后按
	    <keycap>Enter</keycap>。 &os;&nbsp;5.3
	    和更高版本提供了另外一组软盘，
	    在 <link linkend="install-floppies">前一节</link>
	    中已经介绍过了。 您只需从第一张软盘启动，
	    然后再需要时根据提示插入其他软盘。</para>
	</step>

	<step>
	  <para>不论是从软盘或光盘引导，您都会看到下面这段信息：</para>

	  <screen>Hit [Enter] to boot immediately, or any other key for command prompt.
Booting [kernel] in 9 seconds... _</screen>

	  <para>您可以等待十秒， 或按 <keycap>Enter</keycap>。</para>
	</step>
      </procedure>

      </sect3>
      <sect3>
        <title>引导 Alpha 系统</title>

	<indexterm><primary>Alpha</primary></indexterm>

      <procedure>
	<step>
	  <para>从电脑尚未打开电源开始。</para>
	</step>

	<step>
	  <para>打开电脑电源并等待屏幕上出现开机提示信息。</para>
        </step>

	<step>
	  <para>如您需要准备安装软盘，请参考<xref linkend="install-floppies"> 。
	将用 <filename>kern.flp</filename> 做的引导盘放入软驱中然后输入下列命令
	(请视实际情况修改命令中的软驱盘符)：</para>

	  <screen>&gt;&gt;&gt;<userinput>BOOT DVA0 -FLAGS '' -FILE ''</userinput></screen>

	  <para>如果您要从光盘引导，请将光盘放入光驱中然后输入下列命令开始安装
	(请视情况修改命令中的光驱盘符)：</para>

          <screen>&gt;&gt;&gt;<userinput>BOOT DKA0 -FLAGS '' -FILE ''</userinput></screen>
	</step>

	<step>
	  <para>然后 FreeBSD 就会启动。如果您从软盘引导，到某个阶段您会看到下面的信息：</para>

	  <screen>Please insert MFS root floppy and press enter:</screen>

	  <para>按照屏幕指示，将 <filename>kern.flp</filename> 软盘取出，换上
	    <filename>mfsroot.flp</filename> 然后按<keycap>Enter</keycap>键。</para>
	</step>

	<step>
	  <para>不论从软盘或光盘引导，您都会看到下面这段信息：</para>

	  <screen>Hit [Enter] to boot immediately, or any other key for command prompt.
Booting [kernel] in 9 seconds... _</screen>

	  <para>您可以等待 10 秒或是按 <keycap>Enter</keycap> 跳过。之后就会进入内核
	设定菜单。</para>
	</step>
      </procedure>

      </sect3>

    </sect2>

    <sect2 id="view-probe">
      <title>查看设备探测的结果</title>

      <para>前面屏幕显示的最后几百行字会存在缓冲区中以便您查阅。</para>

      <para>要浏览缓冲区，您可以按下 <keycap>Scroll Lock</keycap> 键，这会开启画面的
	卷动功能。然后您就可以使用方向键或 <keycap>PageUp</keycap> 、<keycap>PageDown
	</keycap> 键来上下翻阅。再按一次 <keycap>Scroll Lock</keycap> 键将停止画面卷动。</para>

      <para>在您浏览的时候会看到类似 <xref linkend="install-dev-probe">的画面。
	真正的结果依照您的电脑装置而有所不同。</para>

      <figure id="install-dev-probe">
	<title>典型的设备探测结果</title>

	<screen>avail memory = 253050880 (247120K bytes)
Preloaded elf kernel "kernel" at 0xc0817000.
Preloaded mfs_root "/mfsroot" at 0xc0817084.
md0: Preloaded image &lt;/mfsroot&gt; 4423680 bytes at 0xc03ddcd4

md1: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: &lt;math processor&gt; on motherboard
npx0: INT 16 interface
pcib0: &lt;Host to PCI bridge&gt; on motherboard
pci0: &lt;PCI bus&gt; on pcib0
pcib1:&lt;VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge&gt; at device 1.0 on pci0
pci1: &lt;PCI bus&gt; on pcib1
pci1: &lt;Matrox MGA G200 AGP graphics accelerator&gt; at 0.0 irq 11
isab0: &lt;VIA 82C586 PCI-ISA bridge&gt; at device 7.0 on pci0
isa0: &lt;iSA bus&gt; on isab0
atapci0: &lt;VIA 82C586 ATA33 controller&gt; port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0 &lt;VIA 83C572 USB controller&gt; port 0xe400-0xe41f irq 10 at device 7.2 on pci
0
usb0: &lt;VIA 83572 USB controller&gt; on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr1
uhub0: 2 ports with 2 removable, self powered
pci0: &lt;unknown card&gt; (vendor=0x1106, dev=0x3040) at 7.3
dc0: &lt;ADMtek AN985 10/100BaseTX&gt; port 0xe800-0xe8ff mem 0xdb000000-0xeb0003ff ir
q 11 at device 8.0 on pci0
dc0: Ethernet address: 00:04:5a:74:6b:b5
miibus0: &lt;MII bus&gt; on dc0
ukphy0: &lt;Generic IEEE 802.3u media interface&gt; on miibus0
ukphy0: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
ed0: &lt;NE2000 PCI Ethernet (RealTek 8029)&gt; port 0xec00-0xec1f irq 9 at device 10.
0 on pci0
ed0 address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
orm0: &lt;Option ROM&gt; at iomem 0xc0000-0xc7fff on isa0
fdc0: &lt;NEC 72065B or clone&gt; at port 0x3f0-0x3f5,0x3f7 irq 6 drq2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: &lt;1440-KB 3.5" drive&gt; on fdc0 drive 0
atkbdc0: &lt;Keyboard controller (i8042)&gt; at port 0x60,0x64 on isa0
atkbd0: &lt;AT Keyboard&gt; flags 0x1 irq1 on atkbdc0
kbd0 at atkbd0
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: model Generic PS/@ mouse, device ID 0
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: &lt;System console&gt; at flags 0x100 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
pppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
plip0: &lt;PLIP network interface&gt; on ppbus0
ad0: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata0-master UDMA33
acd0: CD-RW &lt;LITE-ON LTR-1210B&gt; at ata1-slave PIO4
Mounting root from ufs:/dev/md0c
/stand/sysinstall running as init on vty0</screen>
      </figure>

      <para>仔细检查探测结果以确定 FreeBSD 找到所有您期望出现的设备。
	如果设备没有被探测到， 那么就不会列出。
	如果此设备需要配置 IRQ 以及 IO 端口地址，
	请检查输入是否正确。</para>

      <para>如果您需要改变某些设备的设置，您可以很容易地退出 <application>sysinstall
	</application> 程序，然后从头重新来过。这也有助您熟悉这些过程。</para>

      <figure id="sysinstall-exit">
	<title>选择离开 Sysinstall</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/sysinstall-exit" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>在主界面使用方向键选择 <guimenuitem>Exit Install</guimenuitem> 您会看到
	如下的信息：</para>


      <screen>                      User Confirmation Requested
         Are you sure you wish to exit? The system will reboot
           (be sure to remove any floppies from the drives).

                            [ Yes ]    No</screen>

      <para>如果 CDROM 还留在光驱里，而且选择了
	&gui.yes;， 则安装程序将重新启动。</para>

      <para>如果您是从软盘启动，那么重新开机前您必须将 <filename>mfsroot.flp</filename>
	软盘取出再换上 <filename>kern.flp</filename> 软盘。</para>
    </sect2>
  </sect1>

  <sect1 id="using-sysinstall">
    <title>介绍 Sysinstall</title>

    <para><application>sysinstall</application> 是 FreeBSD 项目所提供的安装程序。
	它以 console(控制台)为主，分为多个菜单及画面让您配置及控制安装过程。</para>

    <para><application>sysinstall</application> 菜单画面由方向键、<keycap>Enter
	</keycap>、 <keycap>Space</keycap>、以及其它按键所控制。在主画面的 Usage 菜单
	有这些按键的说明。</para>

    <para>要查看这些说明，请将光标移到 <guimenuitem>Usage</guimenuitem> 项目，然后
      <guibutton>[Select]</guibutton> 按键被选择，<xref linkend="sysinstall-main3">，
	然后按下 <keycap>Enter</keycap> 键。</para>

    <para>安装画面的使用说明会显示出来，阅读完毕请按 <keycap>Enter</keycap> 键回到主
	画面。</para>

    <figure id="sysinstall-main3">
      <title>选取 Sysinstall 主菜单的 Usage 项目</title>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="install/main1" format="PNG">
	</imageobject>
      </mediaobject>
    </figure>

    <sect2 id="select-doc">
      <title>选择 Documentation(说明文件) 菜单</title>

      <para>用方向键从主菜单选择 <guimenuitem>Doc</guimenuitem> 条目然后按
	<keycap>Enter</keycap>键。</para>

      <figure id="main-doc">
	<title>选择说明文件菜单</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/main-doc" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>这将会进入说明文件菜单。</para>

      <figure id="docmenu1">
	<title>Sysinstall 说明文件菜单</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/docmenu1" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>阅读这些说明文件很重要。</para>

      <para>要阅读一篇文章，请用方向键选取要阅读的文章然后按 <keycap>Enter</keycap> 键。
	阅读中再按一下 <keycap>Enter</keycap> 就会回到说明文件画面。</para>

      <para>若要回到主菜单，用方向键选择 <guimenuitem>Exit</guimenuitem> 然后按下
	<keycap>Enter</keycap> 键。</para>
    </sect2>

    <sect2 id="keymap">
      <title>选择键盘对应(Keymap)菜单</title>

      <para>如果要改变键盘按键的对应方式，请在主菜单选取 <guimenuitem>Keymap</guimenuitem>
	然后按 <keycap>Enter</keycap> 键。一般情况下不改变此项，除非您使用了非标准键盘或非
	美国键盘。</para>

      <figure id="sysinstall-keymap">
	<title>Sysinstall 主菜单</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/main-keymap" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>您可以使用上下键移动到您想使用的键盘对应方式，然后按下 <keycap>Space</keycap>
	键以选取它；再按 <keycap>Space</keycap> 键可以取消选取。当您完成后，请选择 &gui.ok;
	然后按 <keycap>Enter</keycap> 键。</para>

      <para>这一屏幕只显示出部分列表。选择 &gui.cancel; 按 <keycap>Tab</keycap> 键将使用
	默认的键盘对应，并返回到主菜单</para>

      <figure id="sysinstall-keymap-menu">
	<title>Sysinstall 键盘对应菜单</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/keymap" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

    </sect2>

    <sect2 id="viewsetoptions">
      <title>安装选项设置画面</title>

    <para>选择 <guimenuitem>Options</guimenuitem> 然后按 <keycap>Enter</keycap> 键。</para>

    <figure id="sysinstall-options">
      <title>Sysinstall 主菜单</title>

      <mediaobject>
        <imageobject>
	  <imagedata fileref="install/main-options" format="PNG">
	</imageobject>
      </mediaobject>
    </figure>

      <figure id="options">
	<title>Sysinstall 选项设置</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/options" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>预设值通常可以适用于大部分的使用者，您并不需要改变它们。版本名称要
	根据安装的版本进行变化。</para>

      <para>目前选择项目的描述会在屏幕下方以蓝底白字显示。注意其中有一个项目是
	<guimenuitem>Use Defaults(使用默认值)</guimenuitem>您可以由此项将所有的
	设定还原为预设值。</para>

      <para>可以按下 <keycap>F1</keycap> 来阅读各选项的说明。</para>

      <para>按 <keycap>Q</keycap> 键可以回到主画面。</para>
    </sect2>

    <sect2 id="start-install">
      <title>开始进行标准安装</title>

      <para><guimenuitem>Standard(标准)</guimenuitem> 安装适用于那些 &unix; 或
	FreeBSD 的初级使用者。用方向键选择 <guimenuitem>Standard</guimenuitem> 然后按
	<keycap>Enter</keycap> 键可开始进入标准安装。</para>

      <figure id="sysinstall-standard">
	<title>开始进行标准安装</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/main-std" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>
    </sect2>
  </sect1>

  <sect1 id="install-steps">
    <title>分配磁盘空间</title>

    <para>您的第一个工作就是要分配 FreeBSD 用的硬盘空间以便 <application>sysinstall
	</application> 先做好一些准备。为了完成这个工作，您必须先对 FreeBSD 如何找到
	磁盘信息做一个了解。</para>

    <sect2 id="install-drive-bios-numbering">
      <title>BIOS 磁盘编号</title>

      <para>当您在系统上安装配置 FreeBSD 之前，有一个重要的事情一定要注意，尤其
	是当您有多个硬盘的时候。</para>

      <indexterm><primary>DOS</primary></indexterm>
      <indexterm><primary>Microsoft Windows</primary></indexterm>
      <para>在 pc 架构，当您跑像 &ms-dos; 或 &microsoft.windows; 这种跟 BIOS 相关的操作
	系统的时候，BIOS 有能力改变正常的磁盘顺序，然后这些操作系统会跟着 BIOS 做改变。
	这让使用者不一定非要有所谓的 <quote>primary master</quote> 硬盘开机。许多人发
	现最简单而便宜备份系统的方式就是再去买一块一模一样的硬盘，然后定期将数据从第
	一块硬盘复制到第二个硬盘，使用
	<application><trademark class="registered">Ghost</trademark></application> 或
	<application>XCOPY</application>。所以，当第一个硬盘死了，或者是被病毒破坏，
	或者有坏轨道，他们可以调整 BIOS 中的开机顺序而直接用第二块硬盘开机。这跟将机壳
	拆开，把第二块硬盘跟第一块硬盘对调(要调jumper)有同样的效果，差别就是不用拆壳；
	因此，对有这方面需求的人而言，直接在 BIOS 中设定非常方便。</para>

      <indexterm><primary>SCSI</primary></indexterm>
      <indexterm><primary>BIOS</primary></indexterm>
      <para>比较昂贵，配有 SCSI 控制卡的系统通常可以延伸 BIOS 的功能来让 SCSI 设备(可达七个)
	达到类似改变顺序的功能。</para>

      <para>习惯于使用这种方式的使用者可能会感到惊讶，因为在 FreeBSD 中并非如此。
	FreeBSD 不会参考 BIOS，而且也不知道所谓的 <quote>BIOS 逻辑磁盘对应</quote>。
	是怎么回事。这会让人感觉很疑惑，明明就是一样的硬盘而且资料也完全从另一块
	复制过来的，结果却没办法像以前那样用。</para>

      <para>当使用 FreeBSD 以前，请将 BIOS 中的硬盘开机顺序调回正常的顺序，并且以后
	不要再改变。 如果一定要交换硬盘顺序， 那请用硬件的方式， 打开机壳并调整调线。</para>

      <sidebar>
	<title>范例：Bill 和 Fred 的安装历险</title>

	<para>Bill 替 Fred 把旧的 Wintel 的机器装上了 FreeBSD。他装了一台 SCSI 硬盘，
	ID 是 0，然后把 FreeBSD 装在上面。</para>

	<para>Fred 开始使用他新的 FreeBSD 系统；但是过了几天，他发现这旧的 SCSI
	硬盘发生了许多小问题。之后，他就跟 Bill 说起这件事。</para>

	<para>又过了几天，Bill 决定是该解决问题的时候了，所以他从后面房间的硬盘
	<quote>收藏</quote> 中找出了一个一模一样的硬盘，并且经过表面测试后显示这块
	硬盘没有问题。因此，Bill 将它的 ID 调成 4，然后安装到 Fred 的机器，并且将资料从
	磁盘 0 复制到磁盘 4。现在新硬盘装好了，而且看起来好像一切正常；所以，Bill 认为
	现在应该可以开始用它了。Bill 于是到 SCSI BIOS 中设定 SCSI ID 4 为开机盘，用磁盘 4
	重新开机后，一切跑得很顺利。</para>

	<para>继续用了几天后，Bill 跟 Fred 决定要来玩点新的：该将 FreeBSD 升级了。Bill
	将 ID 0 的硬盘移除(因为有问题)并且又从收藏区中拿了一块一样的硬盘来。然后他
	用 Fred 神奇的网络 FTP 磁盘将新版的 FreeBSD 安装在这块硬盘上；安装过程没什么问
	题发生。</para>

	<para>Fred 用了这新版本几天后，觉得它很适合用在工程部门…是时候将以前放在旧
	系统的工作资料复制过来了。因此，Fred 将 ID4 的 SCSI 硬盘(里面有放着旧系统中复制
	过来的最新资料)mount 起来，结果竟然发现在 ID4 的硬盘上，他以前的所有资料都不见
	了！</para>

	<para>资料跑到哪里去了呢？</para>

	<para>当初 Bill 将 ID0 硬盘的资料复制到 ID4 的时候，ID4 即成为一个 <quote>新的副本</quote>。
	而当他调 SCSI BIOS 设定 ID4 为开机盘，想让系统从 ID4 开机，
	这其实只是他自己笨，因为大部分的系统可以直接调 BIOS 而改变开机顺序，但是 FreeBSD 却会把开机
	顺序还原成正常的模式，因此，Fred 的 FreeBSD 还是从原来那块 ID0 的硬盘开机的。所有
	的资料都还在那块硬盘上，而不是在想象之中的 ID4 硬盘。</para>

	<para>幸运的是， 在我们发现这件事的时候那些资料都还在，
	我们将这些资料从最早的那块 ID0 硬盘取出来并交还给 Fred，
	而 Bill 也由此了解到计算机计数是从 0 开始的。</para>

	<para>虽然我们这里的例子使用 SCSI 硬盘，但是相同的概念也可以套用在 IDE 硬盘上。</para>
      </sidebar>
    </sect2>

    <sect2 id="main-fdisk">
      <title>使用 FDisk 创建分区</title>

      <note>
	<para>如果不再做改变，数据将会写进硬盘。如果您犯了一个错误想重新开始，请选择
	  <application>sysinstall</application> 安装程序的退出按钮(exit)。或按
	  <keycap>U</keycap> 键来 <guimenuitem>Undo</guimenuitem> 操作。如果您的操作没有结果，您总可以重新启动您
	  的计算机来达到您的目的。</para>
	</note>

      <para>当您在 <application>sysinstall</application> 主菜单选择使用标准安装
	后，您会看到下面的信息：</para>

      <screen>                                 Message
 In the next menu, you will need to set up a DOS-style ("fdisk")
 partitioning scheme for your hard disk. If you simply wish to devote
 all disk space to FreeBSD (overwriting anything else that might be on
 the disk(s) selected) then use the (A)ll command to select the default
 partitioning scheme followed by a (Q)uit. If you wish to allocate only
 free space to FreeBSD, move to a partition marked "unused" and use the
 (C)reate command.
                                [  OK  ]

                      [ Press enter or space ]</screen>

      <para>如屏幕指示，按 <keycap>Enter</keycap> 键，然后您就会看到一个列表
	列出所有在探测设备的时候找到的硬盘。<xref linkend="sysinstall-fdisk-drive1">
	范例显示的是有找到两个 IDE 硬盘的情形，这两个硬盘分别为
	<devicename>ad0</devicename> 和 <devicename>ad2</devicename>。</para>

      <figure id="sysinstall-fdisk-drive1">
	<title>选择要分区的硬盘</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/fdisk-drive1" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>您可能正在奇怪，为什么 <devicename>ad1</devicename> 没有列出来？
	为什么遗失了呢？</para>

      <para>试想，如果您有两个 IDE 硬盘，一个是在第一个 Primary master，一个是
	Secondary master，这样会发生什么事呢？如果 FreeBSD 依照找到的顺序来为他们
	命名，如 <devicename>ad0</devicename> 和<devicename>ad1</devicename>
	那么就不会有什么问题。</para>

      <para>但是，现在问题来了。如果您现在想在 primary slave 加装第三个硬盘，
	那么这个硬盘的名称就会是 <devicename>ad1</devicename>，之前的
	<devicename>ad1</devicename> 就会变成<devicename>ad2</devicename>。
	这会造成什么问题呢？因为设备的名称（如<devicename>ad1s1a</devicename>）
	是用来寻找文件系统的，因此您可能会发现，突然，您有些文件系统从此无法正确
	地显示出来，必须修改 FreeBSD 配置文件（译注：/etc/fstab）才可以正确显示。</para>

      <para>为了解决这些问题，在配置内核的时候可以叫 FreeBSD 直接用 IDE 设备所
	在的位置来命名，而不是依据找到的顺序。使用这种方式的话，在 secondary master
	的 IDE 设备就 <emphasis>永远是</emphasis> <devicename>ad2</devicename>，
	即使您的系统中没有<devicename>ad0</devicename> 或 <devicename>ad1</devicename>
	也不受影响。</para>

      <para>此为 FreeBSD 内核的默认值，这也是为什么上面的画面只显示
	<devicename>ad0</devicename> 和	<devicename>ad2</devicename>的原因。
	画面上这台机器的两颗硬盘是装在 primary 及 secondary 的 master 上面；并没有任何一个
	硬盘安装在 slave 插槽上。</para>

      <para>您应该选择您想安装 FreeBSD 的硬盘，然后按下 &gui.ok;。之后
	<application>FDisk</application> 就会开始，您会看到类似
	<xref linkend="sysinstall-fdisk1">的画面。</para>

      <para><application>FDisk</application> 的显示画面分为三个部分。</para>

      <para>第一部分是画面上最上面两行，显示的是目前所选择的硬盘的信息。包含它的
	FreeBSD 名称、硬盘分布以及硬盘的总容量。</para>

      <para>第二部分显示的是目前选择的硬盘上有哪些分区，每个分区的开始及结束位置、
	所占容量、FreeBSD 名称、它们的描述以及类别（sub-type）。此范例显示有两个分区、
	一个大的 <acronym>FAT</acronym> 分区，（很可能是 &ms-dos; 或 &windows; 的
	<devicename>C:</devicename> ）、以及一个扩展分区（在 &ms-dos; 或 &windows; 里
	面还可以包含逻辑分区）。</para>

      <para>第三个部分显示 <application>FDisk</application> 中可用的命令。</para>

      <figure id="sysinstall-fdisk1">
	<title>典型的尚未编辑前的 Fdisk 分区表</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/fdisk-edit1" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>接下来要做的事跟您要怎么给您的硬盘分区有关。</para>

      <para>如果您要让 FreeBSD 使用整个硬盘（稍后您确认要	<application>sysinstall
      	</application> 继续安装后会删除所有这个硬盘上的资料），那么您就可以按
	<keycap>A</keycap> 键（<guimenuitem>Use Entire Disk</guimenuitem> ）
	目前已有的分区都会被删除，取而代之的是一个小的，标示为 <literal>unused
	</literal> 的分区，以及一个大的 FreeBSD 分区。之后，请用方向键将光标移到这个
	FreeBSD 分区，然后按 <keycap>S</keycap> 以将此分区标记为启动分区。 您会看
	到类似 <xref linkend="sysinstall-fdisk2"> 的画面。
	注意， 在 <literal>Flags</literal>
	栏中的 <literal>A</literal> 记号表示此分区是 <emphasis>激活</emphasis> 的，
	因而启动将从此分区进行。</para>

      <para>要删除现有的分区以便为 FreeBSD 腾出空间，
      您可以将光标移动到要删除的分区后按 <keycap>D</keycap> 键。
      然后就可按 <keycap>C</keycap> 键， 并在弹出的对话框中输入将要创建的分区的大小。
      输入合适的大小后按 <keycap>Enter</keycap> 键。
      一般而言， 这个对话框中的初始值是可以分配给该分区的最大值。
      它可能是最大的邻接分区或未分配的整个硬盘大小。</para>

      <para>如果您已经建立好给 FreeBSD 的分区（使用像 <application>&partitionmagic;
      </application>类似的工具），那么您可以按下 <keycap>C</keycap> 键来建立一个新
      的分区。同样的，会有对话框询问您要建立的分区的大小。</para>

      <figure id="sysinstall-fdisk2">
	<title>Fdisk 分区使用整个硬盘</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/fdisk-edit2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>完成后，按 <keycap>Q</keycap> 键。您的变更会存在 <application>sysinstall
      </application> 中，但是还不会真正写入您的硬盘。</para>
    </sect2>

    <sect2 id="bootmgr">
      <title>安装多重引导</title>

      <para>在这步骤您可以选择要不要安装一个多重引导管理器。一般而言，如果碰到
      下列的情形，您应该选择要安装多重引导管理程序。</para>

      <itemizedlist>
	<listitem>
	  <para>您有一个以上的硬盘，并且 FreeBSD 并不是安装在第一个硬盘上。</para>
	</listitem>

	<listitem>
	  <para>您可以在一个硬盘上，除了 FreeBSD，您还有安装其它的操作系统；然后
	  您想要选择在开机的时候要进入哪个系统。</para>
	</listitem>
      </itemizedlist>

      <para>如果您在这台机器上只安装一个 FreeBSD 操作系统，并且安装在第一个硬盘，
      那么选择 <guimenuitem>Standard</guimenuitem> 安装就可以了。如果您已经使用
      了一个第三方的多重引导程序，那么请选择 <guimenuitem>None</guimenuitem>。</para>

      <para>选择好配置后请按 <keycap>Enter</keycap>。</para>

      <figure id="sysinstall-bootmgr">
	<title>Sysinstall 多重引导管理程序</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/boot-mgr" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>按下 <keycap>F1</keycap> 键所显示的在线说明中有讨论一些操作系统共存
      可能发生的问题。</para>
    </sect2>

    <sect2>
      <title>在其它硬盘上创建分区</title>

      <para>如果您的系统上有一个以上的硬盘，在选择完多重引导管理程序后会再回到
      选择硬盘的画面。如果您要将 FreeBSD 安装在多个硬盘上，那么您可以在这里选择
      其它的硬盘，然后重复使用 <application>FDisk</application> 来建立分区。</para>

      <important>
	<para>如果您想让 FreeBSD 来管理其它的硬盘，那么两个硬盘都必须安装 FreeBSD
	的多重引导管理程序。</para>
      </important>

      <figure id="sysinstall-fdisk-drive2">
	<title>离开选择硬盘画面</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/fdisk-drive2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para><keycap>Tab</keycap> 键可以在您最后选择的硬盘、 &gui.ok; 以及 &gui.cancel;
      之间进行切换。</para>

      <para>用 <keycap>Tab</keycap> 键将光标移动到 &gui.ok;然后按 <keycap>Enter</keycap>
      键继续安装过程。</para>
    </sect2>

    <sect2 id="bsdlabeleditor">
      <title>使用 <application>bsdlabel</application>
      创建分区</title>

      <para>您现在必须在刚刚建立好的 slice 中规划一些 label。 请注意， 每个 label 的代号是
		<literal>a</literal> 到 <literal>h</literal>， 另外， 习惯上
	<literal>b</literal>、 <literal>c</literal> 和
	<literal>d</literal> 是有特殊用途的， 不应该随意变动。</para>

      <para>某些应用程序可以利用一些特殊的分区而达到较好的效果，尤其是分区分散
      在不同的硬盘的时候。但是，现在您是第一次安装FreeBSD，所以不需要去烦恼如
      何分割您的硬盘。最重要的是，装好FreeBSD然后学习如何使用它。当您对FreeBSD
      有相当程序的熟悉后，您可以随时重新安装FreeBSD，然后改变您分区的方式。</para>

      <para>下面的范例中有四个分区&mdash;一个是磁盘交换分区，别外三个是文件系统。</para>

      <table frame="none" pgwide="1">
	<title>为第一个硬盘分区</title>

	<tgroup cols="4">
          <colspec colwidth="1*">
          <colspec colwidth="1*">
          <colspec colwidth="1*">
          <colspec colwidth="4*">

	  <thead>
	    <row>
	      <entry>分区</entry>

	      <entry>文件系统</entry>

	      <entry>大小</entry>

	      <entry>描述</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><literal>a</literal></entry>

	      <entry><filename>/</filename></entry>

	      <entry>100&nbsp;MB</entry>

	      <entry>这是一个根文件系统（root filesystem）。任何其它的文件系统都会
	      挂在根目录（译注：用根目录比较亲切）下面。 100&nbsp;MB 对于此目录来说
	      是合理的大小，因为您往后并不会在这里存放太多的数据；在安装FreeBSD后会
	      用掉约 40&nbsp;MB 的根目录空间。剩下的空间是用来存放临时文件用的，同时，
	      您也应该预留一些空间，因为以后的FreeBSD版本可能会需要较多的
	      <filename>/</filename>（根目录）空间。</entry>
	    </row>

	    <row>
	      <entry><literal>b</literal></entry>

	      <entry>N/A</entry>

	      <entry>2-3 x RAM</entry>

	      <entry><para>此分区为系统磁盘交换分区（swap space）。选择正确的交换空间
	      大小可是一门学问唷。一般来说，交换空间的大小应该是您系统上内存（RAM）
	      大小的2到3倍。交换空间至少要有 64&nbsp;MB 因此，如果您的电脑上的RAM比
	      32&nbsp;MB 小，请将交换空间大小设为 64&nbsp;MB。</para><para>

		  如果您有一个以上的硬盘，您可以在每个硬盘上都配置交换分区。 FreeBSD
		  会利用每个硬盘上的交换空间， 这样做能够提高 swap 的性能。
		  如果是这种情形， 先算出您总共需要的交换空间大小 （如128&nbsp;MB），
		  然后除以您拥有的硬盘数目（如2块），
		  算出的结果就是每个硬盘上要配置的交换空间的大小。
		  在这个例子中， 每个硬盘的交
		  换空间为 64&nbsp;MB </para></entry>
	    </row>

	    <row>
	      <entry><literal>e</literal></entry>

	      <entry><filename>/var</filename></entry>

	      <entry>50&nbsp;MB</entry>

	      <entry><filename>/var</filename> 目录会存放不同长度的文件、日志以及
	      其它管理用途的文件。大部分这些文件都是FreeBSD每天在运行的时候会读取或
	      是写入的。当这些文件放在另外的文件系统（译注：即/var）可以避免影响到
	      其它目录下面类似的文件存取机制。</entry>
	    </row>

	    <row>
	      <entry><literal>f</literal></entry>

	      <entry><filename>/usr</filename></entry>

	      <entry>剩下的硬盘空间</entry>

	      <entry>您所有的其它的文件通常都会存在<filename>/usr</filename>
	      目录以及其子目录下面。</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>

      <para>如果您要将FreeBSD安装在一个以上的硬盘，那么您必须在您配置的其它分区上
      再建立分区。最简单的方式就是在每个硬盘上建立两个分区，一个是交换分区，一个
      是文件系统分区。</para>

      <table frame="none" pgwide="1">
	<title>为其它磁盘分区</title>

	<tgroup cols="4">
          <colspec colwidth="1*">
          <colspec colwidth="1*">
          <colspec colwidth="2*">
          <colspec colwidth="3*">

	  <thead>
	    <row>
	      <entry>分区</entry>

	      <entry>文件系统</entry>

	      <entry>大小</entry>

	      <entry>描述</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><literal>b</literal></entry>

	      <entry>N/A</entry>

	      <entry>见描述</entry>

	      <entry>之前提过，交换分区是可以跨硬盘的。但是，即使
	      <literal>a</literal> 分区没有使用，习惯上还是会把交换分区放在
		<literal>b</literal> 分区上。</entry>
	    </row>

	    <row>
	      <entry><literal>e</literal></entry>

	      <entry>/disk<replaceable>n</replaceable></entry>

	      <entry>剩下的硬盘空间</entry>

	      <entry>剩下的空间是一个大的分区，最简单的做法是将之规划为
		<literal>a</literal>分区而不是<literal>e</literal>分区。然而，
		习惯上<literal>a</literal>分区是保留给根目录 (<filename>/</filename>)
		用的。您不一定要遵守这个习惯，但是<application>sysinstall</application>
		会，所以照着它做会使您的安装比较清爽、干净。您可以将这些文件系统挂在任何
		地方，本范例建议将它们挂在<filename>/disk<replaceable>n</replaceable></filename>		目录，<replaceable>n</replaceable> 依据每个硬盘而有所不同，但是，您喜欢的话
		也可将它们挂在别的地方。</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>

      <para>分区的配置完成后，您可以用<application>sysinstall</application>.
      来建立它们了。您会看到下面的信息：</para>

      <screen>                                 Message
 Now, you need to create BSD partitions inside of the fdisk
 partition(s) just created. If you have a reasonable amount of disk
 space (200MB or more) and don't have any special requirements, simply
 use the (A)uto command to allocate space automatically. If you have
 more specific needs or just don't care for the layout chosen by
 (A)uto, press F1 for more information on manual layout.

                                [  OK  ]
                          [ Press enter or space ]</screen>

      <para>按下 <keycap>Enter</keycap> 键开始FreeBSD分区表编辑器，称做
	 <application>Disklabel</application>。</para>

      <para><xref linkend="sysinstall-label"> 显示您第一次执行
	<application>Disklabel</application>的画面。画面分为三个区域。</para>

      <para>前几行显示的是您正在编辑的硬盘以及您正在建立的slice位于哪个分区上。
      （在这里， <application>Disklabel</application> 使用的是
      <literal>分区名称</literal> 而不是 slice 名）。此画面也会显示slice还有
      多少空间可以使用；亦即，有多余的空间，但是尚未指派分区。</para>

      <para>画面中间区域显示已建立的区区，每个分区的文件系统名称、所占的大小以及
      一些关于建立这些文件系统的参数选项。</para>

      <para>下方的第三区显示在 <application>Disklabel</application>中可用的按键。</para>

      <figure id="sysinstall-label">
	<title>Sysinstall Disklabel 编辑器</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/disklabel-ed1" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para><application>Disklabel</application> 您可以自动配置分区以及给它们预设
      的大小。您可以按 <keycap>A</keycap>键使用此功能。您会看到类似
	 <xref linkend="sysinstall-label2">的画面。根据您硬盘的大小，自动分配所配置
	 的大小不一定合适。但是没有关系，您并不一定要使用预设的大小。</para>

	<note>
	  <para>默认情况下会给<filename>/tmp</filename>
	  目录一个独立分区，而不是附属在 <filename>/</filename> 之下。这样可以
	  避免将一些临时文件放到根目录中（译注：可能会用完根目录空间）。</para>
	</note>

      <figure id="sysinstall-label2">
	<title>Sysinstall Disklabel 编辑器-使用自动配置</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/disklabel-auto" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>如果您不想使用默认的分区布局，
	则需要用方向键移动光标并选中第一个分区， 然后按
	<keycap>D</keycap> 来删除它。 重复这一过程直到删除了所有推荐的分区。</para>

      <para>要建立第一个分区 (<literal>a</literal>， 作为
	<filename>/</filename> &mdash; 根文件系统)， 请确认您已经在屏幕顶部选中了正确的
	slice， 然后按 <keycap>C</keycap>。 接下来将出现一个对话框， 要求您输入新分区的尺寸
	(如 <xref linkend="sysinstall-label-add"> 所示)。 您可以输入以块为单位的尺寸，
	或以 <literal>M</literal> 表示MB、
	<literal>G</literal> 结尾表示GB， 或者 <literal>C</literal>
	表示柱面数的方式来表达尺寸。</para>

      <note><para>从 FreeBSD&nbsp;5.X 开始， 用户可以：
	使用 <literal>Custom Newfs</literal>
	(<keycap>Z</keycap>) 选项来选择
	<acronym>UFS2</acronym> (在 &os;&nbsp;5.1 和更高版本中的默认值)。 用
	<literal>Auto Defaults</literal> 来创建， 然后用 <literal>Custom Newfs</literal> 选项，
	或在创建文件系统时指定 <option>-O 2</option>。
	如果您使用了 <literal>Custom Newfs</literal>选项，
	不要忘记增加 <option>-U</option> 来启用 SoftUpdates！</para></note>

      <figure id="sysinstall-label-add">
	<title>根目录使用空间</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/disklabel-root1" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>显示在对话框中的默认大小是使用整个分区，您可以用
	<keycap>Backspace</keycap>键删除这些数字然后按照上述方式输入您想要的
	大小，如<userinput>64M</userinput>（<xref linkend="sysinstall-label-add2">），
	然后按&gui.ok;。</para>

      <figure id="sysinstall-label-add2">
	<title>编辑要分区大小</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/disklabel-root2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>输入完大小后接着问您要建立的分区是文件系统还是交换空间，如
      <xref linkend="sysinstall-label-type">所示。第一个分区是文件系统，所以
      确认选择	<guimenuitem>FS</guimenuitem>后按<keycap>Enter</keycap>键。</para>

      <figure id="sysinstall-label-type">
	<title>选择根分区类型</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/disklabel-fs" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>最后，因为您要建立的是一个文件系统，所以必须告诉
	<application>Disklabel</application> 这个文件系统要挂接在什么地方，如
	<xref linkend="sysinstall-label-mount">所示。根文件系统的挂接点
	<filename>/</filename>, 所以请输入 <userinput>/</userinput>,然后按
	<keycap>Enter</keycap>键。</para>

      <figure id="sysinstall-label-mount">
	<title>选择根挂接点</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/disklabel-root3" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>刚刚制作好的分区会显示在画面上。您应该重复上述的动作以建立其它的
      分区。当建立交换空间的时候，系统不会问您要将它挂接在哪里，因为交换空间是不用
      挂在系统上的。当您在建立最后一个分区<filename>/usr</filename>的时候，您可以
      直接使用默认的大小，即所有此分区剩余的空间。</para>

      <para>您最终的 FreeBSD DiskLabel 编辑器画面会类似
	<xref linkend="sysinstall-label4">, 实际数字按您的选择而有所不同。按下
	<keycap>Q</keycap> 键完成分区的建立。</para>

      <figure id="sysinstall-label4">
	<title>Sysinstall Disklabel 编辑器</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/disklabel-ed2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>
    </sect2>
  </sect1>

  <sect1 id="install-choosing">
    <title>选择要安装的软件包</title>

    <sect2 id="distset">
      <title>选择要安装的软件包</title>

      <para>安装哪些软件包在很大程度上取决于系统将被用来做什么，以及有多少可用的磁盘空间。
	内建的选项包括了运行所需要的最小系统，到把所有软件包全都装上的常用配置。
	&unix; 或 FreeBSD 新手通常直接选择一个设定好的软件包就可以了，
	而有经验的使用者则可以考虑自己订制安装哪些软件包。</para>

      <para>按下 <keycap>F1</keycap> 可以看到有关软件包的更多选项信息，
	以及它们都包含了哪些软件，之后，可以按 <keycap>Enter</keycap>
	回到软件包选择画面。</para>

      <para>如果您想要使用图形界面，
	则必须选择软件包名称开头是 <literal>X</literal> 的那些软件包。
	对于 X 服务器的配置，
	以及选择默认的桌面管理器这样的工作必须在 &os; 安装完成之后才能作。
	关于配置 X 服务器的更多资料可以在 <xref linkend="x11"> 找到。</para>

      <para>默认的 X11 版本取决于您所安装的 FreeBSD 版本。
	对于 FreeBSD 5.3 以前的版本，
	安装的将是 <application>&xfree86;&nbsp;4.X</application>。 对于
	&os;&nbsp;5.3 和以后的版本， 默认的则是
	<application>&xorg;</application>。</para>

      <para>如果需要定制内核， 您还需要选择包含源代码的那个选项。
	要了解为什么应该编译和构建新的内核， 请参见
	<xref linkend="kernelconfig">。</para>

      <para>显然， 包含所有组件的系统是最万能的。
	如果磁盘空间足够， 用光标键选择
	<xref linkend="distribution-set1"> 中的
	<guimenuitem>All</guimenuitem>
	并按 <keycap>Enter</keycap>。 如果担心磁盘空间不够的话，
	则选择最合适的选项。 不要担心选择的是否是最合适的，
	因为其他软件包可以在安装完毕后再加入进来。</para>

      <figure id="distribution-set1">
	<title>选择软件包</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/dist-set" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>
    </sect2>

    <sect2 id="portscol">
      <title>安装ports软件包</title>

      <para>当选择完您想要安装的部分后，接着会询问您要不要安装FreeBSD Ports
	软件包；Ports软件包可以让您简单方便地安装软件包。Ports本身并不包含编辑
	软件所需要的程序源代码，而是一个包含自动下载、编辑以及安装的文档集合。
	<xref linkend="ports"> 一章讨论如何使用Ports.</para>

      <para>安装程序并不会检查您是否有足够的硬盘空间来放ports,所以，如果要安装
	ports软件所，请先确定您有足够的硬盘空间。 FreeBSD &rel.current;版本
	FreeBSD	Ports Collection 大约占用 &ports.size; 大小的硬盘空间。您要为
	这些版本设置大一点的值来安装它们。</para>

<screen>                         User Confirmation Requested
 Would you like to install the FreeBSD Ports Collection?

 This will give you ready access to over &os.numports; ported software packages,
 at a cost of around &ports.size; of disk space when "clean" and possibly much
 more than that if a lot of the distribution tarballs are loaded
 (unless you have the extra CDs from a FreeBSD CD/DVD distribution
 available and can mount it on /cdrom, in which case this is far less
 of a problem).

 The Ports Collection is a very valuable resource and well worth having
 on your /usr partition, so it is advisable to say Yes to this option. 

 For more information on the Ports Collection &amp; the latest ports,
 visit: 
     http://www.FreeBSD.org/ports  

                              [ Yes ]     No</screen>

      <para>选择 &gui.yes; 将会安装
	Ports Collection， 而选择 &gui.no;
	则将跳过它。 选好后按 <keycap>Enter</keycap> 继续。
	此后， 选择安装的软件包的屏幕将再次出现。</para>

      <figure id="distribution-set2">
	<title>确认您要安装的软件包</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/dist-set2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>如果对您的选择感到满意，请选择<guimenuitem>Exit</guimenuitem>
	退出，确保&gui.ok; 被高亮显示，然后按<keycap>Enter</keycap>
	继续。</para>

    </sect2>
  </sect1>

  <sect1 id="install-media">
    <title>选择您要使用的安装介质</title>

    <para>如果要从 CDROM 或 DVD安装，使用方向键将光标移到
      <guimenuitem>Install from a FreeBSD CD/DVD</guimenuitem>。确认
       &gui.ok; 被选取，然后按 <keycap>Enter</keycap> 开始安装程序。</para>

    <para>如果要使用其它的方式安装，请选择适当的安装介质然后按照屏幕指示
	进行安装。</para>

    <para>按 <keycap>F1</keycap> 可以显示安装介质的在线说明。按一下
	 <keycap>Enter</keycap> 可返回选择安装介质画面。</para>

    <figure id="choose-media">
      <title>选择安装介质</title>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="install/media" format="PNG">
	</imageobject>
      </mediaobject>
    </figure>

    <note>
      <title>FTP安装模式</title>

      <indexterm>
	<primary>installation</primary>
	<secondary>network</secondary>
	<tertiary>FTP</tertiary>
      </indexterm>

      <para>使用FTP安装，有三种方式：主动式（active）FTP、被动式（passive）FTP
	或是透过HTTP代理服务器。</para>

      <variablelist>
	<varlistentry>
	  <term>主动式FTP： <guimenuitem>从FTP服务器安装</guimenuitem></term>

	  <listitem>
	    <para>这个选项将会使所有的FTP传输使用 <quote>Active</quote>模式。
	这将无法通过防火墙，但是可以使用在那些比较早期，不支持被动模式的FTP站。
	如果您的连接在使用被动（默认值）模式卡住了，请换主动模式看看！</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>被动模式FTP： <guimenuitem>通过防火墙从FTP服务器安装</guimenuitem></term>

	  <listitem>
	    <indexterm>
	      <primary>FTP</primary>
	      <secondary>passive mode</secondary>
	    </indexterm>

	    <para>此选项会让 <application>sysinstall</application> 使用
		<quote>Passive</quote>模式来安装。这使得使用者可以穿过
		不允许用非固定TCP PORTS连入的防火墙。 </para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>FTP 透过 HTTP 代理服务器： <guimenuitem>透过HTTP代理服务器，由
		FTP服务器安装</guimenuitem></term>

	  <listitem>
	    <indexterm>
	      <primary>FTP</primary>
	      <secondary>via a HTTP proxy</secondary>
	    </indexterm>

	    <para>此选项会让 <application>sysinstall</application> 通过HTTP协议
		（像浏览器一样）连到proxy服务器。proxy服务器会解释送出的请求，
		然后通知FTP服务器。因为通过HTTP协议，所以可以穿过防火墙。
		要用这种方式，您必须指定proxy服务器的地址。</para>
	  </listitem>
	</varlistentry>
      </variablelist>

      <para>对于一个 FTP 代理服务器而言，通常在使用者登入名称中加入您要登入的
	服务器的用户名，加在 <quote>@</quote> 符号后面。然后代理服务器就会
	 <quote>假装</quote> 成一个真的服务器。 例如， 假设您要从
	<hostid role="fqdn">ftp.FreeBSD.org</hostid> 安装，通过 FTP
	代理服务器 <hostid role="fqdn">foo.example.com</hostid>，使用1024端口。</para>

      <para>在这种情况下，您可以到 options 菜单，将 FTP username 设为
	 <literal>ftp@ftp.FreeBSD.org</literal>，密码设为您的电子邮件地址。
	安装介质部分，指定FTP (或是被动式 FTP，如果代理服务器支持的话) 以及URL为
	<literal>ftp://foo.example.com:1234/pub/FreeBSD</literal>。</para>

      <para>因为<hostid role="fqdn">ftp.FreeBSD.org</hostid>的
	<filename>/pub/FreeBSD</filename> 目录会被抓取到
	<hostid role="fqdn">foo.example.com</hostid>之下，您就可以从
	<emphasis>这台</emphasis> 机器 (会从
	<hostid role="fqdn">ftp.FreeBSD.org</hostid> 抓取文件) 安装。</para>
    </note>
  </sect1>

  <sect1 id="install-final-warning">
    <title>安装确认</title>

    <para>到此为止，可以开始进行安装了，这也是您避免更动到您的硬盘的最后机会。</para>

    <screen>                       User Confirmation Requested
 Last Chance! Are you SURE you want to continue the installation?

 If you're running this on a disk with data you wish to save then WE
 STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

 We can take no responsibility for lost disk contents!

                             [ Yes ]    No</screen>

    <para>选择 &gui.yes; 然后按下
      <keycap>Enter</keycap> 确认安装</para>

    <para>安装所需的时间会根据您所选择的软件、安装介质以及您电脑的速度而有所不同。
	在安装的过程中会有一些信息来显示目前的进度。</para>

    <para>当您看到下面的信息表示已经安装完成了：</para>

    <screen>                               Message

Congratulations! You now have FreeBSD installed on your system.

We will now move on to the final configuration questions.
For any option you do not wish to configure, simply select No.

If you wish to re-enter this utility after the system is up, you may
do so by typing: /stand/sysinstall .

                                 [ OK ]

                      [  Press enter to continue  ]</screen>

    <para>按下 <keycap>Enter</keycap> 以进行安装后的配置。</para>

    <para>选择 &gui.no; 然后按 <keycap>Enter</keycap>
	会取消安装，不会对您的系统造成更动。您会看到下面的信息：</para>

    <screen>                                Message
Installation complete with some errors.  You may wish to scroll
through the debugging messages on VTY1 with the scroll-lock feature.
You can also choose "No" at the next prompt and go back into the
installation menus to retry whichever operations have failed.

                                 [ OK ]</screen>

    <para>产生这个信息是因为什么东西也没有安装，按下 <keycap>Enter</keycap>
	后会离开安装程序回到主安装界面。从主安装界面可以退出安装程序。</para>
  </sect1>

  <sect1 id="install-post">
    <title>安装后的配置</title>

    <para>安装成功后， 就可以进行进一步的配置了。
      引导新安装的 FreeBSD 系统之后， 使用
      <command>sysinstall</command> (<command>/stand/sysinstall</command>
      如果您使用的是 &os; 5.2 之前的版本)， 并选择
      <guimenuitem>Configure</guimenuitem>。</para>

    <sect2 id="inst-network-dev">
      <title>配置网卡</title>

      <para>如果您之前配置用 PPP 通过 FTP 安装，那么这个画面将不会出现；正像所说
	的那样，您可以稍后再做配置。</para>

      <para>如果想更多的了解网卡或将FreeBSD配置为网关或路由器，请参考
	<link linkend="advanced-networking">Advanced Networking</link>
	的相关文章。</para>

      <screen>                      User Confirmation Requested
   Would you like to configure any Ethernet or SLIP/PPP network devices?

                             [ Yes ]   No</screen>

      <para>如果要配置网卡，请选择
	&gui.yes; 然后按 <keycap>Enter</keycap>。
      否则请选择 &gui.no; 继续。</para>

      <figure id="ed-config1">
	<title>选择网卡设备</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/ed0-conf" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>用方向键选择您要配置的网卡接口，然后按<keycap>Enter</keycap>。</para>

      <screen>                      User Confirmation Requested
       Do you want to try IPv6 configuration of the interface?

                              Yes   [ No ]</screen>

      <para>目录私人区域网络IP协议<acronym>IPv4</acronym>已经足够，所以选择
	&gui.no; 然后按 <keycap>Enter</keycap>。</para>

      <para>如果想试试新的IP通信协议 <acronym>IPv6</acronym> ，使用 <acronym>RA</acronym>
	服务，请选择 &gui.yes; 然后按 <keycap>Enter</keycap>。
	寻找 RA 服务器将会花费几秒的时间。</para>

      <screen>                             User Confirmation Requested
        Do you want to try DHCP configuration of the interface?

                              Yes   [ No ]</screen>

      <para>如果您不需要 DHCP (Dynamic Host Configuration Protocol　动态主机配置协议)
	，选择 &gui.no; 然后按<keycap>Enter</keycap>。</para>

      <para>选择 &gui.yes; 会执行<application>dhclient</application>，
	如果成功，它会自动将网络配置信息填上。更多的信息请参考
	<xref linkend="network-dhcp"> 。</para>

      <para>下面的网络配置显示了怎样把以太网设备配置成区域网络网关的角色。</para>

      <figure id="ed-config2">
	<title>配置 ed0接口</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/ed0-conf2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>使用<keycap>Tab</keycap> 键可以在各个栏目之间进行切换，请输入适当
	的信息：</para>

      <variablelist>
	<varlistentry>
	  <term>Host（机器名称）</term>

	  <listitem>
	    <para>完整的机器名称，例如本例中的 <hostid role="fqdn">k6-2.example.com</hostid> 。
		</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>Domain（域名）</term>

	  <listitem>
	    <para>您机器所在的域名称，如本例的 <hostid role="domainname">example.com</hostid>
		</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>IPv4 Gateway（IPv4网关）</term>

	  <listitem>
	    <para>输入将数据包传送到远端网络的机器IP地址。只有当机器是网络上的
	一个节点时才要输入。如果这台机器要作为您局域网的网关，
	 <emphasis>请将此处设为空白</emphasis>。IPv4网关，也被称作默认网关或
	默认路由器。</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>域名服务器</term>

	  <listitem>
	    <para>本地网络中的域名服务器的IP地址。本例中假设机器所在的网络中
	没有域名服务器，所以填入的是ISP提供的域名服务器地址
	（<hostid role="ipaddr">208.163.10.2</hostid>。）</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>IPv4 地址</term>

	  <listitem>
	    <para>本机所使用的IP地址。本例为
	      <hostid role="ipaddr">192.168.0.1</hostid>。</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>子网掩码</term>

	  <listitem>
	    <para>本范例中的IP地址属于一个C类地址
	      （<hostid role="ipaddr">192.168.0.0</hostid> -
	      <hostid role="ipaddr">192.168.0.255</hostid>）。默认的子网掩码为
	      （<hostid role="netmask">255.255.255.0</hostid>）。</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term> ifconfig 额外参数设定</term>

	  <listitem>
	    <para>任何<command>ifconfig</command>命令跟网卡接口有关的参数。
		本范例中没有。</para>
	  </listitem>
	</varlistentry>

      </variablelist>

      <para>使用 <keycap>Tab</keycap> 键选择 &gui.ok;然后按
	 <keycap>Enter</keycap>键。</para>


      <screen>                      User Confirmation Requested
        Would you like to Bring Up the ed0 interface right now?

                             [ Yes ]   No</screen>

      <para>选择 &gui.yes; 然后按
	<keycap>Enter</keycap> 将会将机器的网卡转为启用状态。机器下次启动
	的时候即可使用。</para>
    </sect2>

    <sect2 id="gateway">
      <title>配置网关</title>

      <screen>                       User Confirmation Requested
       Do you want this machine to function as a network gateway?

                              [ Yes ]    No</screen>

      <para>如果这台机器要作为本地网络和其它机器之间传送数据包的网关，请选择
	&gui.yes; 然后按 <keycap>Enter</keycap>。
	如果这台机器只是网络上的普通节点，请选择 &gui.no;
	并按 <keycap>Enter</keycap> 继续。</para>
    </sect2>

    <sect2 id="inetd-services">
      <title>配置网络服务</title>

      <screen>                      User Confirmation Requested
Do you want to configure inetd and the network services that it provides?

                               Yes   [ No ]</screen>

      <para>如果选择 &gui.no; ，许多网络服务，如
	 <application>telnetd</application> 将不会启用。这表示远端用户将无法
	<application>telnet</application> 进入这台机器。本机器上的用户还是可以
	<application>telnet</application>到远端机器的。</para>

      <para>这些服务可以在安装完成后修改<filename>/etc/inetd.conf</filename>
	配置文件来启用它们。请参阅 <xref linkend="network-inetd-overview">
	以获得更多的信息。</para>

      <para>如果您想现在就配置这些网络服务，请选择<guibutton>[ Yes ]</guibutton> ，
	然后会看到下面的信息：</para>

      <screen>                      User Confirmation Requested
The Internet Super Server (inetd) allows a number of simple Internet
services to be enabled, including finger, ftp and telnetd.  Enabling
these services may increase risk of security problems by increasing
the exposure of your system.

With this in mind, do you wish to enable inetd?

                             [ Yes ]   No</screen>

      <para>选择 &gui.yes; 继续。</para>

      <screen>                      User Confirmation Requested
inetd(8) relies on its configuration file, /etc/inetd.conf, to determine
which of its Internet services will be available.  The default FreeBSD
inetd.conf(5) leaves all services disabled by default, so they must be
specifically enabled in the configuration file before they will
function, even once inetd(8) is enabled.  Note that services for
IPv6 must be separately enabled from IPv4 services.

Select [Yes] now to invoke an editor on /etc/inetd.conf, or [No] to
use the current settings.

                             [ Yes ]   No</screen>

      <para>选择 &gui.yes; 将允许您添加网络服务
	(或将相应网络服务每行开头的 <literal>#</literal> 除掉即可。)</para>

      <figure id="inetd-edit">
	<title>编辑 <filename>inetd.conf</filename>配置文件</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/edit-inetd-conf" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>在加入您想启用的服务后，按下 <keycap>Esc</keycap>键会出现一个
	对话框可以让您离开以及保存修改。</para>

    </sect2>

    <sect2 id="ftpanon">
      <title>匿名 FTP</title>

      <indexterm>
	<primary>FTP</primary>
	<secondary>anonymous</secondary>
      </indexterm>

      <screen>                      User Confirmation Requested
 Do you want to have anonymous FTP access to this machine?

                              Yes    [ No ]</screen>

      <sect3 id="deny-anon">
	<title>不允许匿名 FTP访问</title>

	<para>选择默认的 &gui.no; 并按下
	  <keycap>Enter</keycap> 键将仍然可以让在这台机器上有账号的用户访问
	FTP。</para>
      </sect3>

      <sect3 id="ftpallow">
	<title>允许匿名 FTP访问</title>

	<para>如果您选择允许匿名 FTP 存取，那么网络中任何人都可以使用FTP来访问您
	的机器。在启用匿名访问之前应该考虑网络的安全问题。如果要知道更多有关网络
	安全的信息，请参阅 <xref linkend="security">。</para>

	<para>要启用FTP匿名访问，用方向键选择 &gui.yes;
	然后按 <keycap>Enter</keycap>键。您会看到下面（或类似）的画面：</para>

	<figure id="anon-ftp2">
	  <title>默认的匿名 FTP 配置</title>

	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="install/ftp-anon1" format="PNG">
	    </imageobject>
	  </mediaobject>
	</figure>

	<para>按 <keycap>F1</keycap> 键可以查看在线帮助文档：</para>

	<screen>This screen allows you to configure the anonymous FTP user.

The following configuration values are editable:

UID:     The user ID you wish to assign to the anonymous FTP user.
         All files uploaded will be owned by this ID.

Group:   Which group you wish the anonymous FTP user to be in.

Comment: String describing this user in /etc/passwd


FTP Root Directory:

        Where files available for anonymous FTP will be kept.

Upload subdirectory:

        Where files uploaded by anonymous FTP users will go.</screen>

	<para>默认的FTP根目录将放在 <filename>/var</filename>目录下。如果您
	的/var目录空间不足以应付您的FTP需求，您可以将FTP的根目录改为
	 <filename>/usr</filename> 目录下的 <filename>/usr/ftp</filename>
	目录。</para>

	<para>当您对一切配置都满意后，请按 <keycap>Enter</keycap> 键继续。</para>

	<screen>                          User Confirmation Requested
         Create a welcome message file for anonymous FTP users?

                              [ Yes ]    No</screen>

	<para>如果您选择 &gui.yes; 并按下
	  <keycap>Enter</keycap>键，系统会自动打开文本编辑器让您编辑FTP的欢迎信息。</para>

	<figure id="anon-ftp4">
	  <title>编辑FTP欢迎信息</title>

	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="install/ftp-anon2" format="PNG">
	    </imageobject>
	  </mediaobject>
	</figure>

	<para>此文本编辑器叫做 <command>ee</command>。按照指示修改信息文本或是
	稍后再用您喜爱的文本编辑器来修改。请记住画面下方显示的文件位置。</para>

	<para>按 <keycap>Esc</keycap> 将弹出一个默认为
	<guimenuitem>a) leave editor</guimenuitem>的对话框。按
	  <keycap>Enter</keycap> 退出并继续。再次按
	  <keycap>Enter</keycap> 将保存修改。</para>
      </sect3>
    </sect2>

    <sect2 id="nfsconf">
      <title>配置网络文件系统</title>

      <para>网络文件系统 (NFS) 可以让您可以在网络上共享您的文件。一台机器可以
	配置成NFS服务器、客户端或两者并存。请参考
	 <xref linkend="network-nfs"> 以获得更多的信息。</para>

      <sect3 id="nsf-server-options">
	<title>NFS 服务器</title>

	<screen>                       User Confirmation Requested
 Do you want to configure this machine as an NFS server?

                              Yes    [ No ]</screen>

	<para>如果您不想安装网络文件系统，请选择 &gui.no;
	然后按 <keycap>Enter</keycap>键。</para>

	<para>如果您选择 &gui.yes; 将会出现一个对话框提醒您
	必须先建立一个 <filename>exports</filename> 文件。</para>

	<screen>                               Message
Operating as an NFS server means that you must first configure an
/etc/exports file to indicate which hosts are allowed certain kinds of
access to your local filesystems.
Press [Enter] now to invoke an editor on /etc/exports
                               [ OK ]</screen>

	<para>按 <keycap>Enter</keycap> 键继续。系统会启动文本编辑器让您编辑
	 <filename>exports</filename> 文件。</para>

	<figure id="nfs-server-edit">
	  <title>编辑 <filename>exports</filename>文件</title>

	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="install/nfs-server-edit" format="PNG">
	    </imageobject>
	  </mediaobject>
	</figure>

	<para>按照指示加入真实输出的文件目录或是稍后用您喜爱的编辑器自行编辑。
	请记下画面下方显示的文件名称及位置。</para>

	<para>按下 <keycap>Esc</keycap> 键会出现一具对话框，默认选项是
	  <guimenuitem>a) leave editor</guimenuitem>。按下
	  <keycap>Enter</keycap> 离开并继续。</para>
      </sect3>

      <sect3 id="nfs-client-options">
	<title>NFS 客户端</title>

	<para> NFS 客户端允许您的机器访问NFS服务器。</para>

	<screen>                       User Confirmation Requested
 Do you want to configure this machine as an NFS client?

                              Yes   [ No ]</screen>

	<para>按照您的需要，选择 &gui.yes;
	  或 &gui.no; 然后按 <keycap>Enter</keycap>。</para>
      </sect3>
    </sect2>

    <sect2 id="securityprofile">
      <title>安全配置</title>

      <para><quote>安全配置</quote> 中包含了一些可以通过启用或停用某些程序
	来达到某些程序的安全性配置。安全配置越严格，则默认启动的程序就越少。
	基本的原则是：除非必要，否则不要执行一些可有有无的程序。</para>

      <para>请注意，安全文件的配置都是默认值，在安装完成后您可以随时通过
	编辑 <filename>/etc/rc.conf</filename>配置文件来改变这些配置。
	如果想得到更多的信息请参阅 &man.rc.conf.5; 手册。</para>

      <para>下表说明每一种安全等级的意义。每列所代表的是安全等级，每行所
	代表的是程序或功能是启用还是停用。</para>

      <table>
	<title>可能的安全等级</title>

	<tgroup cols=3>
	  <thead>
	    <row>
	      <entry></entry>

	      <entry>极/高度安全</entry>

	      <entry>中度安全</entry>
	    </row>
	  </thead>

	  <tbody>

	    <row>
	      <entry>&man.sendmail.8;</entry>

	      <entry>否</entry>

	      <entry>是</entry>
	    </row>

	    <row>
	      <entry>&man.sshd.8;</entry>

	      <entry>否</entry>

	      <entry>是</entry>
	    </row>

	    <row>
	      <entry>&man.portmap.8;</entry>

	      <entry>否</entry>

	      <entry>不一定
		<footnote>
		  <para>如果之前安装时配置机器为NFS客户端或服务器，则会启用些
			项目。</para>
		</footnote>
	      </entry>
	    </row>

	    <row>
	      <entry>NFS server</entry>

	      <entry>否</entry>

	      <entry>是</entry>
	    </row>

	    <row>
	      <entry>&man.securelevel.8;</entry>

	      <entry>是
		<footnote>
		  <para>如果打算将安全级配置 securelevel 设置为 <quote>Extreme</quote>
			或 <quote>High</quote>， 请务必阅读 &man.init.8; 联机手册，
			并特别注意有关安全等级意义的部分， 以了解其影响；
			否则您稍后就可能会遇到很大的麻烦！</para>
		</footnote>
	      </entry>

	      <entry>否</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>

      <screen>                       User Confirmation Requested
 Do you want to select a default security profile for this host (select
 No for "medium" security)?

                            [ Yes ]    No</screen>

      <para>选择 &gui.no; 并按
	<keycap>Enter</keycap> 会将安全等级高为中度安全。</para>

      <para>选择 &gui.yes; 并按
	<keycap>Enter</keycap>将允许您选择其它程度的安全等级。</para>

      <figure id="security-profile">
	<title>选择安全等级</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/security" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>按 <keycap>F1</keycap> 显示在线帮助；按<keycap>Enter</keycap>
	键可以回到选择画面。</para>

      <para>如果您没有什么特殊的等级需求，请用方向键选择 <guimenuitem>中度</guimenuitem>，
	确定选择了 &gui.ok; 然后按<keycap>Enter</keycap>。</para>

      <para>依据您选择的安全等级，会显示相对应的确认信息。</para>

      <screen>                                 Message

Moderate security settings have been selected.

Sendmail and SSHd have been enabled, securelevels are
disabled, and NFS server setting have been left intact.
PLEASE NOTE that this still does not save you from having
to properly secure your system in other ways or exercise
due diligence in your administration, this simply picks
a standard set of out-of-box defaults to start with.

To change any of these settings later, edit /etc/rc.conf

                                  [OK]</screen>

      <screen>                                 Message

Extreme security settings have been selected.

Sendmail, SSHd, and NFS services have been disabled, and
securelevels have been enabled.
PLEASE NOTE that this still does not save you from having
to properly secure your system in other ways or exercise
due diligence in your administration, this simply picks
a more secure set of out-of-box defaults to start with.

To change any of these settings later, edit /etc/rc.conf

                                  [OK]</screen>

      <para>按下 <keycap>Enter</keycap> 继续安装后面的配置。</para>

      <warning>
	<para>安全等级并非万能药！即使您选择极度安全，您还是必须时常阅读
	  <xref linkend="eresources-mail">邮件列表中有关安全的部分、使用有效的密码以及平常就注意安全问题。
	  这里只是稍为配置一下常用的安全等级而已。</para>
      </warning>

    </sect2>

    <sect2 id="console">
      <title>配置系统终端</title>

      <para>系统提供了几个选项可以让您配置终端的表现方式。</para>

      <screen>                      User Confirmation Requested
       Would you like to customize your system console settings?

                              [ Yes ]  No</screen>

      <para>要查阅及配置这些选项，请选择 &gui.yes;
	并按<keycap>Enter</keycap>。</para>

      <figure id="saver-options">
	<title>系统终端配置选项</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/console-saver1" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>最常用的选项就是屏幕保护程序了。使用方向键将光标移动到
	 <guimenuitem>Saver</guimenuitem> 然后按<keycap>Enter</keycap>。</para>

      <figure id="saver-select">
	<title>屏幕保护程序选项</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/console-saver2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>选择您想使用的屏幕保护程序，然后按 <keycap>Enter</keycap>。
	之后回到系统终端配置画面。</para>

      <para>默认开启屏幕保护程序的时间是300秒。如果要更改此时间，请再次选择
	 <guimenuitem>Saver</guimenuitem> 。然后选择 <guimenuitem>Timeout</guimenuitem>
	并按 <keycap>Enter</keycap>键。系统会弹出一个对话框如下：</para>

      <figure id="saver-timeout">
	<title>屏幕保护时间设置</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/console-saver3" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>您可以直接改变这个值，然后选 &gui.ok;并按 <keycap>Enter</keycap>
	键回到系统终端配置画面。</para>

      <figure id="saver-exit">
	<title>退出系统终端配置</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/console-saver4" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>选择 <guimenuitem>Exit</guimenuitem> 然后按下
	<keycap>Enter</keycap> 键会回到安装后的配置画面。</para>
    </sect2>

    <sect2 id="timezone">
      <title>配置时区</title>

      <para>配置您机器的时区可以让系统自动校正任何区域时间的变更并且在执行
	一些跟时区相关的程序时不会出错。</para>

      <para>例子中假设此台机器位于美国东部的时区。请参考您所在的地理位置来配置。</para>

      <screen>                      User Confirmation Requested
          Would you like to set this machine's time zone now?

                            [ Yes ]   No</screen>

      <para>选择 &gui.yes; 并按下
	<keycap>Enter</keycap>键以配置时区。</para>

      <screen>                       User Confirmation Requested
 Is this machine's CMOS clock set to UTC? If it is set to local time
 or you don't know, please choose NO here!

                              Yes   [ No ]</screen>

      <para>这里按照您机器时间的配置，选择 &gui.yes;
	或 &gui.no; 然后按 <keycap>Enter</keycap>。</para>

      <figure id="set-timezone-region">
	<title>选择您所处的地理区域</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/timezone1" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>请选择适当的区域然后按 <keycap>Enter</keycap>。</para>

      <figure id="set-timezone-country">
	<title>选择您所在的国家</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/timezone2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>选择您所在的国家然后按 <keycap>Enter</keycap>。</para>

      <figure id="set-timezone-locality">
	<title>选择您所在的时区</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/timezone3" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>选择您所在的时区然后按 <keycap>Enter</keycap>。</para>

      <screen>                            Confirmation
            Does the abbreviation 'EDT' look reasonable?

                            [ Yes ]   No</screen>

      <para>检查一下时区的缩写是否正确，如果没错，请按 <keycap>Enter</keycap>
	返回系统安装后的配置画面。</para>
    </sect2>

    <sect2 id="linuxcomp">
      <title>Linux 兼容性</title>

      <screen>                      User Confirmation Requested
          Would you like to enable Linux binary compatibility?

                            [ Yes ]   No</screen>

      <para>选择 &gui.yes; 并按下<keycap>Enter</keycap>
	键，将允许您在FreeBSD中执行Linux的软件。安装程序会安装一些为了跟Linux
	兼容的软件包。</para>

      <para>如果您是通过FTP安装，那么您必须连到网络上。有时候FTP站并不会包含
	所有的安装软件包（例如Linux兼容软件包）；不过，稍后您还可以再安装这个
	项目。</para>
    </sect2>

    <sect2 id="mouse">
      <title>配置鼠标</title>

      <para>此选项可以让您在终端上使用三键鼠标剪贴文字。如果您用的鼠标是两个
	按钮，请参考手册 &man.moused.8;；以取得有关模拟三键鼠标的信息。范例中
	使用的鼠标不是USB接口。（例如ps/2或com接口的鼠标）：</para>

      <screen>                      User Confirmation Requested
         Does this system have a non-USB mouse attached to it?

                            [ Yes ]    No </screen>

      <para>如果您使用的不是USB鼠标，请选择 &gui.yes; ；
	否则请选择 &gui.no; 。然后按<keycap>Enter</keycap>。</para>

      <figure id="mouse-protocol">
	<title>选择鼠标类型</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/mouse1" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>使用方向键选择 <guimenuitem>Type</guimenuitem> 然后按
	<keycap>Enter</keycap>。</para>

      <figure id="set-mouse-protocol">
	<title>设置鼠标协议</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/mouse2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>在这个例子中使用的类型是ps/2鼠标，所以可以使用默认的
	<guimenuitem>Auto（自动）</guimenuitem> 。 您可以用方向键选择合适的项目，
	确定选择了 &gui.ok; 后按 <keycap>Enter</keycap> 键离开此画面。</para>

      <figure id="config-mouse-port">
	<title>配置鼠标端口</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/mouse3" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>选择 <guimenuitem>Port</guimenuitem> 然后按 <keycap>Enter</keycap>。</para>

      <figure id="set-mouse-port">
	<title>配置鼠标端口</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/mouse4" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>假设这台机器用的是ps/2鼠标，您可以采用默认的
	<guimenuitem>PS/2</guimenuitem> 选项。请选择适当的项目然后按
	 <keycap>Enter</keycap>。</para>

      <figure id="test-daemon">
	<title>启动鼠标服务进程</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/mouse5" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>选择<guimenuitem>Enable</guimenuitem>然后按
	<keycap>Enter</keycap> 来启动和测试鼠标。</para>


      <figure id="test-mouse-daemon">
	<title>测试鼠标功能</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/mouse6" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>鼠标指针可以在屏幕上移动，指明鼠标服务已经正常启用。那么请选择
	&gui.yes; 按 <keycap>Enter</keycap>键。否则鼠标没
	有配置成功 &mdash; 选择	&gui.no; 并尝试不同的配置
	选项。</para>

      <para>选择 <guimenuitem>Exit</guimenuitem> 并按
	<keycap>Enter</keycap> 退回到系统安装完成后的配置画面。</para>
    </sect2>

    <sect2 id="network-services">
      <sect2info>
        <authorgroup>
          <author>
            <firstname>Tom</firstname>
            <surname>Rhodes</surname>
            <contrib>Contributed by </contrib>
          </author>
        </authorgroup>
      </sect2info>
      <title>配置其他网络服务</title>

      <para>配置网络服务总是让那些新手敬畏，因为他们缺乏在这个领域应有的基础知识。
	网络，包括因特网有许多关于现代操作系统包括 &os; 的评论文章。这些文章对于
	理解&os;拥有的广泛的网络性能是非常有帮助的。在安装这些服务的过程中也能让
	用户理解它们可用的各种服务。</para>

      <para>网络服务是一些可以使在网络的任何人来访问您提供的服务的程序。有许多
	努力想使这些程序不会有任何的 <quote>伤害</quote>。不幸的是，这些程序并
	不是十全十美的，黑客可能会掌握程序中的一些露洞来进行攻击。只启用一些您
	熟悉的和需要的服务十分重要。如果您存在一些疑虑或没有启用这些服务的必要
	那么最好不要使用这些服务。您可以事后通过运行
	<application>sysinstall</application> 程序或使用
	<filename>/etc/rc.conf</filename> 配置文件来启用它们。</para>

      <para>选择 <quote>Networking</quote> 选项将下显示一个类似下面的菜单：</para>

      <figure id="network-configuration">
	<title>网络配置之上层配置</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/net-config-menu1" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>第一个选项，<guimenuitem>Interfaces</guimenuitem>，
	已经在前面 <xref linkend="inst-network-dev"> 中讨论过，因此这里可以略过。</para>

      <para>选择 <guimenuitem>AMD</guimenuitem> 选项，添加 <acronym>BSD</acronym>
	对自动挂接程序的支持。这个程序和<acronym>NFS</acronym> 协议一起使用
	不需要经过特别的设置就可以自动挂接远程文件系统。</para>

      <para>下一行是 <guimenuitem>AMD Flags</guimenuitem> 的参数选项。当您选择后，会弹出一个
	子菜单来让您选择 <acronym>AMD</acronym> 的参数。菜单中包含一系列的选项：</para>

      <screen>-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map</screen>

      <para><option>-a</option> 选项用来设置默认的挂接位置，这里使用的是
	<filename>/.amd_mnt</filename>目录。 <option>-l</option>
	指定默认的 <filename>日志</filename> 文件；但是，当
	 <literal>syslogd</literal> 被指定用来接收所有的日志时，那么它们会被送到
	系统日志程序。<filename class="directory">/host</filename> 被用来挂接远程
	主机输出的一个文件系统，例子中<filename class="directory">/net</filename>
	目录被用来挂接从<acronym>IP</acronym>输出的一个文件系统。
	<filename>/etc/amd.map</filename> 文件定义了 <acronym>AMD</acronym> 的默认
	输出选项。</para>

      <indexterm>
	<primary>FTP</primary>
	<secondary>anonymous</secondary>
      </indexterm>

      <para><guimenuitem>Anon FTP</guimenuitem> 允许匿名 <acronym>FTP</acronym> 访问。
	选中这个选项，可以使这台机器成为一台匿名 <acronym>FTP</acronym> 服务器。
	要注意启用这个选项的安全风险。其它的菜单将说明一些安全问题和更深入的配置。</para>

      <para><guimenuitem>Gateway</guimenuitem> 配置菜单可以使本机器成为一台以前我们提到过
	的网关。如果您在安装过程中偶尔选中了它，也可以在这里选中这个选项来取消。</para>

      <para> <guimenuitem>Inetd</guimenuitem> 选项用来配置或完全禁止我们在上面讨论的
	&man.inetd.8; 守护程序。</para>

      <para> <guimenuitem>Mail</guimenuitem> 可以用来配置系统默认的 <acronym>MTA</acronym>
	或邮件传输代理。选择这个选项将了出现下面的菜单：</para>

      <figure id="mta-selection">
	<title>选择默认的 MTA</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/mta-main" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>这里给您提供了一个安装默认<acronym>MTA</acronym> 的机会。
	 <acronym>MTA</acronym> 用来投递本系统上用户邮件到因特网去。</para>

      <para>选择 <guimenuitem>Sendmail</guimenuitem> 将会安装 &os;默认的
	流行的的 <application>sendmail</application> 服务程序。
	<guimenuitem>Sendmail local</guimenuitem> 选项用来设置<application>sendmail</application>
	默认的<acronym>MTA</acronym>，也可以禁止它从Internet接收邮件的能力。
	还有其它的一些选项如：
	<guimenuitem>Postfix</guimenuitem> 和
	<guimenuitem>Exim</guimenuitem> 都类似于
	<guimenuitem>Sendmail</guimenuitem>的角色。它们两者也可以投递邮件；
	有些用户更喜欢选择使用<application>Sendmail</application>、
	<acronym>MTA</acronym>二者之一。</para>

      <para>选择 <acronym>MTA</acronym>或不选择它之后，网络配置菜单的下一
	个选项是 <guimenuitem>NFS client</guimenuitem> 客户端程序。</para>

      <para> <guimenuitem>NFS client</guimenuitem> 客户端可以使系统通过 <acronym>NFS</acronym>
	与服务器进行通信。
	<acronym>NFS</acronym> 服务器通过<acronym>NFS</acronym>
	协议可以使其它在网络上的机器来访问自己的文件系统。如果这台机器要作为一台
	独立的服务器，这个选项可以保留不选。下面可能还有更多的配置，关于客户端和
	服务器的配置请参阅<xref linkend="network-nfs"> 一节。</para>

      <para>接下来的 <acronym>NFS</acronym> 服务器选项，可以允许您把系统设备成
	为一台<acronym>NFS</acronym> 服务器。这需要更多的信息来启动远程过程调
	用（<acronym>RPC</acronym>）服务。 <acronym>RPC</acronym>用来连接调
	用两台机器上的程序。</para>

      <para>下一项是 <guimenuitem>Ntpdate</guimenuitem> 选项，处理时间同步。当选择它后，
	会出现一个像下面所似的菜单：</para>

      <figure id="Ntpdate-config">
	<title>Ntpdate 配置</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/ntp-config" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>从这个菜单选择一个离您最近的服务器。在您连接这台服务器时，除去
	连接时的反应时间，时间同步最精确的服务器。</para>

      <para>下一个选项是 <acronym>PCNFSD</acronym>。 这个选项将安装第三方软件包
	<filename role="package">net/pcnfsd</filename>。 它可以用来为无法自行提供
	<acronym>NFS</acronym> 认证服务的操作系统， 如微软的  &ms-dos; 提供服务。</para>

      <para>滚屏到下一页看一下其它选项：</para>

      <figure id="Network-configuration-cont">
	<title>网络配置之下层配置</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/net-config-menu2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>&man.rpcbind.8;， &man.rpc.statd.8; 和 &man.rpc.lockd.8;
	这三个程序是用来提供远程过程调用 (<acronym>RPC</acronym>) 服务的。
	<command>rpcbind</command> 程序管理 <acronym>NFS</acronym>
	服务器和客户端的通信， 这是 <acronym>NFS</acronym> 正确工作的必要前提。
	<application>rpc.statd</application> 程序可以和其它主机上
	<application>rpc.statd</application> 程序交互， 以提供的状态监控。
	这些状态报告默认情况下会保存到
	 <filename>/var/db/statd.status</filename> 文件中。 最后的一项是
	<guimenuitem>rpc.lockd</guimenuitem> 选项， 如果启用，
	则将提供文件上锁服务。 通常将它和 <application>rpc.statd</application>
	联用， 以监视哪些主机会请求对文件执行上锁操作， 以及这种操作的频繁程度。
	尽管后两项功能对于调试非常有用， 但它们并不是
	<acronym>NFS</acronym> 服务器和客户端正常运行所必需的。</para>

      <para>下一个项目是<guimenuitem>Routed</guimenuitem>，这是一个路由程序。
	&man.routed.8; 程序管理网络路由表，发现多播路由，
	并且支持在网络上与它物理相连的主机来复制它的路由表的请求。
	它被广泛地应用在本地网络中并扮演关网关的角色。
	当选择它后，一个子菜单会来询问您这个程序的默认位置。
	默认的位置已经被定义过， 您可以选择 <keycap>Enter</keycap> 键，
	也可以按下其它的键。 这时会出来另一个菜单来询问您传递给 <command>routed</command>程序的参数。
	默认的是 <option>-q</option> 参数。</para>

      <para>接下来是 <guimenuitem>Rwhod</guimenuitem> 选项，选中它会启用 &man.rwhod.8; 程序
	在系统初时化的时候。 <command>rwhod</command>程序通过网络周期性的广播系统
	信息或以<quote>客户</quote>的身份来收集这些信息。更多的信息可以查看
	 &man.ruptime.1; 和&man.rwho.1; 手册页。</para>

      <para>倒数第二个选项是&man.sshd.8; 程序。它可以通过使用
	<application>OpenSSH</application>来提供安全的shell服务，我们推荐通过
	使用它来使用 <application>telnet</application> 和 <acronym>FTP</acronym> 服务。
	<application>sshd</application>服务通过使用加密技术来创建从一台机器到另一台机
	器的安全连接。</para>

      <para>最后有一个 <guimenuitem>TCP</guimenuitem> 扩展选项。这可以用来扩展在
	<acronym>RFC</acronym>&nbsp;1323 和<acronym>RFC</acronym>&nbsp;1644
	里定义的<acronym>TCP</acronym> 功能。当许多主机以高速连接本机时，可
	能会引起某些连接被丢弃。我们不推荐使用这个选项，但是当使用独立的主机
	时可以从它上面得到一些好处。</para>

      <para>现在您已经配置完成了网络服务，您可以滚动屏幕到顶部选择 <guimenuitem>Exit</guimenuitem>
	项，退出进入下一个配置部分。</para>

    </sect2>

    <sect2 id="x-server">
      <title>配置 X Server</title>

      <note>
	<para>从 &os;&nbsp;5.3-RELEASE 开始， X 服务的配置机制从
	  <application>sysinstall</application> 中删掉了。 您必须在安装完 &os;
	  之后再配置 X 服务。 关于安装和配置 X 服务的进一步细节可以在 <xref
	  linkend="x11"> 找到。 如果您不是在安装 5.3-RELEASE 之前的 &os; 版本的话，
	  则可以跳过这一节。</para>
      </note>

      <para>要使用诸如
	<application>KDE</application>、 <application>GNOME</application>，
	以及其他一些图形界面， 则需要配置 X 服务器。</para>

      <note>
	<para>为了以非<username>root</username>用户运行
	 <application>&xfree86;</application> 您必须安装
	 <filename role="package">x11/wrapper</filename> 软件。在FreeBSD 4.7及以上
	版本是默认安装的，但以前的版本要手工安装到系统中。</para>
      </note>

      <para>要知道您的显卡是否被支持，请参考
	<ulink url="http://www.xfree86.org/">&xfree86;</ulink> 网站。</para>

      <screen>                      User Confirmation Requested
        Would you like to configure your X server at this time?

                            [ Yes ]   No</screen>

      <warning>
	<para>您需要了解监视器和显卡信息的制造规格。
	  如果配置有误， 可能会造成设备损毁。
	  如果您一时没有这样的信息， 请选择
	  &gui.no;， 之后再通过
	  <command>sysinstall</command> (对于 &os;
	  5.2 以前的版本来说， 是 <command>/stand/sysinstall</command>)， 选择
	  <guimenuitem>Configure</guimenuitem> 然后是
	  <guimenuitem>XFree86</guimenuitem> 来配置。
	  如果设置不当， X 服务器将导致系统停止响应。
	  通常， 建议您在安装完成之后再配置 X 服务程序。
	</para>
      </warning>

      <para>如果您有显卡和显示器的信息，请选择
	&gui.yes; 并按 <keycap>Enter</keycap>
	来配置 X-server。</para>

      <figure id="xserver2">
	<title>选择配置方法菜单</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/xf86setup" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>您可以通过许多方法来配置 X server。在认真读了所有的说明后，
	请使用方向键来选择一种配置方式，并按<keycap>Enter</keycap>
	键确认。</para>

      <para><application>xf86cfg</application> 和
	<application>xf86cfg -textmode</application> 配置方法可能会使屏幕黑屏一会，
	过一会即会启动。要有耐心。</para>


      <para>下面将介绍<application>xf86config</application> 配置工具。
	根据系统硬件的不同，下面的信息可能会适当的发生变动：</para>

      <screen>                                Message
 You have configured and been running the mouse daemon.
 Choose "/dev/sysmouse" as the mouse port and "SysMouse" or
 "MouseSystems" as the mouse protocol in the X configuration utility.

                                 [ OK ]

                      [ Press enter to continue ]</screen>

      <para>这个信息指明，前面配置的鼠标驱动程序被检测到。按
	<keycap>Enter</keycap> 键继续。</para>

      <para>启动 <application>xf86config</application> 后会显示一个简单的说明：</para>

      <screen>This program will create a basic XF86Config file, based on menu selections you
make.

The XF86Config file usually resides in /usr/X11R6/etc/X11 or /etc/X11. A sample
XF86Config file is supplied with XFree86; it is configured for a standard
VGA card and monitor with 640x480 resolution. This program will ask for a
pathname when it is ready to write the file.

You can either take the sample XF86Config as a base and edit it for your
configuration, or let this program produce a base XF86Config file for your
configuration and fine-tune it.

Before continuing with this program, make sure you know what video card
you have, and preferably also the chipset it uses and the amount of video
memory on your video card. SuperProbe may be able to help with this.

Press enter to continue, or ctrl-c to abort.</screen>

      <para>按 <keycap>Enter</keycap> 将启动鼠标配置。请按照指示选择
	<quote>Mouse Systems</quote> 作为鼠标协议，
	<filename>/dev/sysmouse</filename> 作为鼠标端口。下面的例子
	向您说明的是使用一个 PS/2 鼠标：</para>

      <screen>First specify a mouse protocol type. Choose one from the following list:

 1.  Microsoft compatible (2-button protocol)
 2.  Mouse Systems (3-button protocol) &amp; FreeBSD moused protocol
 3.  Bus Mouse
 4.  PS/2 Mouse
 5.  Logitech Mouse (serial, old type, Logitech protocol)
 6.  Logitech MouseMan (Microsoft compatible)
 7.  MM Series
 8.  MM HitTablet
 9.  Microsoft IntelliMouse

If you have a two-button mouse, it is most likely of type 1, and if you have
a three-button mouse, it can probably support both protocol 1 and 2. There are
two main varieties of the latter type: mice with a switch to select the
protocol, and mice that default to 1 and require a button to be held at
boot-time to select protocol 2. Some mice can be convinced to do 2 by sending
a special sequence to the serial port (see the ClearDTR/ClearRTS options).

Enter a protocol number: 2

You have selected a Mouse Systems protocol mouse. If your mouse is normally
in Microsoft-compatible mode, enabling the ClearDTR and ClearRTS options
may cause it to switch to Mouse Systems mode when the server starts.

Please answer the following question with either 'y' or 'n'.
Do you want to enable ClearDTR and ClearRTS? n

You have selected a three-button mouse protocol. It is recommended that you
do not enable Emulate3Buttons, unless the third button doesn't work.

Please answer the following question with either 'y' or 'n'.
Do you want to enable Emulate3Buttons? y

Now give the full device name that the mouse is connected to, for example
/dev/tty00. Just pressing enter will use the default, /dev/mouse.
On FreeBSD, the default is /dev/sysmouse.

Mouse device: /dev/sysmouse</screen>

      <para>下一个要配置的项目是键盘。在例子中使用的键盘一般是101-key 。您可以选择不
	同的键盘类型或直接按 <keycap>Enter</keycap> 键来使用默认配置。</para>

      <screen>Please select one of the following keyboard types that is the better
description of your keyboard. If nothing really matches,
choose 1 (Generic 101-key PC)

  1  Generic 101-key PC
  2  Generic 102-key (Intl) PC
  3  Generic 104-key PC
  4  Generic 105-key (Intl) PC
  5  Dell 101-key PC
  6  Everex STEPnote
  7  Keytronic FlexPro
  8  Microsoft Natural
  9  Northgate OmniKey 101
 10  Winbook Model XP5
 11  Japanese 106-key
 12  PC-98xx Series
 13  Brazilian ABNT2
 14  HP Internet
 15  Logitech iTouch
 16  Logitech Cordless Desktop Pro
 17  Logitech Internet Keyboard
 18  Logitech Internet Navigator Keyboard
 19  Compaq Internet
 20  Microsoft Natural Pro
 21  Genius Comfy KB-16M
 22  IBM Rapid Access
 23  IBM Rapid Access II
 24  Chicony Internet Keyboard
 25  Dell Internet Keyboard

Enter a number to choose the keyboard.

1


Please select the layout corresponding to your keyboard


  1  U.S. English
  2  U.S. English w/ ISO9995-3
  3  U.S. English w/ deadkeys
  4  Albanian
  5  Arabic
  6  Armenian
  7  Azerbaidjani
  8  Belarusian
  9  Belgian
 10  Bengali
 11  Brazilian
 12  Bulgarian
 13  Burmese
 14  Canadian
 15  Croatian
 16  Czech
 17  Czech (qwerty)
 18  Danish

Enter a number to choose the country.
Press enter for the next page

1


Please enter a variant name for 'us' layout. Or just press enter
for default variant

us


Please answer the following question with either 'y' or 'n'.
Do you want to select additional XKB options (group switcher,
group indicator, etc.)? n</screen>

      <para>接下来，我们要配置显示器。不要超过您显示器的刷新频率，这样可能
	会损坏您的显示器。如果您有疑问，请参考其它信息后再做配置。</para>

      <screen>Now we want to set the specifications of the monitor. The two critical
parameters are the vertical refresh rate, which is the rate at which the
whole screen is refreshed, and most importantly the horizontal sync rate,
which is the rate at which scanlines are displayed.

The valid range for horizontal sync and vertical sync should be documented
in the manual of your monitor. If in doubt, check the monitor database
/usr/X11R6/lib/X11/doc/Monitors to see if your monitor is there.

Press enter to continue, or ctrl-c to abort.



You must indicate the horizontal sync range of your monitor. You can either
select one of the predefined ranges below that correspond to industry-
standard monitor types, or give a specific range.

It is VERY IMPORTANT that you do not specify a monitor type with a horizontal
sync range that is beyond the capabilities of your monitor. If in doubt,
choose a conservative setting.

    hsync in kHz; monitor type with characteristic modes
 1  31.5; Standard VGA, 640x480 @ 60 Hz
 2  31.5 - 35.1; Super VGA, 800x600 @ 56 Hz
 3  31.5, 35.5; 8514 Compatible, 1024x768 @ 87 Hz interlaced (no 800x600)
 4  31.5, 35.15, 35.5; Super VGA, 1024x768 @ 87 Hz interlaced, 800x600 @ 56 Hz
 5  31.5 - 37.9; Extended Super VGA, 800x600 @ 60 Hz, 640x480 @ 72 Hz
 6  31.5 - 48.5; Non-Interlaced SVGA, 1024x768 @ 60 Hz, 800x600 @ 72 Hz
 7  31.5 - 57.0; High Frequency SVGA, 1024x768 @ 70 Hz
 8  31.5 - 64.3; Monitor that can do 1280x1024 @ 60 Hz
 9  31.5 - 79.0; Monitor that can do 1280x1024 @ 74 Hz
10  31.5 - 82.0; Monitor that can do 1280x1024 @ 76 Hz
11  Enter your own horizontal sync range

Enter your choice (1-11): 6

You must indicate the vertical sync range of your monitor. You can either
select one of the predefined ranges below that correspond to industry-
standard monitor types, or give a specific range. For interlaced modes,
the number that counts is the high one (e.g. 87 Hz rather than 43 Hz).

 1  50-70
 2  50-90
 3  50-100
 4  40-150
 5  Enter your own vertical sync range

Enter your choice: 2

You must now enter a few identification/description strings, namely an
identifier, a vendor name, and a model name. Just pressing enter will fill
in default names.

The strings are free-form, spaces are allowed.
Enter an identifier for your monitor definition: Hitachi</screen>

      <para>下一个配置是从显卡的驱动列表里选择一个显卡驱动程序。如果忽略
	当前列表中的选项，请直接按<keycap>Enter</keycap> 下一屏将会出现在屏幕上，
	会显示下面的信息：</para>

      <screen>Now we must configure video card specific settings. At this point you can
choose to make a selection out of a database of video card definitions.
Because there can be variation in Ramdacs and clock generators even
between cards of the same model, it is not sensible to blindly copy
the settings (e.g. a Device section). For this reason, after you make a
selection, you will still be asked about the components of the card, with
the settings from the chosen database entry presented as a strong hint.

The database entries include information about the chipset, what driver to
run, the Ramdac and ClockChip, and comments that will be included in the
Device section. However, a lot of definitions only hint about what driver
to run (based on the chipset the card uses) and are untested.

If you can't find your card in the database, there's nothing to worry about.
You should only choose a database entry that is exactly the same model as
your card; choosing one that looks similar is just a bad idea (e.g. a
GemStone Snail 64 may be as different from a GemStone Snail 64+ in terms of
hardware as can be).

Do you want to look at the card database? y



288  Matrox Millennium G200 8MB                        mgag200
289  Matrox Millennium G200 SD 16MB                    mgag200
290  Matrox Millennium G200 SD 4MB                     mgag200
291  Matrox Millennium G200 SD 8MB                     mgag200
292  Matrox Millennium G400                            mgag400
293  Matrox Millennium II 16MB                         mga2164w
294  Matrox Millennium II 4MB                          mga2164w
295  Matrox Millennium II 8MB                          mga2164w
296  Matrox Mystique                                   mga1064sg
297  Matrox Mystique G200 16MB                         mgag200
298  Matrox Mystique G200 4MB                          mgag200
299  Matrox Mystique G200 8MB                          mgag200
300  Matrox Productiva G100 4MB                        mgag100
301  Matrox Productiva G100 8MB                        mgag100
302  MediaGX                                           mediagx
303  MediaVision Proaxcel 128                          ET6000
304  Mirage Z-128                                      ET6000
305  Miro CRYSTAL VRX                                  Verite 1000

Enter a number to choose the corresponding card definition.
Press enter for the next page, q to continue configuration.

288

Your selected card definition:

Identifier: Matrox Millennium G200 8MB
Chipset:    mgag200
Driver:     mga
Do NOT probe clocks or use any Clocks line.

Press enter to continue, or ctrl-c to abort.



Now you must give information about your video card. This will be used for
the "Device" section of your video card in XF86Config.

You must indicate how much video memory you have. It is probably a good
idea to use the same approximate amount as that detected by the server you
intend to use. If you encounter problems that are due to the used server
not supporting the amount memory you have (e.g. ATI Mach64 is limited to
1024K with the SVGA server), specify the maximum amount supported by the
server.

How much video memory do you have on your video card:

 1  256K
 2  512K
 3  1024K
 4  2048K
 5  4096K
 6  Other

Enter your choice: 6

Amount of video memory in Kbytes: 8192

You must now enter a few identification/description strings, namely an
identifier, a vendor name, and a model name. Just pressing enter will fill
in default names (possibly from a card definition).

Your card definition is Matrox Millennium G200 8MB.

The strings are free-form, spaces are allowed.
Enter an identifier for your video card definition:</screen>

      <para>接下来，设置显卡的分辨率。典型的使用范围是 640x480, 800x600,
	和 1024x768，这些显卡的功能特性、分辨率的大小以眼睛的舒适为准。
	当选择颜色深度时，可以选择您显卡支持最大模式。</para>

      <screen>For each depth, a list of modes (resolutions) is defined. The default
resolution that the server will start-up with will be the first listed
mode that can be supported by the monitor and card.
Currently it is set to:

"640x480" "800x600" "1024x768" "1280x1024" for 8-bit
"640x480" "800x600" "1024x768" "1280x1024" for 16-bit
"640x480" "800x600" "1024x768" "1280x1024" for 24-bit

Modes that cannot be supported due to monitor or clock constraints will
be automatically skipped by the server.

 1  Change the modes for 8-bit (256 colors)
 2  Change the modes for 16-bit (32K/64K colors)
 3  Change the modes for 24-bit (24-bit color)
 4  The modes are OK, continue.

Enter your choice: 2

Select modes from the following list:

 1  "640x400"
 2  "640x480"
 3  "800x600"
 4  "1024x768"
 5  "1280x1024"
 6  "320x200"
 7  "320x240"
 8  "400x300"
 9  "1152x864"
 a  "1600x1200"
 b  "1800x1400"
 c  "512x384"

Please type the digits corresponding to the modes that you want to select.
For example, 432 selects "1024x768" "800x600" "640x480", with a
default mode of 1024x768.

Which modes? 432

You can have a virtual screen (desktop), which is screen area that is larger
than the physical screen and which is panned by moving the mouse to the edge
of the screen. If you don't want virtual desktop at a certain resolution,
you cannot have modes listed that are larger. Each color depth can have a
differently-sized virtual screen

Please answer the following question with either 'y' or 'n'.
Do you want a virtual screen that is larger than the physical screen? n



For each depth, a list of modes (resolutions) is defined. The default
resolution that the server will start-up with will be the first listed
mode that can be supported by the monitor and card.
Currently it is set to:

"640x480" "800x600" "1024x768" "1280x1024" for 8-bit
"1024x768" "800x600" "640x480" for 16-bit
"640x480" "800x600" "1024x768" "1280x1024" for 24-bit

Modes that cannot be supported due to monitor or clock constraints will
be automatically skipped by the server.

 1  Change the modes for 8-bit (256 colors)
 2  Change the modes for 16-bit (32K/64K colors)
 3  Change the modes for 24-bit (24-bit color)
 4  The modes are OK, continue.

Enter your choice: 4



Please specify which color depth you want to use by default:

  1  1 bit (monochrome)
  2  4 bits (16 colors)
  3  8 bits (256 colors)
  4  16 bits (65536 colors)
  5  24 bits (16 million colors)

Enter a number to choose the default depth.

4</screen>

      <para>最后，要保存您的配置，确定输入 <filename>/etc/X11/XF86Config</filename>
	作为保存位置。</para>

      <screen>I am going to write the XF86Config file now. Make sure you don't accidently
overwrite a previously configured one.

Shall I write it to /etc/X11/XF86Config? y</screen>

      <para>如果您配置失败，您也可以尝试着按 &gui.yes; 来
	重新再试一次，会显示下面的信息：</para>

      <screen>          User Confirmation Requested
The XFree86 configuration process seems to have
failed.  Would you like to try again?

             [ Yes ]         No</screen>

      <para>如果配置 <application>&xfree86;</application>时遇上困难，请选择
	&gui.no; 并按 <keycap>Enter</keycap>键继续
	进行安装。安装完成后可以使用 <command>xf86cfg -textmode</command> 或
	<command>xf86config</command> 命令行配置程序来以 <username>root</username>
	用户的身份进行配置。配置 <application>&xfree86;</application> 的另外一种方法
	描述在	<xref linkend="x11">。如果您选择不配置<application>&xfree86;</application>
	那么下一个菜单将让您选择要安装的软件包。</para>

      <para>默认情况下可以使用组合键 <keycombo action='simul'>
	<keycap>Ctrl</keycap><keycap>Alt</keycap>
	<keycap>Backspace</keycap></keycombo>，在发生错误或在硬件损坏前退出
	设置屏幕。</para>

      <para>默认的显示模式可以使用X系统下的
	<keycombo action='simul'>
	  <keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>+</keycap>
	</keycombo> 或
	<keycombo action='simul'>
	  <keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>-</keycap>
	</keycombo>来改变。
      </para>

      <para>一旦有了可以运行的 <application>&xfree86;</application>，
	就可以使用 <application>xvidtune</application> 来调整显示的高度和宽度以及显示器的中心位置。</para>

      <para>一些不适当的配置可能会损坏您的设备。如果在使用它们前存在疑虑，请不要
	安装它们。可以使用监视器的控制工具来调整X窗口的显示。与文本显示模式不同
	它更容易损坏设备。</para>

      <para>在调整这些参数前，请阅读 &man.xvidtune.1; 手册。</para>

      <para>下面是一个配置 <application>&xfree86;</application> 的成功例子，它选择了
	使用默认的桌面。</para>
    </sect2>

    <sect2 id="default-desktop">
      <title>选择默认的桌面</title>

      <note>
	<para>从 &os;&nbsp;5.3-RELEASE 开始， X 桌面的选择机制已经从
	  <application>sysinstall</application> 中删掉了。
	  您只能在安装好 &os; 之后再配置它。 关于安装和配置 X
	  桌面的更多细节可以在 <xref linkend="x11"> 找到。
	  如果不是在安装 &os; 5.3-RELEASE 之前的版本，
	  则可以跳过这一节。</para>
      </note>

      <para>有许多窗口管理器可以使用。它们从基本的桌面环境到全部的桌面应用，是
	一个大型的软件集。一些人可能只希望使用一些占用磁盘空间少，内存低的窗口
	管理器；而另外一些人则更倾向于使用有便多特性的桌面环境。选择使用那种桌
	面的最好的方法就是尝试着试用一些不同的桌面环境。这些桌面都可以在安装
	完成后通过ports收集或包管理器来进行安装。</para>

      <para>您可以选择一个流行的桌面配置成为默认的桌面，可以使您在安装完
	成后立刻启动它。</para>

      <figure id="x-desktop">
	<title>选择默认桌面</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/desktop" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>使用箭头选择一个桌面，然后键入<keycap>Enter</keycap>键。选择的桌面将被
	安装。</para>
    </sect2>

    <sect2 id="packages">
    <title>安装软件包</title>

      <para>这些软件包已经被预编译成二进制程序了，安装软件有一个很简单的方法。</para>

      <para>前面已经介绍了如何安装一个软件包的例子。
	如果需要的话， 在安装结束之后， 仍然可以使用
	<command>sysinstall</command> (对于 &os;
	5.2 之前的版本是 <command>/stand/sysinstall</command>)
	来安装其他软件包。</para>

      <screen>                     User Confirmation Requested
 The FreeBSD package collection is a collection of hundreds of
 ready-to-run applications, from text editors to games to WEB servers
 and more. Would you like to browse the collection now?

                            [ Yes ]   No</screen>

      <para>选择 &gui.yes; 按<keycap>Enter</keycap>
	将会显示软件包选择屏幕。</para>

      <figure id="package-category">
	<title>选择软件所的种类</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/pkg-cat" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>在任何时候只有安装介质上有的软件包才能被安装进系统。</para>

      <para>如果选择<guimenuitem>All</guimenuitem> 那么所有的软件包将会被显示，您也
	可以选择一个特殊的分类。使用箭头进行选择，然后键入 <keycap>Enter</keycap>。</para>

      <para>一个菜单将会显示这个分类中可用的所有软件包。</para>

      <figure id="package-select">
	<title>选择软件包</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/pkg-sel" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para> <application>bash</application> shell 被选中了。通过在加亮的软件
	上键入<keycap>Space</keycap> 键，来选择您想要的软件所。每个选择的软件
	包的简短描述都会显示在屏幕左下脚。</para>

      <para>按 <keycap>Tab</keycap> 键选择 &gui.ok;或 &gui.cancel;。</para>

      <para>当您完成了安装标记之后，键入 <keycap>Tab</keycap> 键选择 &gui.ok;
	然后键入<keycap>Enter</keycap> 返回软件包选择菜单。</para>

      <para>左右箭头键也可以用来选择 &gui.ok;和 &gui.cancel;。用这种方法也可以
	用 &gui.ok; 然后按 <keycap>Enter</keycap> 来返回软件包选择菜单。</para>

      <figure id="package-install">
	<title>安装软件包</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/pkg-install" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>使用 <keycap>Tab</keycap> 和箭头键来选择 <guibutton>[&nbsp;Install&nbsp;]</guibutton>
	然后键入 <keycap>Enter</keycap>。您接着需要确定您要安装的软件包。</para>

      <figure id="package-install-confirm">
	<title>确认安装的软件包</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/pkg-confirm" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>选择 &gui.ok; 然后键入<keycap>Enter</keycap> 键将开始软件的安装，
	安装信息将会不断地出现。如果有一些错误信息，请作好记录。</para>

      <para>安装完成之后，继续最后的配置。如果您不想安装任何软件包并退回到
	最终配置屏幕，请选择<guibutton>Install</guibutton> 。</para>
    </sect2>

    <sect2 id="addusers">
      <title>添加用户/组</title>

      <para>您至少要在安装过程中添加一个用户，以便于您能不用<username>root</username>
	来登录使用系统。根分区通常比较小，用 <username>root</username> 来运行应用程序
	可能会快一点。但这样会有一些危险：</para>

      <screen>                     User Confirmation Requested
 Would you like to add any initial user accounts to the system? Adding
 at least one account for yourself at this stage is suggested since
 working as the "root" user is dangerous (it is easy to do things which
 adversely affect the entire system).

                            [ Yes ]   No</screen>

      <para>选择 &gui.yes; 然后键入<keycap>Enter</keycap> 继续添加用户。</para>

      <figure id="add-user2">
	<title>选择用户</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/adduser1" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>用箭头键来选择 <guimenuitem>User</guimenuitem> 然后按
	<keycap>Enter</keycap>。</para>

      <figure id="add-user3">
	<title>添加用户信息</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/adduser2" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>下面的描述信息会出现在屏幕的下方，可以使用 <keycap>Tab</keycap>
	键来切换不同的项目，以便输入相关信息：</para>

      <variablelist>
	<varlistentry>
	  <term>Login ID</term>

	  <listitem>
	    <para>新用户的登录名（强制性必须写）</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>UID</term>

	  <listitem>
	    <para>这个用户的ID编号（如果不写，系统自动添加）</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>Group</term>

	  <listitem>
	    <para>这个用户的登录组名（如果不写，系统自动添加）</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>Password</term>

	  <listitem>
	    <para>这个用户的密码（键入这个需要很仔细！）</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>Full name</term>

	  <listitem>
	    <para>用户的全名（解释、备注）</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>Member groups</term>

	  <listitem>
	    <para>这个用户所在的组</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>Home directory</term>

	  <listitem>
	    <para>用户的主目录（如果不写，系统自动添加）</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>Login shell</term>
	  <listitem>
	    <para>用户登录的shell（默认是<filename>/bin/sh</filename>）。</para>
	  </listitem>
	</varlistentry>
      </variablelist>

      <para>你可以将登录 shell 由 <filename>/bin/sh</filename> 改为
	<filename>/usr/local/bin/bash</filename>， 以便使用事先以 package 形式安装的
	<application>bash</application> shell。
	不要使用一个不存在的或您不能登录的shell。最通用的shell是使用
	BSD-world 的 C shell，可以通过指定<filename>/bin/tcsh</filename>来修改。</para>

      <para>用户也可以被添加到 <groupname>wheel</groupname> 组中成了一个超级用户，
	从而拥有 <username>root</username>权限。</para>

      <para>当您感觉满意时，键入 &gui.ok; 键，用户和组管理菜单将会重新出现。</para>

      <figure id="add-user4">
	<title>退出用户和组管理</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/adduser3" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>如果有其他的需要，  此时还可以添加其他的组。
	此外， 还可以通过
	<command>sysinstall</command> (在 &os; 5.2 以前的版本中是
	<command>/stand/sysinstall</command>) 在安装完成之后添加它们。</para>

      <para>当您完成添加用户的时候，选择<guimenuitem>Exit</guimenuitem>
	然后键入<keycap>Enter</keycap> 继续下面的安装。</para>
    </sect2>

    <sect2 id="rootpass">
      <title>设置 <username>root</username> 密码</title>

      <screen>                        Message
 Now you must set the system manager's password.
 This is the password you'll use to log in as "root".

                         [ OK ]

               [ Press enter to continue ]</screen>

      <para>键入 <keycap>Enter</keycap> 来设置 <username>root</username>
	密码。</para>

      <para>密码必须正确地输入两次。 毋庸讳言，
	您需要选择一个不容易忘记的口令。
	请注意您输入的口令不会回显， 也不会显示星号。</para>

      <screen>Changing local password for root.
New password :
Retype new password :</screen>

      <para>密码成功键入后，安装将继续。</para>
    </sect2>

    <sect2 id="exit-inst">
      <title>退出安装</title>

      <para>如果您需要设置其他的网络设备， 或者需要完成其他的配置，
	可以在此时或者事后通过 <command>sysinstall</command>
	(对于 &os; 5.2 之前的版本是 <command>/stand/sysinstall</command>)
	来进行配置。</para>

      <screen>                     User Confirmation Requested
 Visit the general configuration menu for a chance to set any last
 options?

                              Yes   [ No ]</screen>

     <para>选择 &gui.no; 然后键入 <keycap>Enter</keycap>
	返回到主安装菜单。</para>

      <figure id="final-main">
	<title>退出安装</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="install/mainexit" format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>选择 <guibutton>[X Exit Install]</guibutton> 然后键入
	 <keycap>Enter</keycap>。您可能需要确认是否真的退出安装：</para>

      <screen>                     User Confirmation Requested
 Are you sure you wish to exit? The system will reboot (be sure to
 remove any floppies from the drives).

                            [ Yes ]   No</screen>

      <para>选择 &gui.yes; 取出软盘。CDROM驱动器将被锁定，
	直到机器重新启动。CDROM然后就可以从驱动器中取出来了。</para>

      <para>在系统重新启动的时候可能会见到出错信息。</para>
    </sect2>

    <sect2 id="freebsdboot">
      <title>FreeBSD的启动</title>

      <sect3 id="freebsdboot-i386">
        <title>FreeBSD 在 &i386;上启动</title>

      <para>如果启动正常，您将看到在屏幕上有很多信息滚动，最后您会看到登录命令行。
	您可以通过键入 <keycap>Scroll-Lock</keycap>和使用 <keycap>PgUp</keycap>
	与 <keycap>PgDn</keycap>来查看信息，再键入 <keycap>Scroll-Lock</keycap>
	回到命令行。</para>

      <para>记录信息可能不会显示（缓冲区的限制）。您可以通过键入
	<command>dmesg</command> 来查看。</para>

      <para>使用您在安装过程中设置的用户名/密码来登录。（例子中使用
	<username>rpratt</username>）。除非必须的时候请不要用
	<username>root</username> 用户登录。</para>

      <para>典型的启动信息：（忽略版本信息）</para>

<screen>Copyright (c) 1992-2002 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.

Timecounter "i8254"  frequency 1193182 Hz
CPU: AMD-K6(tm) 3D processor (300.68-MHz 586-class CPU)
  Origin = "AuthenticAMD"  Id = 0x580  Stepping = 0
  Features=0x8001bf&lt;FPU,VME,DE,PSE,TSC,MSR,MCE,CX8,MMX&gt;
  AMD Features=0x80000800&lt;SYSCALL,3DNow!&gt;
real memory  = 268435456 (262144K bytes)
config&gt; di sn0
config&gt; di lnc0
config&gt; di le0
config&gt; di ie0
config&gt; di fe0
config&gt; di cs0
config&gt; di bt0
config&gt; di aic0
config&gt; di aha0
config&gt; di adv0
config&gt; q
avail memory = 256311296 (250304K bytes)
Preloaded elf kernel "kernel" at 0xc0491000.
Preloaded userconfig_script "/boot/kernel.conf" at 0xc049109c.
md0: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: &lt;math processor&gt; on motherboard
npx0: INT 16 interface
pcib0: &lt;Host to PCI bridge&gt; on motherboard
pci0: &lt;PCI bus&gt; on pcib0
pcib1: &lt;VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge&gt; at device 1.0 on pci0
pci1: &lt;PCI bus&gt; on pcib1
pci1: &lt;Matrox MGA G200 AGP graphics accelerator&gt; at 0.0 irq 11
isab0: &lt;VIA 82C586 PCI-ISA bridge&gt; at device 7.0 on pci0
isa0: &lt;ISA bus&gt; on isab0
atapci0: &lt;VIA 82C586 ATA33 controller&gt; port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0: &lt;VIA 83C572 USB controller&gt; port 0xe400-0xe41f irq 10 at device 7.2 on pci0
usb0: &lt;VIA 83C572 USB controller&gt; on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr 1
uhub0: 2 ports with 2 removable, self powered
chip1: &lt;VIA 82C586B ACPI interface&gt; at device 7.3 on pci0
ed0: &lt;NE2000 PCI Ethernet (RealTek 8029)&gt; port 0xe800-0xe81f irq 9 at
device 10.0 on pci0
ed0: address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
fdc0: &lt;NEC 72065B or clone&gt; at port 0x3f0-0x3f5,0x3f7 irq 6 drq 2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: &lt;1440-KB 3.5" drive&gt; on fdc0 drive 0
atkbdc0: &lt;keyboard controller (i8042)&gt; at port 0x60-0x64 on isa0
atkbd0: &lt;AT Keyboard&gt; flags 0x1 irq 1 on atkbdc0
kbd0 at atkbd0
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: model Generic PS/2 mouse, device ID 0
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: &lt;System console&gt; at flags 0x1 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
ppbus0: IEEE1284 device found /NIBBLE
Probing for PnP devices on ppbus0:
plip0: &lt;PLIP network interface&gt; on ppbus0
lpt0: &lt;Printer&gt; on ppbus0
lpt0: Interrupt-driven port
ppi0: &lt;Parallel I/O&gt; on ppbus0
ad0: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata0-master using UDMA33
ad2: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata1-master using UDMA33
acd0: CDROM &lt;DELTA OTC-H101/ST3 F/W by OIPD&gt; at ata0-slave using PIO4
Mounting root from ufs:/dev/ad0s1a
swapon: adding /dev/ad0s1b as swap device
Automatic boot in progress...
/dev/ad0s1a: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1a: clean, 48752 free (552 frags, 6025 blocks, 0.9% fragmentation)
/dev/ad0s1f: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1f: clean, 128997 free (21 frags, 16122 blocks, 0.0% fragmentation)
/dev/ad0s1g: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1g: clean, 3036299 free (43175 frags, 374073 blocks, 1.3% fragmentation)
/dev/ad0s1e: filesystem CLEAN; SKIPPING CHECKS
/dev/ad0s1e: clean, 128193 free (17 frags, 16022 blocks, 0.0% fragmentation)
Doing initial network setup: hostname.
ed0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
        inet6 fe80::5054::5ff::fede:731b%ed0 prefixlen 64 tentative scopeid 0x1
        ether 52:54:05:de:73:1b
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x8
        inet6 ::1 prefixlen 128
        inet 127.0.0.1 netmask 0xff000000
Additional routing options: IP gateway=YES TCP keepalive=YES
routing daemons:.
additional daemons: syslogd.
Doing additional network setup:.
Starting final network daemons: creating ssh RSA host key
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
cd:76:89:16:69:0e:d0:6e:f8:66:d0:07:26:3c:7e:2d root@k6-2.example.com
 creating ssh DSA host key
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
f9:a1:a9:47:c4:ad:f9:8d:52:b8:b8:ff:8c:ad:2d:e6 root@k6-2.example.com.
setting ELF ldconfig path: /usr/lib /usr/lib/compat /usr/X11R6/lib
/usr/local/lib
a.out ldconfig path: /usr/lib/aout /usr/lib/compat/aout /usr/X11R6/lib/aout
starting standard daemons: inetd cron sshd usbd sendmail.
Initial rc.i386 initialization:.
rc.i386 configuring syscons: blank_time screensaver moused.
Additional ABI support: linux.
Local package initialization:.
Additional TCP options:.

FreeBSD/i386 (k6-2.example.com) (ttyv0)

login: rpratt
Password:</screen>

      <para>生成 RSA 和 DSA密钥在比较慢的机器上可能要花很长时间。这只是一个
	新安装后的首次启动，以后的启动会变得更快一点。</para>

      <para>如果已经完成 X 服务器的配置， 且指定了默认的桌面窗口管理器，
	就可以在命令行键入 <command>startx</command> 来启动它了。</para>

      </sect3>

      <sect3>
        <title> FreeBSD 在 Alpha机器上启动</title>

	<indexterm><primary>Alpha</primary></indexterm>

        <para>一旦安装完成，您就可以键入下面的命令来启动FreeBSD：</para>

	<screen>&gt;&gt;&gt;<userinput>BOOT DKC0</userinput></screen>

	<para>这是从指定的固定硬件进行引导。如果要使 FreeBSD 下次能够自动启动，
	使用下面的命令：</para>

	<screen><prompt>&gt;&gt;&gt;</prompt> <userinput>SET BOOT_OSFLAGS A</userinput>
<prompt>&gt;&gt;&gt;</prompt> <userinput>SET BOOT_FILE ''</userinput>
<prompt>&gt;&gt;&gt;</prompt> <userinput>SET BOOTDEF_DEV DKC0</userinput>
<prompt>&gt;&gt;&gt;</prompt> <userinput>SET AUTO_ACTION BOOT</userinput></screen>

	<para>启动信息跟启动 &i386;机器时差不多。（但不完全一样）</para>
      </sect3>
    </sect2>

    <sect2 id="shutdown">
      <title>FreeBSD 关机</title>

      <para>正确的关闭操作系统是很重要的。不要仅仅关闭电源。首先，您需要成为一个超
	级用户，通过键入 <command>su</command> 命令来实现。然后输入
	<username>root</username> 密码。这需要用户是 <groupname>wheel</groupname>
	组的一名成员。然后，以<username>root</username>键入
	<command>shutdown -h now</command>命令。</para>

      <screen>The operating system has halted.
Please press any key to reboot.</screen>

      <para>当shutdown命令发出后，屏幕上出现 <quote>Please press any key to reboot</quote>
	信息时，您就可以安全的关闭计算机了。如果按下任意一个键，计算机将重新启动。</para>

      <para>您也能够使用
        <keycombo action="simul">
	  <keycap>Ctrl</keycap>
	  <keycap>Alt</keycap>
	  <keycap>Del</keycap>
	</keycombo>
	组合键来重新启动计算机，但是不推荐使用这个操作。</para>

    </sect2>
  </sect1>

  <sect1 id="install-supported-hardware">
    <title>支持的硬件</title>

    <indexterm><primary>hardware</primary></indexterm>
    <para>FreeBSD当前可以广泛运行在ISA、VLB、EISA、PCI总线的PC上，包括
	Inter,AMD,Cyrix或 NexGen <quote>x86</quote>系列的机器，还有一些
	Compaq Alpha的机器。支持普通的 IDE 或 ESDI 驱动配置，各种SCSI控制器，
	PCMCIA卡，USB设备，网卡和其它网络串口设备。FreeBSD也支持IBM微通道
	（MCA）的总线结构。</para>

    <para>每个发行版都会提供一个FreeBSD支持的硬件列表。您可以在名字叫做
	 <filename>HARDWARE.TXT</filename>的文件中找到。它可以在CDROM或FTP发行组件
	或<application>sysinstall</application>的文档菜单中找到。对于特定的架构，都
	有相应的硬件支持列表。也可以在FreeBSD的网站 <ulink
      url="http://www.FreeBSD.org/releases/index.html">Release
      Information</ulink> 找到更多的信息。</para>
  </sect1>

  <sect1 id="install-trouble">
    <title>常见问题</title>

    <indexterm>
      <primary>安装</primary>
      <secondary>常见问题</secondary>
    </indexterm>
    <para>下面将介绍一些在安装过程中常见的问题，像如何报告发生的问题，如何
	双重启动FreeBSD和 &ms-dos;。</para>

    <sect2>
      <title>当您遇到错误时，应该怎么做？</title>

      <para>由于pc结构的限制，不可能100%的不出现问题，但是有些问题是您可以
	自己解决的。</para>

      <para>先检查您的硬件，确保您的硬件被支持。</para>

      <para>如果您的硬件能够被支持，但还是会出问题，那就重新启动计算机。当出现
	内核配置信息的时候，重新配置一下硬件信息。因为绝大多数硬件的IRQ，IO地
	址，DMA通道都有它们的生产商预先进行默认配置。如果您的硬件已经重新装配了，
	就需要使用配置编辑器告诉FreeBSD到哪里去找相关信息。</para>

      <para>如果某个设备配置好后，发现又有个设备出现错误。碰到这种情况，就当卸掉
	这个设备的驱动程序。</para>

      <note>
        <para>有些安装问题可以借助更新硬件的程序来解决，特别是主板的
          <acronym>BIOS</acronym> 。大部分的主板制造商都会提供网站给用户下载新的
	BIOS以及提供如何更新的说明。</para>

        <para>也有许多制造商强烈建议，除非必要否则不要轻易更新
          <acronym>BIOS</acronym> 。因为更新的过程<emphasis>可能</emphasis>
	会发生问题，进而损害<acronym>BIOS</acronym> 芯片。</para>
        </note>

      <warning>
        <para>不要禁用安装过程中您会用到的驱动程序， 例如显示 <devicename>sc0</devicename>。
	如果安装程序在修改了某些配置之后安装程序行为诡异或失败，
	您可能修改或删除了某些不应删除的组件。
	如果遇到这种情况， 应重新启动以便尝试其他设置。</para>
      </warning>

      <para>在配置模式下，您可以：</para>

      <itemizedlist>
        <listitem>
          <para>列出在内核中安装的设备驱动程序。</para>
        </listitem>

        <listitem>
          <para>禁用不适合您机器的设备驱动程序。</para>
        </listitem>

        <listitem>
          <para>通过驱动程序改变IRQ，DRQ和IO端口地址。</para>
        </listitem>
      </itemizedlist>

      <para>调整内核与您的硬件设置一致之后，键入 <command>Q</command> ，以新的设置
	重新启动计算机。当FreeBSD安装完成之后，在配置模式下做的更改会一直存在，不需
	要在每次启动计算机时再重新设置。即使如此，有可能您会想建立一个定制内核使您
	的系统效率达到最好，可以看看以下的链接 <link
        linkend="kernelconfig">custom kernel</link>。</para>
    </sect2>

    <sect2>
      <title>处理 &ms-dos; 分区存在的问题</title>

      <indexterm><primary>DOS</primary></indexterm>
      <para>许多 &os; 的用户会在运行了 &microsoft; 的 <acronym>PC</acronym>
	上安装 FreeBSD。 以下是一些关于在这种系统中安装 FreeBSD
	常会出现的问题。 &os; 中有一个叫 <application>FIPS</application>
	的应用程序。 此工具程序可以在安装光盘的
	<filename>tools</filename> 目录下找到， 或者， 也可以从
	<link linkend="mirrors">&os; 的镜像站点</link> 下载。</para>

      <para><application>FIPS</application> 允许您将现有的 &ms-dos;
	分区一分为二， 保留原原有的分区， 而将新系统安装到空出来的分区上。
	首先要整理 &ms-dos; 分区的碎片， 您可以用 &windows; 的
	<application>Disk Defragmenter</application> (进入资源管理器，
	右键单击硬盘， 并选择整理碎片) 或
	<application>Norton Disk Tools</application> 来完成这项工作。
	接下来就可以运行 <application>FIPS</application>，
	它会提示您接下来所需要进行的操作。 接下来就可以重新启动并将 &os;
	安装到新空出来的分区中了。 安装所需的磁盘空间， 可以从
	 <guimenuitem>Distributions</guimenuitem> 菜单给出的值来进行估计。</para>

      <para>有一个由PowerQuest公司生产的非常有用的工具。从
	<ulink url="http://www.powerquest.com/">http://www.powerquest.com</ulink>网站上
	可以得到<application>&partitionmagic;</application>。这个工具的功能比
	 <application>FIPS</application>要强大。如果您经常要添加或删除操作系统，强烈建议
	您使用它。当然，它很贵。如果您只是想安装 &os; 的话， <application>FIPS</application>
	就已足够了。</para>
    </sect2>

    <sect2>
      <title>使用 &ms-dos; 和 &windows; 文件系统</title>

      <para>现在 &os; 还不支持经过<application>Double Space&trade;</application>
	应用程序压缩过的文件系统。因此其它的文件系统在被&os;访问其数据之前必须先
	解压缩。它可以通过运行位于 <guimenuitem>Start</guimenuitem>&gt;
	<guimenuitem>Programs</guimenuitem> &gt;
	<guimenuitem>System Tools</guimenuitem> menu中的
	<application>Compression Agent</application>程序来实现。 </para>

      <para>&os;可以支持基于 &ms-dos; 的文件系统。这要求您使用带参数的 &man.mount.msdosfs.8;
	命令。 最常使用的是：</para>

      <screen>&prompt.root; <userinput>mount_msdosfs /dev/ad0s1 /mnt</userinput></screen>

      <para>在此例子中， &ms-dos; 文件系统位于主硬盘的第一个分区。您的情况可能与引不同，
	查看命令 <command>dmesg</command>和 <command>mount</command> 的输出。它们应该
	可以让您得到足够的分区信息。</para>

      <note><para> &ms-dos; 的扩展分区会被映射在 &os;分区的末尾。换句话说，分区号要大于
	&os; 正在使用的分区号。例如，第一个 &ms-dos; 分区可能位于
	<filename>/dev/ad0s1</filename>，&os; 分区可能位于
	<filename>/dev/ad0s2</filename>，跟着是 &ms-dos; 的扩展分区位于
	 <filename>/dev/ad0s3</filename>。这可能会使您感觉迷茫。</para></note>

      <para>NTFS 分区也可以通过类似 &man.mount.ntfs.8; 命令挂接在FreeBSD上。</para>
    </sect2>

    <sect2>
      <title>Alpha 用户的问题与解答</title>

      <indexterm><primary>Alpha</primary></indexterm>

      <para>这节主要回答一些在Alpha系统上安装FreeBSD时经常问到的问题。</para>

      <qandaset>
	<qandaentry>
	  <question>
	    <para>我可以从 ARC 或 Alpha BIOS 控制台启动吗？</para>
	  </question>

	  <indexterm><primary>ARC</primary></indexterm>
	  <indexterm><primary>Alpha BIOS</primary></indexterm>
	  <indexterm><primary>SRM</primary></indexterm>

	  <answer>
	    <para>不行。 &os;，像Compaq Tru64 和 VMS，只能从SRM 控制台启动。</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question>
	    <para>求救，我没有空间了！我需要删除每一样东西吗？</para>
	  </question>

	  <answer>
	    <para>不，这个时候不行。</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question>
	    <para>我可以挂上 Compaq Tru64 或 VMS 的文件系统吗？</para>
	  </question>

	  <answer>
	    <para>不，这个时候不行。</para>
	  </answer>
	</qandaentry>
      </qandaset>
    </sect2>
  </sect1>

  <sect1 id="install-advanced">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Valentino</firstname>
	  <surname>Vaschetto</surname>
	  <contrib>Contributed by </contrib>
	</author>
	<!-- May 2001 -->
      </authorgroup>
    </sect1info>

    <title>高级安装指南</title>

    <para>这节主要描述在一些特殊情况下如何安装FreeBSD。</para>

    <sect2 id="headless-install">
      <title>在一个没有显示器或键盘的系统上安装FreeBSD</title>

      <indexterm>
        <primary>installation</primary>
        <secondary>headless (serial console)</secondary>
      </indexterm>
      <indexterm><primary>serial console</primary></indexterm>
      <para>这种类型的安装叫做 <quote>headless install（无关安装）</quote>，
	因您正要安装FreeBSD的机器不是没带显示器，就是没有显卡。您可能会问那怎么安装？
	可以使用一个串行控制台。串行控制台基本上是使用另外一台机器来充当主显示设备
	和键盘。要这样做，只要执行下面的步骤：创建安装软件，请看 <xref
        linkend="install-floppies">一节说明。</para>

      <para>按下面的步骤，修改这些软盘用来引导进入一个串行控制台：</para>

      <procedure>
	<step>
	  <title>通过启动软盘来引导进入一个串行控制台</title>
  	    <indexterm>
	      <primary><command>mount</command></primary>
	    </indexterm>
	    <para>如果您想用软盘，FreeBSD将进入它通常的安装模式。我们要把FreeBSD
	引导进入串行控制台，需要这样做，您必须使用 &man.mount.8;命令在FreeBSD系统
	上挂一<filename>kern.flp</filename>的那个软盘。</para>

            <screen>&prompt.root; <userinput>mount /dev/fd0 /mnt</userinput></screen>

	    <para>现在您已经挂上了软盘，
	      需要进入 <filename class="directory">/mnt</filename> 目录：</para>

	    <screen>&prompt.root; <userinput>cd /mnt</userinput></screen>

	    <para>这儿是您必须设置软盘引导进入串行控制台的地方。您必须制作一个包含
	<literal>/boot/loader -h</literal>这行的叫做<filename>boot.config</filename>
	的文件。所有这些是为了给引导程序一个标记以引导进入串行控制台。</para>

	    <screen>&prompt.root; <userinput>echo "/boot/loader -h" &gt; boot.config</userinput></screen>

	    <para>现在您已经正确配置好了软盘，您必须使用 &man.umount.8;
	命令卸下软盘。</para>

            <screen>&prompt.root; <userinput>cd /</userinput>
&prompt.root; <userinput>umount /mnt</userinput></screen>

	    <para>现在您可以从软盘驱动器中取出软盘了。</para>
	  </step>

	  <step>
	    <title>连接您的 Null-modem 线</title>

  	    <indexterm><primary>null modem cable</primary></indexterm>
	    <para>您现在需要一根<link linkend="term-cables-null">null modem线</link>来连接两台机器。
	      只要连接两台机器的串口。
	      <emphasis>普通的串行线是不行的</emphasis>，您需要使用一根null modem的线，
	      因为它在一些十字交叉口有金属线。</para>
	  </step>

	  <step>
	    <title>开始启动安装</title>

	    <para>现在开始启动安装。把 <filename>kern.flp</filename> 的那张软盘
	插入软盘驱动器，然后开启电源。</para>
	  </step>

	  <step>
	    <title>连接您的无头机器</title>
	    <indexterm>
	      <primary><command>cu</command></primary>
	    </indexterm>
	    <para>现在您已经通过&man.cu.1;连接到了那台机器。</para>

	    <screen>&prompt.root; <userinput>cu -l /dev/cuaa0</userinput></screen>
	  </step>
      </procedure>

      <para>就这样！您已经能够通过您的<command>cu</command> session对话来控制
	那台<quote>无头</quote>机器了。它将要求您把 <filename>mfsroot.flp</filename>的那张软盘
	插入驱动器，然后它将提示选择使用哪种终端。只要选择FreeBSD的彩色控制台，然后
	继续您的安装。</para>

    </sect2>
  </sect1>

  <sect1 id="install-diff-media">
    <title>准备您自己的安装介质</title>

    <note>
      <para>为了避免重复 <quote>FreeBSD disc</quote> 在这里指 FreeBSD CDROM or DVD
	那即意味着您要购买或自己制做。</para>
    </note>

    <para>有好几个原因需要您创建自己的FreeBSD安装介质。这可能是物理介质，如磁带，
	使用 <application>sysinstall</application>程序找到的安装文件，FTP站点或
	 &ms-dos;分区。</para>

    <para>例如：</para>

    <itemizedlist>
      <listitem>
	<para>您有许多机器连接到本地网络，使用一个FreeBSD光盘。您要使用FreeBSD来
	创建一个本地FTP站点，然后使用这个FTP站点来代替连接到Internet。</para>
      </listitem>

      <listitem>
	<para>您有一张 FreeBSD 光盘， FreeBSD 不支持您的 CD/DVD 驱动器， 但
	  &ms-dos;/&windows; 支持。 您要复制安装文件到一个DOS分区，
	  然后使用这些文件进行安装。</para>
      </listitem>

      <listitem>
	<para>您要安装的计算机没有 CD/DVD驱动器和网卡，但您可以连接一个
	  <quote>Laplink-style</quote> 串口或并口线缆到那台计算机。</para>
      </listitem>

      <listitem>
	<para>您要通过一个磁带机来安装FreeBSD.</para>
      </listitem>
    </itemizedlist>

    <sect2 id="install-cdrom">
      <title>创建一张安装光盘</title>

      <para>FreeBSD的每个发行版本都提供两张CDROM映像(<quote>ISO images</quote>)。
	如果您有刻录机，这些映像文件可以被(<quote>burned</quote>) 成FreeBSD的安装光盘。
	如果没有刻录机，而上网带宽却很便宜，它也是一种很好的安装方式。</para>

      <procedure>
	<step>
	  <title>下载正确的 ISO 映像文件</title>

	  <para>每个版本的ISO映像文件都可以从 <filename>ftp://ftp.FreeBSD.org/pub/FreeBSD/ISO-IMAGES-<replaceable>架构名</replaceable>/<replaceable>版本</replaceable></filename>
	或最近的镜像站点下载。选择合适的 <replaceable>架构</replaceable> 和
	    <replaceable>版本</replaceable> 。</para>

	  <para>目录中包含下面一些映像文件：</para>

	  <table frame="none">
	    <title>FreeBSD 4.<replaceable>X</replaceable> ISO 映像文件名和含意</title>

	    <tgroup cols="2">
	      <thead>
		<row>
		  <entry>文件名</entry>

		  <entry>包含内容</entry>
		</row>
	      </thead>

	      <tbody>
		<row>
		  <entry><filename><replaceable>版本</replaceable>-RELEASE-<replaceable>架构名</replaceable>-miniinst.iso</filename></entry>
		  
		  <entry>安装 FreeBSD 所需的全部文件。</entry>
		</row>

		<row>
		  <entry><filename><replaceable>版本</replaceable>-RELEASE-<replaceable>架构名</replaceable>-disc1.iso</filename></entry>

		  <entry>安装 FreeBSD 所需的全部文件， 以及这张光盘能装下的、
		    尽可能多的第三方软件包。</entry>
		</row>

		<row>
		  <entry><filename><replaceable>版本</replaceable>-RELEASE-<replaceable>架构名</replaceable>-disc2.iso</filename></entry>

		  <entry>一份用于与 <application>sysinstall</application> 中的
		    <quote>Repair</quote>(修复) 机制联用的
		    <quote>现场文件系统</quote>。 一份
		    FreeBSD CVS 目录的副本， 以及这张光盘能装下的、
		    尽可能多的第三方软件包。</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </table>

	  <table frame="none">
	    <title>FreeBSD 5.<replaceable>X</replaceable> ISO 映像文件名和含意</title>

	    <tgroup cols="2">
	      <thead>
		<row>
		  <entry>文件名</entry>

		  <entry>包含内容</entry>
		</row>
	      </thead>

	      <tbody>
		<row>
		  <entry><filename><replaceable>版本</replaceable>-RELEASE-<replaceable>架构</replaceable>-bootonly.iso</filename></entry>

		  <entry>引导 FreeBSD 内核并启动安装界面所需的全部数据。
		    安装文件可以从 FTP 或其他安装源获得。</entry>
		</row>

		<row>
		  <entry><filename><replaceable>版本</replaceable>-RELEASE-<replaceable>架构名</replaceable>-miniinst.iso</filename></entry>
		  
		  <entry>安装 FreeBSD 所需的全部文件。</entry>
		</row>

		<row>
		  <entry><filename><replaceable>版本</replaceable>-RELEASE-<replaceable>架构名</replaceable>-disc1.iso</filename></entry>

		  <entry>安装 FreeBSD 所需的全部文件，
		    以及一份用于与 <application>sysinstall</application> 中的
		    <quote>Repair</quote>(修复) 机制联用的
		    <quote>现场文件系统</quote>。</entry>
		</row>

		<row>
		  <entry><filename><replaceable>版本</replaceable>-RELEASE-<replaceable>架构名</replaceable>-disc2.iso</filename></entry>

		  <entry>&os; 文档以及这张光盘能装下的、
		    尽可能多的第三方软件包。</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </table>

	  <para>您 <emphasis>必须</emphasis> 下载 miniinst
	    ISO 镜像或第一张光盘的镜像之一。 不需要两个都下载，
	    因为第一张光盘包括了 miniinst ISO 的全部内容。</para>

	  <note>
	    <para>miniinst ISO 镜像只有在
	      5.4-RELEASE 之前的版本才提供。</para>
	  </note>

	  <para>如果访问 Internet 的价格便宜， 建议使用 miniinst ISO。
	    这样您可以安装 FreeBSD， 并从网上通过 ports/packages 系统 (参见
	    <xref linkend="ports">) 根据需要下载和安装第三方软件包。</para>

	  <para>如果您正打算安装 &os;
	    并同时选择一些第三方软件包，
	    则可以下载第一张光盘的镜像文件。</para>

	  <para>其它的映像盘也是很有用的，但不是必须的，尤其是在您有高速的网络连接时。</para>
	</step>

	<step>
	  <title>刻录 CDs</title>

	  <para>您必须把这些映像文件刻录成光盘。如果您在其它的FreeBSD系统上完成
	此项工作，请看 <xref linkend="creating-cds"> 得到更多的信息，（特别是
	 <xref linkend="burncd"> 和 <xref linkend="cdrecord">）</para>

	  <para>如果您在其它的系统平台上执行，您需要相应的刻录软件。映像文件使用
	的是标准的ISO格式，必须被您的刻录软件所支持。</para>
	</step>
      </procedure>

      <note><para>如果有兴趣制作一张定制的 FreeBSD
        版本， 请参考 <ulink
        url="&url.articles.releng;">Release Engineering
        Article</ulink>。</para></note>

    </sect2>

    <sect2 id="install-ftp">
      <title>为 FreeBSD 安装盘建立局域网 FTP 站点</title>
	
      <indexterm>
	<primary>installation</primary>
	<secondary>network</secondary>
	<tertiary>FTP</tertiary>
      </indexterm>

      <para>FreeBSD 光盘的布局和 FTP 站点相同。 这样，
	建立局域网 FTP 站点来用于网络上的其它计算机安装 FreeBSD，
	就十分的容易。</para>

      <procedure>
	<step>
	  <para>在要作为FTP站点的那台FreeBSD机器上，确定FreeBSD磁盘放入光驱
	中并将它挂在<filename>/cdrom</filename>目录中。</para>

	  <screen>&prompt.root; <userinput>mount /cdrom</userinput></screen>
	</step>

	<step>
	  <para>在<filename>/etc/passwd</filename>文件中建立一个可匿名访问FTP
	服务器的账号。您可以利用&man.vipw.8; 命令编辑<filename>/etc/passwd</filename>
	文件，加入下面这一行叙述：</para>

	  <programlisting>ftp:*:99:99::0:0:FTP:/cdrom:/nonexistent</programlisting>
	</step>

	<step>
	  <para>确定在<filename>/etc/inetd.conf</filename>配置文件中开启
	了FTP服务。</para>
	</step>
      </procedure>

      <para>任何本地网络中的机器在安装FreeBSD选择安装介质时就可以选择透过
	FTP站点，然后选取 <quote>Other</quote>后输入
	<userinput>ftp://<replaceable>本地FTP服务器</replaceable></userinput>
	即可以透过本地的FTP站点来安装FreeBSD。</para>

      <note>
	<para>如果用作 FTP 客户端的引导介质 (通常是软盘)
	  与本地局域网的 FTP 站点上的版本不一致， <application>sysinstall</application>
	  会不允许您完成安装。 如果您使用的版本差距不很大，
	  并且希望绕过这一判断， 则应进入 <guimenu>Options</guimenu> 菜单，
	  并将安装包的名字改为
	  <guimenuitem>any</guimenuitem>。</para>
      </note>

      <warning>
	<para>此方式最好使用在有防火墙保护的内部网络。如果要将此FTP服务公开给外面的
	网际网络（非本地用户），您的电脑必须承担被侵入或其它的风险。我们强烈建议您
	要有完善的安全机制才这样做。</para>
      </warning>
    </sect2>

      <sect2>
        <title>创建安装软盘</title>

      <indexterm>
	<primary>installation</primary>
	<secondary>floppies</secondary>
      </indexterm>

      <para>如果您从软盘安装（我们<emphasis>不</emphasis>推荐那样做），或者是由于
	不支持硬件或者更简单的理由是因为您坚持要使用软盘安装。您必须准备几张软盘。</para>

	<para>至少这些软盘必须是 1.44 MB 或 1.2 MB 的，用来容纳所有在
	  <filename>bin</filename> (命令) 目录下的文件。如果您在 DOS
	  操作系统下准备就 <emphasis>MUST</emphasis>使用 &ms-dos;下的 <command>FORMAT</command>
	  命令来格式化软盘。 如果您使用的是 &windows; 操作系统，
	  在资源管理器中就可以完成这个工作 (用右键单击 <devicename>A:</devicename>
	  驱动器， 并选择 <quote>Format</quote>)。</para>

	<para><emphasis>不要</emphasis> 指望厂家的预先格式化！
	  最好还是亲自进行格式化。
	  过去用户报告的很多问题都是由于不正确地使用格式化设备所造成的，
	  所以我们需要在这里着重提一下。</para>

	<para>如果您在另外一台FreeBSD的机器上做了启动盘的话，进行格式化是一个不
	  错的主意。虽然您不需要把每张盘都做成DOS文件系统。您也可以使用
	  <command>bsdlabel</command> 和 <command>newfs</command>
	  命令来创建一个UFS文件系统，具体操作按下面的顺序进行：</para>

	<screen>&prompt.root; <userinput>fdformat -f 1440 fd0.1440</userinput>
&prompt.root; <userinput>bsdlabel -w -r fd0.1440 floppy3</userinput>
&prompt.root; <userinput>newfs -t 2 -u 18 -l 1 -i 65536 /dev/fd0</userinput></screen>

	<note>
	  <para>如果使用 5.25"软盘的话，需要使用 <literal>fd0.1200</literal> 和
	    <literal>floppy5</literal> 来格式化 1.2&nbsp;MB 的磁盘空间。</para>
	</note>

	<para>然后您就可以像其它的文件系统一样挂上和写入这些磁盘。</para>

	<para>格式化这些磁盘后，您必须把文件复制到磁盘中。
	这些发行文件被分割成刚好可存进五张 1.44&nbsp;MB 软盘。
	检查您所有的磁盘， 找出所有可能适合的文件。
	直到您找到所有需要的配置并且将它们以这种方式安置。
	第一个配置都应该有一个子目录在磁盘上， 例如：
	  <filename>a:\bin\bin.aa</filename>、
	  <filename>a:\bin\bin.ab</filename>， 等等。</para>

	<para>一旦您进入选择安装介质的屏幕，选择 <guimenuitem>Floppy</guimenuitem>
	将会看到后面的提示符。</para>
      </sect2>

      <sect2 id="install-msdos">
        <title>从 &ms-dos; 分区安装</title>

	<indexterm>
	  <primary>installation</primary>
	  <secondary>from MS-DOS</secondary>
	</indexterm>
	<para>如果从 &ms-dos; 分区安装， 您需要将发布文件复制到该分区根目录下的
	<filename>freebsd</filename> 目录中。 例如：
	<filename>c:\freebsd</filename>。 您必须复制一部分 CDROM 或 FTP
	上的目录结构， 因此， 如果您从光盘进行复制，
	建议使用 DOS 的 <command>xcopy</command> 命令。
	下面是准备进行 FreeBSD 最小系统安装的例子：</para>

	<screen><prompt>C:\&gt;</prompt> <userinput>md c:\freebsd</userinput>
<prompt>C:\&gt;</prompt> <userinput>xcopy e:\bin c:\freebsd\bin\ /s</userinput>
<prompt>C:\&gt;</prompt> <userinput>xcopy e:\manpages c:\freebsd\manpages\ /s</userinput></screen>

	<para>假设 <devicename>C:</devicename> 盘是您的空闲空间，
	   <devicename>E:</devicename> 盘是您挂接的 CDROM。</para>

	<para>如果您没有光盘驱动器，您可以从以下网站下载发行包。 <ulink
	  url="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/&rel.current;-RELEASE/">ftp.FreeBSD.org</ulink>.
	  每一个发行包都在一个目录中，例如 <emphasis>base</emphasis> 发行包可以在 <ulink
	  url="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/&rel.current;-RELEASE/base/">&rel.current;/base/</ulink>目录中找到。</para>

	<para>对很多发行包来说，如果您希望从 &ms-dos;分区安装的话（您有足够的空间），
	安装 <filename>c:\freebsd</filename> &mdash; 下的每个文件－这个
	  <literal>BIN</literal> 发行包只是最低限度的要求。</para>
      </sect2>

      <sect2>
        <title>创建一个安装磁带</title>

	<indexterm>
	  <primary>installation</primary>
	  <secondary>from QIC/SCSI Tape</secondary>
	</indexterm>
	<para>从磁带安装也许是最简单的方式，比在线使用 FTP 安装或使用 CDROM 还快。
	安装的程序假设是简单地被压缩在磁带上。在您得到所有配置文件后，简单地解开它们，
	用下面的命令：</para>

	<screen>&prompt.root; <userinput>cd /freebsd/distdir</userinput>
&prompt.root; <userinput>tar cvf /dev/rwt0 dist1 ... dist2</userinput></screen>

	<para>在您安装的时候，您要确定留有足够的空间给临时目录（允许您选择）
	  来容纳磁带安装时 <emphasis>全部</emphasis> 的内容。由于不是随机访问
	  磁带的，所以这种安装方法需要很多临时空间。</para>

	<note>
	  <para>开始安装时，在从软盘启动 <emphasis>之前</emphasis>，
	磁带机必须已经放在驱动设备中。 否则， 安装过程中可能会找不到它。</para>
	</note>
      </sect2>

      <sect2>
        <title>通过网络安装</title>

	<indexterm>
	  <primary>installation</primary>
	  <secondary>network</secondary>
	  <tertiary>serial (SLIP or PPP)</tertiary>
	</indexterm>
	<indexterm>
	  <primary>installation</primary>
	  <secondary>network</secondary>
	  <tertiary>parallel (PLIP)</tertiary>
	</indexterm>
	<indexterm>
	  <primary>installation</primary>
	  <secondary>network</secondary>
	  <tertiary>Ethernet</tertiary>
	</indexterm>
	<para>有三种类型的网络安装方法。串口（SLIP或PPP），并口（PLIP），以太网
	（标准的以太网控制器，包括PCMCIA）。</para>

	<para> SLIP 支持是相当原始的，并且被限制在主要对hard-wired 的连接，就像
	一台膝上型计算机与另一台计算机间的串行线。现在的SLIP的安装还没有提供拨号功能，
	这个连接应该是 hard-wired ；用PPP工具提供的这种便利性应该首先尽可能被用于SLIP
	设备。</para>

	<para>如果您使用一个MODEM，那您就只有PPP这一种选择了。在您安装的过程中，
	要确定您能很容易地获得完整且快速的关于您服务提供商的信息。</para>

	<para>如果您使用 PAP 或 CHAP 方式连接到您的 ISP，（换句话说，如果您不使用
	脚本在&windows;中连接到您的ISP），那么您需要在<application>ppp</application>
	提示符下输入<command>dial</command> 命令。否则，当PPP连接者只提供一种最简单的
	终端模拟器，您必须知道如何使用针对MODEM的 <quote>AT commands</quote>拨号到您
	的ISP。想知道更深入的信息可以参考用户级PPP那节 <link
	  linkend="userppp">handbook</link> and <ulink
	  url="&url.books.faq;/ppp.html">FAQ</ulink> 。如果您有一些问题，可以使用
	  <command>set log local ...</command>命令将日志显示在屏幕上。</para>

	<para>您也可以通过并口电缆连接到另外一台FreeBSD（2.0或以后的版本）机器上进行
	安装，您可以考虑使用 <quote>laplink</quote> 并口电缆进行安装。通过并口安装要
	比通过串口（最高 50&nbsp;kbytes/sec）安装快得多。</para>

	<para>最后，通过网络安装最快的方法是利用以太网技术！FreeBSD支持绝大多数普通
	的以太网卡。每个FreeBSD发行版都在硬件注释中提供支持的网卡的列表和需要的设置。
	如果您要使用PCMCIA接口的以太网，在启动计算机 <emphasis>之前</emphasis>，
	确信已经把它插好了。目前，FreeBSD还不支持PCMCIA的热插拔。</para>

	<para>通过网络安装，您可能需要知道IP地址，地址掩码，还有机器的名字。如果您
	通过PPP进行安装，就不需要静态的IP地址，IP地址会由ISP给您自动指派。您的系统
	管理员会告诉您通过网络安装的细节。如果您通过主机名而不是IP地址来访问其它主
	机，需要有一个域名服务器或一个网关地址（如果您使用PPP进行安装，那它就是您的
	ISP的IP地址）。如果您要通过一个HTTP的代理服务器进行FTP安装，需要一个代理
	服务器地址。如果您不知道这些，在安装 <emphasis>之前</emphasis>可以询问
	您的系统管理员或您的ISP服务商。</para>

	<sect3>
	  <title>通过NFS安装之前</title>

	  <indexterm>
	    <primary>installation</primary>
	    <secondary>network</secondary>
	    <tertiary>NFS</tertiary>
	  </indexterm>
	  <para>NFS 安装方式是非常方便的。 只需要简单地将 FreeBSD 文件复制到一台服务器上，
	    然后在安装时选择NFS介质。</para>

	  <para>如果这个服务器要<quote>特权端口</quote>才能支持（如SUN的工作站），
	    您需要在安装前在 <guimenu>Options</guimenu> 菜单中设置 <literal>NFS Secure</literal>。</para>

	  <para>如果您的一台网卡比较糟糕，速度很慢，则应考虑
	    <literal>NFS Slow</literal>的选项。</para>

	  <para>为了达到NFS安装的目的，这个服务器必须支持 subdir 加载。例如，如果您的
	    FreeBSD&nbsp;&rel.current; 目录存在：
	    <filename>ziggy:/usr/archive/stuff/FreeBSD</filename>，然后
	    <hostid>ziggy</hostid> 将必须允许直接挂上
	    <filename>/usr/archive/stuff/FreeBSD</filename>，而不仅仅是
	    <filename>/usr</filename> 或
	    <filename>/usr/archive/stuff</filename>。</para>

	  <para>在 FreeBSD的 <filename>/etc/exports</filename> 配置文件中，是由
	    <option>-alldirs</option> 选项来控制的。其它 NFS服务器也许有不同的方式。
	    如果您从服务器得到<errorname>permission denied</errorname> 这个信息，可能是因为您没有正确的启用它。</para>
	</sect3>

      </sect2>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
