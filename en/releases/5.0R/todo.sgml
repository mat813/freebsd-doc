<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" [
<!ENTITY base CDATA "../..">
<!ENTITY email 'freebsd-qa'>
<!ENTITY date "$FreeBSD: www/en/releases/5.0R/todo.sgml,v 1.39 2002/11/21 21:49:16 rwatson Exp $">
<!ENTITY title "FreeBSD 5.0 Open Issues">
<!ENTITY % includes SYSTEM "../../includes.sgml"> %includes;
]>

<html>
&header;

<h1>Open Issues</h1>

<p>This is a list of open issues that need to be resolved for FreeBSD
  5.0.  If you think something should be listed here, please email
  re@FreeBSD.org.  This issue was discussed in detail at the <a
  href="&base;/events/2002/usenix-devsummit.html">Developer Summit</a>
  at Usenix.</p>



<h3>Must Resolve Issues for 5.0-RC1</h3>
<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr>
  <td>Audit of devfs device permissions</td>
  <td>--</td>
  <td>kris@FreeBSD.org</td>
  <td>With the move to devfs, the permissions specified in kernel device
    creation lines using make_dev() are now used as the default permissions
    for /dev entries.  Some of these entries are more lax than is desired,
    or than the MAKEDEV defaults in 4.x.  These need to be carefully
    reviewed and fixed.</td>
  </tr>

  <tr>
  <td>Race conditions in truss</td>
  <td>Debugging and fixing in progress</td>
  <td>robert@FreeBSD.org</td>
  <td>Truss appears to contain a race condition during the start-up of
    debugging, which can result in truss failing to attach to the process
    before it exits.  The symptom is that truss reports that it cannot
    open the procfs node supporting the process being debugged.  A bug
    also appears to exist where in truss will hang if execve() returns
    ENOENT.  A further race appears to exist in which truss will return
    "PIOCWAIT: Input/output error" occasionally on startup.</td>
  </tr>

  <tr>
  <td>Many reported problems with disklabel -e</td>
  <td>--</td>
  <td>phk@FreeBSD.org</td>
  <td>Changes in the disk label format have resulted in substantial
    numbers of bug reports; these must be resolved by RC1.  The problem
    involving a cache coherency issue relating to partition resizes
    has now been resolved, but reports of any additional problems would
    be appreciated.</td>
  </tr>

  <tr>
  <td>Reported problems with fdisk disk editor</td>
  <td>--</td>
  <td>--</td>
  <td>Reported problems deleting NTFS slices using the sysinstall fdisk
    editor.</td>
  </tr>

  <tr>
  <td>inpcb panic involving IP stack sleep</td>
  <td>--</td>
  <td>--</td>
  <td>Report of a panic in the TCP syncache thread under load, due to
    another thread sleeping while holding an inpcb mutex, when not
    running with WITNESS (WITNESS would have caught the sleep earlier).
    </td>
  </tr>

  <tr>
  <td>mly driver hangs during install</td>
  <td>--</td>
  <td>scottl@FreeBSD.org</td>
  <td>Hangs have been reported during the 5.0 snapshot install when
    installing to mly supported RAID arrays.  The same array appears
    to work fine with 4.7-RELEASE.  The card in question is a Mylex
    AcceleRAID 170, 32 Mb RAM, Firmware revision 7.01-00.  This is
    believed to be the same problem as described in PR 45383.</td>
  </tr>

  <tr>
  <td>iir driver fails to probe disks</td>
  <td>--</td>
  <td>--</td>
  <td>During the install, the iir controller appears to correctly
    probe, but finds no disk devices.  The card in question is an
    Intel srcu32 RAID controller with 32Mb RAM, Firmware revision
    2.33.01</td>
  </tr>

  <tr>
  <td>Need to disable rare ISA drivers via hints</td>
  <td>--</td>
  <td>jhb@FreeBSD.org</td>
  <td>ISA driver probes for rare drivers can be disruptive, and should
    be disabled.</td>
  </tr>

</table>

<h3>Must Resolve Issues for 5.0-RELEASE</h3>

<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr><td>5.0 Documentation</td><td>--</td><td>freebsd-doc</td>

  <td>As a minimum, we need to cover the areas where 5.x and 4.x
    differ in the FAQ and Handbook.  This entails marking some areas
    with "This procedure is specific to 4.X.  For more information for
    5.x, please see foo(n)" or similar.  This needs to happen quickly,
    to give adequate time for the translation teams to catch up.</td>
  </tr>

  <tr>
  <td>Disable performance penalizing debug options</td>
  <td>Pending RC1</td>
  <td>re@</td>
  <td>A number of performance-penalizing debug options are turned on
    by default in 5.0-CURRENT.  These include user malloc debugging
    flags, WITNESS, INVARIANTS, DEBUG=-g, and others.  These must be
    turned off as we approach the release.</td>
  </tr>

  <tr>
  <td>Disable verbose debug options</td>
  <td>Pending RC2</td>
  <td>re@</td>
  <td>By default, ACPI generates verbose bus dumps during initial
    boot even if verbose it turned off.  Libdisk also includes
    the DEBUG define by default, resulting in additional output.
    This output needs to be turned down following RC2.</td>
  </tr>

  <tr><td>devd</td><td>Prototype committed.</td>
    <td>imp@FreeBSD.org</td><td>A devd prototype has been committed;
    will mature as we approach the 5.0 release, including adopting
    a mature configuration format.</td></tr>

  <tr>
  <td>TrustedBSD MAC Framework userland applications</td>
    <td>Mostly merged, some minor updates pending</td>
    <td>rwatson@FreeBSD.org</td>
    <td>Most MAC support for user applications and daemons has been
      merged.  Minor updates to support recursive file labeling,
      correct labeling in inetd, and a few other bits and pieces is
      pending.</td>
  </tr>

  <tr>
  <td>TrustedBSD MAC Framework documentation</td>
    <td>FreeBSD documentation CVS HEAD: in progress</td>
    <td>chris@FreeBSD.org</td><td>User and developer documentation of
      the new extensible security framework.  Includes guides for live
      deployment, development of policy modules, and implementation
      information.</td>
  </tr>

  <tr>
  <td>Port of LOMAC to TrustedBSD MAC Framework</td>
    <td>Perforce trustedbsd_mac: in progress</td>
    <td>green@FreeBSD.org</td>
    <td>Re-implementation of LOMAC to plug in via the MAC framework,
      making it easier to deploy and support, as well as removing
      code duplication in the LOMAC tree to improve maintenance cost.</td>
  </tr>

  <tr>
  <td>gdb for sparc64</td>
    <td>--</td>
    <td>tmm@FreeBSD.org</td>
    <td>gdb 5.3 now works with sparc64; gdb import required.</td>
  </tr>

  <tr>
  <td>UFS2 bootable on i386</td>
    <td>In progress.  We might want to miss on this one.</td>
    <td>phk@FreeBSD.org</td>
    <td>UFS2 can be successfully booted on sparc64, but on i386
      boot2 cannot fit in the space reserved in front of a UFS1 filesystem.
      disklabel, libdisk, sysinstall and newfs needs to learn about this
      wrinkle, and we need some makefile magic to build both UFS1 and
      UFS1/2 boot2 boot files.
      The potential for foot-shooting is very large, and phk@ currently
      leans towards defaulting to UFS1 for root and boot, and UFS2 for
      all other filesystems.
    </td>
  </tr>

  <tr>
  <td>ACPI support for multiple host-pci bridge adapters</td>
    <td>patches being circulated</td>
    <td>jhb@FreeBSD.org</td>
    <td>There appear to be problems with BIOS's incorrectly identifying
      host-pci bridge adpaters.  These must be resolved before 5.0.</td>
  </tr>

  <tr>
  <td>KerberosV, OpenSSH, and PAM</td>
    <td>In progress</td>
    <td>markm@FreeBSD.org, nectar@FreeBSD.org</td>
    <td>KerberosV appears not to currently work with OpenSSH using PAM.
      Bugs relating to pam_kerberosV have in large part been fixed.</td>
  </tr>

  <tr>
    <td>FireWire Support</td><td>In progress</td><td>??</td>
    <td>Firewire kernel support has been committed.  Userland support is
      pending.  Large quantities of debugging output are reported;
      may require an "experimental feature tag" for the release notes?</td>
  </tr>

  <tr>
    <td>Proc Locking</td><td>Patches available in Perforce</td>
    <td>jhb@FreeBSD.org</td><td>Further locking cleanups relating to
      p_ucred.</td>
  </tr>

  <tr>
    <td>awk(1) locale support</td>
    <td>patches being circulated</td>
    <td>ru@FreeBSD.org</td>
    <td>awk(1) should be fixed to respect locale</td>
  </tr>

  <tr>
    <td>smbfs may be broken</td>
    <td>--</td>
    <td>--</td>
    <td>There are reports that smbfs may not be working with
      recent 5.0-CURRENT snapshots.  The symptoms appear to be that
      smbfs will mount, but reads return an error, and writes result
      in 0-byte files.  Testing of smbfs is encouraged, and claiming of
      this trouble item if problems are found is likewise encouraged.</td>
  </tr>

  <tr>
    <td>No console (term) if smbus is enable in the kernel</td>
    <td>--</td>
    <td>--</td>
    <td>There are reports that kernels build with smbus, viapm, and smb
      devices may not properly probe and support the system console
      following boot.</td>
  </tr>

</table>

<h3>Desired Features for 5.0-RELEASE</h3>

<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr>
    <td width="30%">User documentation for ACPI.</td>
    <td width="10%">--</td>
    <td width="10%">freebsd-doc@FreeBSD.org</td>

    <td>The new ACPI code is a very important component of FreeBSD
    5.0-RELEASE, but the documentation is insufficient.  The manual
    page does not describe how to perform the basic ACPI tasks.  The
    Usenix paper, man pages, and mailing list archives should be used
    to write a substantial new section to the FreeBSD Handbook.  New
    users read the Handbook.  See <a href="http://www.freebsd.org/cgi/query-pr.cgi?pr=43528">PR 43528</a>.</td>
  </tr>

  <tr>
  <td>freebsd-games</td>
  <td>--</td>
  <td>markm@FreeBSD.org</td>
  <td>A number of games were stripped from the base system: they should
    be made into a port.</td>
  </tr>

  <tr>
  <td>a.out toolchain port</td>
  <td>--</td>
  <td>--</td>
  <td>A.out support in the base system was reduced; the removed build
    chain components should be made into a port.</td>
  </tr>

  <tr>
  <td>Rename of local -> unix in rpc socket names</td>
  <td>--</td>
  <td>mbr@FreeBSD.org</td>
  <td>mbr has requested that we change from using "local" to "unix"
    for tirpc unix domain socket transport naming, to sync to NetBSD.</td>
  </tr>

  <tr>
  <td>OpenSSH reports lastlog warning</td>
  <td>--</td>
  <td>des@FreeBSD.org</td>
  <td>OpenSSH appears to invoke the PAM session code in the wrong process
    when running with privsep, resulting in warnings of the form
    "Nov 20 18:08:55 u60 sshd[2002]: /var/log/lastlog: Permission denied".
    This may be a bug that requires reworking OpenSSH to work properly
    with PAM, but should be resolved in some form for the release.</td>
  </tr>

  <tr>
  <td>NETNCP and nwfs broken</td>
  <td>--</td>
  <td>--</td>
  <td>NETNCP and nwfs appear to be as-yet unadapted for KSE, and hence
    not working.  The build needs fixing (probably not all that hard)
    and then it needs to be tested (harder: few people appear to have
    Netware servers).</td>
  </tr>

</table>

    &footer;

  </body>
</html>
