<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" [
<!ENTITY base CDATA "../..">
<!ENTITY email 'freebsd-qa'>
<!ENTITY date "$FreeBSD: www/en/releases/5.0R/todo.sgml,v 1.116 2002/12/19 01:40:41 rwatson Exp $">
<!ENTITY title "FreeBSD 5.0 Open Issues">
<!ENTITY % includes SYSTEM "../../includes.sgml"> %includes;
<!ENTITY % developers SYSTEM "../../developers.sgml"> %developers;
]>

<html>
&header;

<h1>Open Issues</h1>

<p>This is a list of open issues that need to be resolved for FreeBSD
  5.0.  If you have any updates for this list, please e-mail
  re@FreeBSD.org.</p>


<h3>Must Resolve Issues for 5.0-RC3</h3>
<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr>
  <td>Many reported problems with disklabel -e</td>
  <td>--</td>
  <td>&a.phk;, &a.jhb;</td>
  <td>Changes in the disk label format have resulted in substantial
    numbers of bug reports; these must be resolved by RC1.  The problem
    involving a cache coherency issue relating to partition resizes
    has now been resolved.  Problems relating to disklabel -r and
    the change appear to continue.</td>
  </tr>

  <tr>
  <td>Audit of devfs device permissions</td>
  <td>In progress</td>
  <td>&a.kris;,&a.rwatson;</td>
  <td>With the move to devfs, the permissions specified in kernel device
    creation lines using make_dev() are now used as the default permissions
    for /dev entries.  Some of these entries are more lax than is desired,
    or than the MAKEDEV defaults in 4.x.  These need to be carefully
    reviewed and fixed.</td>
  </tr>

  <tr>
  <td>mly driver hangs during install</td>
  <td>--</td>
  <td>&a.scottl;, &a.jeff;</td>
  <td>Hangs have been reported during the 5.0 snapshot install when
    installing to mly supported RAID arrays.  The same array appears
    to work fine with 4.7-RELEASE.  The card in question is a Mylex
    AcceleRAID 170, 32 Mb RAM, Firmware revision 7.01-00.  This is
    believed to be the same problem as described in PR 45383.</td>
  </tr>

  <tr>
  <td>TrustedBSD MAC Framework userland applications</td>
    <td>Mostly merged, some minor updates pending</td>
    <td>&a.rwatson;</td>
    <td>Most MAC support for user applications and daemons has been
      merged.  Minor updates to support correct labeling in inetd,
      optional labeling of ttys, and a few other bits and pieces are
      pending.</td>
  </tr>

  <tr>
  <td>Port of LOMAC to TrustedBSD MAC Framework</td>
    <td>Merge in progress</td>
    <td>&a.green;,&a.rwatson;</td>
    <td>New mac_lomac implementation almost completely merged:
      currently missing is the documentation.</td>
  </tr>

  <tr><td>devd</td><td>Prototype committed.</td>
    <td>&a.imp;</td><td>A devd prototype has been committed;
    will mature as we approach the 5.0 release, including adopting
    a mature configuration format.</td>
  </tr>

  <tr>
  <td>KerberosV, OpenSSH, and PAM</td>
    <td>In progress</td>
    <td>&a.markm;, &a.des;, &a.nectar;</td>
    <td>KerberosV appears not to currently work with OpenSSH using PAM.
      Bugs relating to pam_krb5 have in large part been fixed.</td>
  </tr>

  <tr>
    <td>Update Handbook for 5.0 installation</td>
    <td>In progress</td>
    <td>&a.trhodes;</td>
    <td>The handbook largely describes a 4.x installation, and doesn't
      mention the driver floppy or other recent events.  Likewise,
      it probably hasn't been updated for label editor changes.  It also
      probably talks about the in-kernel ISA configuration editor, which
      is no longer present.  It should talk about ACPI more.  Also,
      the recommended minimum / size should be increased to 128Mb.
      The handbook should be updated once sysinstall has stabilized,
      which it should have after RC1.</td>
  </tr>

  <tr>
    <td>Further removal of performance degrading debug options</td>
    <td>In progress</td>
    <td>re</td>
    <td>Need to set <code>malloc_junk</code> to 0 in libc.  Also need to
      investigate the use of the <code>-D_LOCK_DEBUG</code> and
      <code>-D_PTHREADS_INVARIANTS</code> compile flags in libc_r.</td>
  </tr>

</table>

<h3>Must Resolve Issues for 5.0-RELEASE</h3>

<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr><td>5.0 Documentation</td><td>--</td><td>freebsd-doc</td>

  <td>As a minimum, we need to cover the areas where 5.x and 4.x
    differ in the FAQ and Handbook.  This entails marking some areas
    with "This procedure is specific to 4.X.  For more information for
    5.x, please see foo(n)" or similar.  This needs to happen quickly,
    to give adequate time for the translation teams to catch up.</td>
  </tr>

  <tr>
  <td>TrustedBSD MAC Framework documentation</td>
    <td>FreeBSD documentation CVS HEAD: in progress</td>
    <td>&a.chris;</td><td>User and developer documentation of
      the new extensible security framework.  Includes guides for live
      deployment, development of policy modules, and implementation
      information.</td>
  </tr>

  <tr>
  <td>UFS2 bootable on i386</td>
    <td>Patch committed to HEAD; merge pending testing.</td>
    <td>&a.phk;</td>
    <td>Support for booting UFS2 on non-64-bit platforms required an
      increase in the size of the boot blocks due to the size of the
      emulated 64-bit arithmetic instructions.  In later revisions
      of the boot code, we've managed to reduce that size, but as of
      RC2, those changes had not been merged to the release branch.
      As a result, in RC1 and RC2, UFS2 may only be used for non-root
      file systems, not the root file system on 32-bit platforms.  On
      64-bit platforms, no such limit exists.  We're currently
      exploring merging the changes to the boot block to support UFS2
      as the boot file system on all platforms.
    </td>
  </tr>

</table>

<h3>Desired Features for 5.0-RELEASE</h3>

<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr>
    <td width="30%">User documentation for ACPI.</td>
    <td width="10%">In progress</td>
    <td width="10%">&a.trhodes;</td>

    <td>The new ACPI code is a very important component of FreeBSD
    5.0-RELEASE, but the documentation is insufficient.  The manual
    page does not describe how to perform the basic ACPI tasks.  The
    Usenix paper, man pages, and mailing list archives should be used
    to write a substantial new section to the FreeBSD Handbook.  New
    users read the Handbook.  See <a href="http://www.freebsd.org/cgi/query-pr.cgi?pr=43528">PR 43528</a>.</td>
  </tr>

  <tr>
  <td>a.out toolchain port</td>
  <td>--</td>
  <td>--</td>
  <td>A.out support in the base system was reduced; the removed build
    chain components should be made into a port.</td>
  </tr>

  <tr>
  <td>Rename of local -> unix in rpc socket names</td>
  <td>Patches committed to HEAD; merge pending testing and review</td>
  <td>&a.mbr;</td>
  <td>mbr has requested that we change from using "local" to "unix"
    for tirpc unix domain socket transport naming, to sync to NetBSD.</td>
  </tr>

  <tr>
  <td>NETNCP and nwfs broken</td>
  <td>--</td>
  <td>--</td>
  <td>NETNCP and nwfs appear to be as-yet unadapted for KSE, and hence
    not working.  The build needs fixing (probably not all that hard)
    and then it needs to be tested (harder: few people appear to have
    Netware servers).</td>
  </tr>

  <tr>
  <td>No docs for FAST IPSEC</td>
  <td>--</td>
  <td>--</td>
  <td>The new "fast ipsec" implementation has insufficient documentation
    (man pages, release notes), and this would be highly desirable to
    have before 5.0-RELEASE.</td>
  </tr>

  <tr>
  <td>live file system boot0cfg</td>
  <td>--</td>
  <td>--</td>
  <td>boot0cfg -s on a live file system now no longer functions.  It
    would be highly desirable for this, and related functionality, to
    work.</td>
  </tr>

  <tr>
  <td>Race conditions in truss</td>
  <td>Debugging and fixing in progress</td>
  <td>&a.robert;</td>
  <td>Truss appears to contain a race condition during the start-up of
    debugging, which can result in truss failing to attach to the process
    before it exits.  The symptom is that truss reports that it cannot
    open the procfs node supporting the process being debugged.  A bug
    also appears to exist where in truss will hang if execve() returns
    ENOENT.  A further race appears to exist in which truss will return
    "PIOCWAIT: Input/output error" occasionally on startup.</td>
  </tr>

  <tr>
  <td>Documentation rottage: S/Key</td>
  <td>--</td>
  <td>--</td>
  <td>We now use OPIE instead of S/Key.  The handbook doesn't know
    that yet.</td>
  </tr>

  <tr>
  <td>Documentation wanted: gdbe</td>
  <td>--</td>
  <td>&.chris;</td>
  <td>5.0 includes GDBE, supporting encryption of swap and storage.
    It would be nice if that was documented in the handbook.</td>
  </tr>

  <tr>
  <td>iir driver fails to probe disks</td>
  <td>--</td>
  <td>--</td>
  <td>During the install, the iir controller appears to correctly
    probe, but finds no disk devices.  The card in question is an
    Intel srcu32 RAID controller with 32Mb RAM, Firmware revision
    2.33.01</td>
  </tr>

</table>

<h3>Areas requiring immediate testing due to 5.0 changes</h3>

<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr>
  <td>if_ie, if_le, if_wl network device drivers</td>
  <td>--</td>
  <td>&a.sam;</td>
  <td>Changes made to the ethernet driver interfaces required sweeping
    API changes across all ethernet device drivers.  While these
    changes are largely mechanical, they were not tested for three less
    frequently used interface drivers: if_ie, if_le, and if_wl.  They
    each require testing (and probably fixing) prior to 5.0-RELEASE.
    If you have access to devices that use these drivers, please perform
    local testing and provide feedback to Sam Leffler.</td>
  </tr>

  <tr>
    <td>No console (term) if smbus is enable in the kernel</td>
    <td>--</td>
    <td>--</td>
    <td>There are reports that kernels build with smbus, viapm, and smb
      devices may not properly probe and support the system console
      following boot.</td>
  </tr>

  <tr>
  <td>inpcb panic involving IP stack sleep</td>
  <td>--</td>
  <td>--</td>
  <td>Report of a panic in the TCP syncache thread under load, due to
    another thread sleeping while holding an inpcb mutex, when not
    running with WITNESS (WITNESS would have caught the sleep earlier).
    </td>
  </tr>

</table>

<h3>Known Issues with 5.0R-RC1 / i386</h3>
<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr>
    <td>KDE does not install from ISO</td>
    <td>In Progress</td>
    <td>&a.murray;</td>
    <td>The kde meta-package is not included on the ISO, but many of
      the component kde packages are, so sysinstall gets confused and
      installs kde-icontheme instead (more correct behavior would be to
      fall back to kdebase if kde package is not present).</td>
  </tr>

  <tr>
    <td>sparc64 and alpha RC1 ISO images did not include Perl package</td>
    <td>In progress</td>
    <td>&a.jhb;</td>
    <td>Perl packages were accidentally excluded from the RC1 ISOs for
      the sparc64 and alpha platforms.  This will result in whining from
      the installation, but the install will succeed.  Perl may then be
      manually installed from the FTP repository.</td>
  </tr>

</table>
    &footer;

  </body>
</html>
