<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" [
<!ENTITY base CDATA "../..">
<!ENTITY email 'freebsd-qa'>
<!ENTITY date "$FreeBSD: www/en/releases/5.1R/todo.sgml,v 1.50 2003/05/16 21:19:43 rwatson Exp $">
<!ENTITY title "FreeBSD 5.1 Open Issues">
<!ENTITY % includes SYSTEM "../../includes.sgml"> %includes;
<!ENTITY % developers SYSTEM "../../developers.sgml"> %developers;
]>

<html>
&header;

<h1>Open Issues</h1>

<p>This is a list of open issues that need to be resolved for FreeBSD
  5.1.  If you have any updates for this list, please e-mail
  re@FreeBSD.org.</p>

<h3>Must Resolve Issues for 5.1-RELEASE</h3>

<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr>
  <td>ipfw/ipfw2 alignment issues on alpha/sparc64</td>
  <td>In progress</td>
  <td>&a.luigi;</td>
  <td>There are reports of alignment problems with ipfw and/or ipfw2
    on 64-bit platforms (specifically alpha and sparc64).</td>
  </tr>

  <tr>
  <td>ia64 stability</td>
  <td>--</td>
  <td>--</td>
  <td>&a.kris; reports high instability of 5.0-CURRENT on ia64
    machines, such as the pluto* machines.  These problems need to be
    fixed in order to get a successful package build.</td>
  </tr>

  <tr>
    <td>MAC Framework devfs path fixes</td>
    <td>In progress</td>
    <td>&a.rwatson;</td>
    <td>&a.green; has submitted patches to improve the consistency
      of the pathnames passed into the MAC Framework devfs labeling
      entry points.  These patches need to be thoroughly reviewed
      and tested, then merged.</td>
  </tr>

  <tr>
    <td>Panic on load/unload a kernel module for a driver already
      statically linked into the kernel.</td>
    <td>Patch submitted</td>
    <td>&a.mux;</td>
    <td>If a network device driver, possibly any driver, is linked
      into the kernel and then loaded and unloaded as a module,
      the kernel will panic.  This has been observed with both
      if_dc and if_fxp.</td>
  </tr>

  <tr>
    <td>KSE support for sparc64, alpha, ia64</td>
    <td>--</td>
    <td>&a.jake;, --, --</td>
    <td>Currently, the MD elements of KSE are present only for the i386
      platform, limiting use of KSE to the i386 platform.  It is highly
      desirable to make KSE available on non-i386 platforms for
      5.1-RELEASE so that KSE can see more broad exposure, and the
      performance benefits of KSE can be visible to users of the
      64-bit FreeBSD architectures.</td>
  </tr>

  <tr>
    <td>rtld-elf thread-safety</td>
    <td>--</td>
    <td>&a.kan;</td>
    <td>Update the run-time link editor (rtld) thread-safe with
      libpthread.</td>
  </tr>

  <tr>
    <td>rpc.lockd(8) stability</td>
    <td>In progress</td>
    <td>&a.rwatson;</td>
    <td>rpc.lockd(8) client-side and server-side NFS locking appears to
      have a number of serious bugs which prevent NFS locking from working
      properly in a number of common scenarios.  These bugs must be
      resolved to ship 5.1-RELEASE.  Work is underway to classify and
      track the bugs.</td>
  </tr>

  <tr>
    <td>data corruption reports</td>
    <td>In progress</td>
    <td>&a.peter;, &a.bmilekic;</td>
    <td>There have been reports of memory/data corruption on some systems;
      one working hypothesis is that this corresponds to an undocumented
      bug in a particular line of Intel and AMD processors, but it's
      unclear whether current work-arounds are correcting or masking the
      problem.  Patches are being circulated to test this hypothesis,
      but developers are encouraged to be on the lookout for possible
      data corruption bugs.</td>
  </tr>

</table>

<h3>Desired Features for 5.1-RELEASE</h3>

<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr>
    <td>ia64 sio support</td>
    <td>In progress</td>
    <td>&a.marcel;, &a.imp;</td>
    <td>ia64 serial console support is reported to not be functional
      on HP Itanium2 platforms.  A reworking of the sio driver to
      improve platform independence and bus handling is likely needed.</td>
  </tr>

  <tr>
  <td>a.out toolchain port</td>
  <td>--</td>
  <td>--</td>
  <td>A.out support in the base system was reduced; the removed build
    chain components should be made into a port.</td>
  </tr>

  <tr>
  <td>Race conditions in truss</td>
  <td>Errata candidate</td>
  <td>&a.robert;</td>
  <td>Truss appears to contain a race condition during the start-up of
    debugging, which can result in truss failing to attach to the process
    before it exits.  The symptom is that truss reports that it cannot
    open the procfs node supporting the process being debugged.  A bug
    also appears to exist where in truss will hang if execve() returns
    ENOENT.  A further race appears to exist in which truss will return
    "PIOCWAIT: Input/output error" occasionally on startup.  The fix
    for this sufficiently changes process execution handling that we
    will defer the fix to post-5.0 and consider this errata.</td>
  </tr>

  <tr>
  <td>nullfs deadlocks</td>
  <td>--</td>
  <td>--</td>
  <td>&a.kris; reports deadlocks involving the use of nullfs in the bento
    environment: buildworld -j4 with src and obj mounted via nullfs; the gcc
    processes eventually deadlocked in the ufs state.  DDB traceback
    showed two different codepaths.  I've just repeated this, so the bug
    still exists.</td>
  </tr>

  <tr>
    <td>amd/mountd bugs</td>
    <td>In progress</td>
    <td>&a.mbr;</td>
    <td>If amd(8) does mount more than one fs from a host, the second call
      to mountd on the server gets aborted even if the read does return
      EAGAIN. This is definitly a bug in the nonblocking rpc code. If truss
      or ktrace is attached on mountd, the bug happens almost all times,
      else 3-10 times of 10 trys.  Since there have been several reports
      of amd irregularity on 5.1-BETA, it's important to get this fixed
      for the release.</td>
  </tr>

  <tr>
    <td>gdb -k doesn't work on alpha</td>
    <td>--</td>
    <td>&a.mp;</td>
    <td>gdb -k doesn't work on alpha</td>
  </tr>

</table>

<h3>Documentation items that must be resolved for 5.1</h3>

<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr>
  <td>Documentation rottage: S/Key</td>
  <td>In progress</td>
  <td>&a.brueffer;</td>
  <td>We now use OPIE instead of S/Key.  The handbook doesn't cover
    OPIE as well as it covers S/Key.</td>
  </tr>

  <tr>
  <td>ia64 Hardware Notes</td>
  <td>--</td>
  <td>--</td>
  <td>The hardware notes for ia64 needs some large infusions of text.
    They probably haven't been synched with reality for awhile.</td>
  </tr>

  <tr>
    <td>busdma man page</td>
    <td>In progress</td>
    <td>&a.hmp;</td>
    <td>As BUSDMA is now the required driver API for DMA access in
      hardware device drivers as of 5.1-RELEASE, we need to make sure
      it's properly documented.  A man page is in progress and needs
      to be appropriately reviewed and committed prior to the release.</td>
  </tr>

  <tr>
    <td>rcNG documentation</td>
    <td>In progress</td>
    <td>&a.trhodes;</td>
    <td>rcNG is now the supported (and only) boot scripting mechanism
      in 5.x, but it's not currently documented in the handbook.  We
      need this documentation for 5.1-RELEASE.</td>
  </tr>

</table>

<h3>Areas requiring immediate testing</h3>

<table border=1 width="100%">
  <tr><th>Issue</th><th>Status</th><th>Responsible</th><th>Description</th>
      </tr>

  <tr>
  <td>Fresh ACPI-CA import</td>
  <td>--</td>
  <td>--</td>
  <td>The 20030228 vendor sources have been imported.  Further testing is
    appreciated.</td>
  </tr>

  <tr>
  <td>PAE support for i386</td>
  <td>--</td>
  <td>--</td>
  <td>PAE support allows the use of up to 64GB of RAM on Pentium Pro and above
    systems.  Virtual addresses are still constrained to 32-bits.</td>
  </tr>

  <tr>
  <td>if_wi problems on Lucent hardware</td>
  <td>--</td>
  <td>--</td>
  <td>The recently upgraded if_wi driver is more tuned to Prism hardware
    than to Lucent hardware, resulting in system lockups and poor performance
    when using Lucent hardware.  These problems are believed to be fixed
    but more testing is welcome.</td>
  </tr>
  
  <tr>
  <td>UFS2 as installation, newfs default</td>
  <td>--</td>
  <td>&a.rwatson;</td>
  <td>For 5.1-RELEASE, the default file system type for newly created
    file systems is UFS2 rather than UFS1.  newfs(8) and sysinstall(8)
    have been updated to use this new default.  Testing to make sure all
    goes well after the change (committed on April 20, 2003) is
    vital.</td>
  </tr>

  <tr>
  <td>NSSwitch support</td>
  <td>--</td>
  <td>&a.nectar;</td>
  <td>Support for pluggable directory services using NSS, including
    adaptations of current directory services (local databases, NIS),
    and support for new services (LDAP, Active Directory, etc).
    This change has been committed, and requires broader testing.</td>
  </tr>

  <tr>
  <td>Spurious alpha panics</td>
  <td>--</td>
  <td>--</td>
  <td>&a.kris; reports that he has seen several unique panics on the
    alpha machines, but since gdb -k doesn't work on alpha I haven't
    been able to get more than a DDB traceback.  No-one has looked
    into them.</td>
  </tr>

</table>

    &footer;

  </body>
</html>
