<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" [
<!ENTITY base CDATA "../..">
<!ENTITY email 'freebsd-qa'>
<!ENTITY date "$FreeBSD: www/en/releases/6.1R/todo.sgml,v 1.1 2006/01/25 23:58:36 murray Exp $">
<!ENTITY local.rel "6.1">
<!ENTITY title "FreeBSD 6.1 Open Issues">
<!ENTITY % navincludes SYSTEM "../../includes.navdownload.sgml"> %navincludes;
<!ENTITY % includes SYSTEM "../../includes.sgml"> %includes;
<!ENTITY % developers SYSTEM "../../developers.sgml"> %developers;
<!-- Status levels -->
<!ENTITY status.na "<font color=green>N/A</font>">
<!ENTITY status.done "<font color=green>Done</font>">
<!ENTITY status.wip "<font color=blue>In&nbsp;progress</font>">
<!ENTITY status.untested "<font color=orange>Needs&nbsp;testing</font>">
<!ENTITY status.new "<font color=red>Not&nbsp;done</font>">
<!ENTITY status.unknown "<font color=red>Unknown</font>">
<!ENTITY status.deferred "<font color=gray>Deferred for future release</font>">

<!ENTITY url.cvsweb "http://www.freebsd.org/cgi/cvsweb.cgi">
<!ENTITY url.mid "http://docs.freebsd.org/cgi/mid.cgi?">
<!ENTITY url.pr "http://www.freebsd.org/cgi/query-pr.cgi?">

<!ENTITY stresstest SYSTEM "./stress.html">
]>

<!--

  Changes to this list MUST NOT be committed without approval of
  Release Engineering Team (re@FreeBSD.org) (for general items) or
  Documentation Engineering Team (doceng@FreeBSD.org) (for doc-related
  items).

-->

<html>
&header;

<p>This is a list of open issues that need to be resolved for FreeBSD
  &local.rel;.  If you have any updates for this list, please e-mail
  re@FreeBSD.org.</p>

<ul>
  <li><a href="#showstopper">Show stopper defects</a></li>
  <li><a href="#required">Required features</a></li>
  <li><a href="#desired">Desired features</a></li>
  <li><a href="#docs">Documentation Items</a></li>
  <li><a href="#testing">Testing foci</a></li>
  <li><a href="#stresstest">Problems Discovered by Kernel Stress Test Suite</a></li>
</ul>
  
<h3>Show stopper defects for &local.rel;-RELEASE</h3>

<a name="showstopper"></a>
<table class="tblbasic">
  <tr class="heading">
    <th>Issue</th>
    <th>Status</th>
    <th>Responsible</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>umount -f panics</td>
    <td>&status.wip;</td>
    <td>jeffr, ssouhlal</td>
    <td>panics from race conditions.</td>
  </tr>

  <tr>
    <td>UFS deadlocks on amd64</td>
    <td>&status.unknown;</td>
    <td>tegge</td>
    <td>Seen by Kris Kennaway and Peter Jeremy.</td>
  </tr>

  <tr>
    <td>amd64 panics in ipv6 with date(1)</td>
    <td>&status.unknown;</td>
    <td></td>
    <td>amd64 panics in ipv6 when the date is changed using date(1) or
	ntpdate(1).  This may be a MI issue.</td>
  </tr>

  <tr>
    <td>dhclient causes ipv6 panics.</td>
    <td>&status.unknown;</td>
    <td></td>
    <td>dougb has more details about this.</td>
  </tr>

  <tr>
    <td>sparc64 instability.</td>
    <td>&status.unknown;</td>
    <td></td>
    <td>Outstanding recurrent issues include:<pre>
panic: uma_small_alloc: free page still has mappings!
cpuid = 0
KDB: enter: panic
[thread pid 9124 tid 100318 ]
Stopped at      kdb_enter+0x3c: ta              %xcc, 1
db> wh
Tracing pid 9124 tid 100318 td 0xfffff800f6fb2720
panic() at panic+0x164
uma_small_alloc() at uma_small_alloc+0x9c
slab_zalloc() at slab_zalloc+0x98
uma_zone_slab() at uma_zone_slab+0x12c
uma_zalloc_bucket() at uma_zalloc_bucket+0x16c
uma_zalloc_arg() at uma_zalloc_arg+0x374
malloc() at malloc+0x114
allocbuf() at allocbuf+0x208
getblk() at getblk+0x598
breadn() at breadn+0x58
bread() at bread+0x20
ffs_blkatoff() at ffs_blkatoff+0x64
ufs_direnter() at ufs_direnter+0x444
ufs_makeinode() at ufs_makeinode+0x460
ufs_create() at ufs_create+0x30
VOP_CREATE_APV() at VOP_CREATE_APV+0xb4
vn_open_cred() at vn_open_cred+0x188
vn_open() at vn_open+0x18
kern_open() at kern_open+0x8c
pen() at open+0x14
syscall() at syscall+0x2dc
-- syscall (5, FreeBSD ELF64, open) %o7=0x4034d5b8 --

panic: trap: data access error
cpuid = 1
KDB: enter: panic
[thread pid 2724 tid 100224 ]
Stopped at      kdb_enter+0x3c: ta              %xcc, 1
db> wh
Tracing pid 2724 tid 100224 td 0xfffff8004e55a720
panic() at panic+0x16c
trap() at trap+0x3f0
-- data access error %o7=0xc017392c --
copyout() at copyout+0xb0
memrw() at memrw+0x2a8
devfs_read_f() at devfs_read_f+0x9c
dofileread() at dofileread+0xa4
read() at read+0x38
syscall() at syscall+0x2d4
-- syscall (3, FreeBSD ELF64, read) %o7=0x40339328 --

(this one needs a port of

1.117     +57 -33    src/sys/i386/i386/mem.c

which marius is working on)</pre>
    </td>
  </tr>

  <tr>
    <td>dhclient causes ipv6 panics.</td>
    <td>&status.unknown;</td>
    <td></td>
    <td>dougb has more details about this.</td>
  </tr>

  <tr>
    <td>sparc64 frequent hangs</td>
    <td>&status.unknown;</td>
    <td></td>
    <td>no DDB break possible, so impossible to diagnose</td>
  </tr>

  <tr>
    <td>serious sparc64 IPv6 panic</td>
    <td>&status.unknown;</td>
    <td></td>
    <td>Triggered by just ping6'ing the box.  gnn keeps promising to
      look at this but hasn't found it yet.  It may even be a MI
      issue, the reporter of this bug only uses IPv6 with
      sparc64.</td>
  </tr>

</table>

<h3>Required features for &local.rel;-RELEASE</h3>

<a name="required"></a>
<table class="tblbasic">
  <tr class="heading">
    <th>Issue</th>
    <th>Status</th>
    <th>Responsible</th>
    <th>Description</th>
  </tr>

</table>

<h3>Desired features for &local.rel;-RELEASE</h3>

<a name="desired"></a>
<table class="tblbasic">
  <tr class="heading">
    <th>Issue</th>
    <th>Status</th>
    <th>Responsible</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>updated hal and ath drivers</td>
    <td>&status.new;</td>
    <td>sam</td>
    <td></td>
  </tr>

  <tr>
    <td>fix ntpdate(1) bogus output on amd64.</td>
    <td>&status.unknown;</td>
    <td>roberto</td>
    <td></td>
  </tr>

  <tr>
    <td>improve sparc64 performance</td>
    <td>&status.unknown;</td>
    <td></td>
    <td>What seem to be 4BSD scheduler bugs in 6.0 that
      cause performance to be anomalously low in certain situations.
      davidxu has expressed some interest in this problem.</td>
  </tr>

  <tr>
    <td>devfs umount panic</td>
    <td>&status.new;</td>
    <td>&nbsp;</td>
    <td>There is a race condition between device removal and devfs
      umounts that causes "Memory modified after free" panics.  Can
      be reproduced by doing 'mdconfig -u' concurrently with unmounting
      a devfs instance.</td>
  </tr>

  <tr>
    <td>/dev/kmem panic</td>
    <td>&status.new;</td>
    <td>&nbsp;</td>
    <td>Kris has noticed panics on SMP machines when there was ABI
      breakage of libkvm and world was not rebuilt and utilities like
      fstat were used.  This suggests panics can be caused by incorrect
      accesses to /dev/kmem.</td>
  </tr>

  <tr>
    <td>KLDs on sparc64</td>
    <td>&status.new;</td>
    <td>&nbsp;</td>
    <td>On sparc64 machines with more than 4Gb memory KLDs are not usable
      and will panic the system.  The problem is reportedly with how the
      KLDs are compiled, it only works if the code ends up below 4G.</td>
  </tr>

  <tr>
    <td>Max RAM on sparc64</td>
    <td>&status.new;</td>
    <td>&nbsp;</td>
    <td>Maximum RAM on sparc64 appears to be limited to 16Gb.</td>
  </tr>

  <tr>
    <td>make -jN</td>
    <td>&status.new;</td>
    <td>&nbsp;</td>
    <td>Doing 'make -jN', then suspending/resuming it may result in make
      reporting it lost child process(es).</td>
  </tr>

  <tr>
    <td>OpenBSM</td>
    <td>&status.unknown;</td>
    <td>&a.rwatson;</td>
    <td>The integration of OpenBSM is waiting on some final licensing hurdles.
      Once those are cleared, it will be a very desirable feature for &local.rel;.</td>
  </tr>

  <tr>
    <td>update sysinstall disk labeling</td>
    <td>&status.wip;</td>
    <td>&a.rodrigc;</td>
    <td>Sysinstall could use the same fixes recently made to fdisk so it
      plays nice with GEOM and disk labeling.  This does not cause problems
      during install because nothing on the disk is mounted when its label
      is being manipulated but it can cause problems if sysinstall gets
      used on a live system to adjust labels on existing disks which
      sys-admins tend to do.</td>
  </tr>

</table>

<h3>Documentation items that must be resolved for &local.rel;</h3>

<a name="docs"></a>
<table class="tblbasic">
  <tr class="heading">
    <th>Issue</th>
    <th>Status</th>
    <th>Responsible</th>
    <th>Description</th>
  </tr>

</table>


<h3>Testing foci for &local.rel;-RELEASE</h3>

<a name="testing"></a>
<table class="tblbasic">
  <tr class="heading">
    <th>Issue</th>
    <th>Status</th>
    <th>Responsible</th>
    <th>Description</th>
  </tr>

</table>

<h3>Stress Test Panics</h3>

<a name="stresstest"></a>
<p>The system is continuously being subjected to Peter Holm's <a
  href="http://www.holm.cc/stress/">Kernel Stress Test Suite</a>.  The
  following issues have recently been discovered from this test
  suite.</p>

&stresstest;

    &footer;

  </body>
</html>
