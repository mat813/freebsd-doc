<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta name="generator" content="HTML Tidy, see www.w3.org">
    <title>FreeBSD 4.6-RELEASE Errata</title>
    <meta name="GENERATOR" content=
    "Modular DocBook HTML Stylesheet Version 1.73 ">
    <link rel="STYLESHEET" type="text/css" href="docbook.css">
  </head>

  <body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link=
  "#0000FF" vlink="#840084" alink="#0000FF">
    <div class="ARTICLE">
      <div class="TITLEPAGE">
        <h1 class="TITLE"><a name="AEN2">FreeBSD 4.6-RELEASE
        Errata</a></h1>

        <h3 class="CORPAUTHOR">The FreeBSD Project</h3>

        <p class="COPYRIGHT">Copyright &copy; 2000, 2001, 2002 by
        The FreeBSD Documentation Project</p>

        <p class="PUBDATE">$FreeBSD:
        src/release/doc/en_US.ISO8859-1/errata/article.sgml,v
        1.1.2.73 2002/07/30 16:50:49 bmah Exp $<br>
        </p>
        <hr>
      </div>

      <blockquote class="ABSTRACT">
        <div class="ABSTRACT">
          <a name="AEN11"></a>

          <p>This document lists errata items for FreeBSD
          4.6-RELEASE, containing significant information
          discovered after the release. This information includes
          security advisories, as well as news relating to the
          software or documentation that could affect its operation
          or usability. An up-to-date version of this document
          should always be consulted before installing this version
          of FreeBSD.</p>

          <p>This errata document for FreeBSD 4.6-RELEASE will be
          maintained until the release of FreeBSD 4.7-RELEASE.</p>
        </div>
      </blockquote>

      <div class="SECT1">
        <hr>

        <h1 class="SECT1"><a name="AEN14">1 Introduction</a></h1>

        <p>This errata document contains ``late-breaking news''
        about FreeBSD 4.6-RELEASE. Before installing this version,
        it is important to consult this document to learn about any
        post-release discoveries or problems that may already have
        been found and fixed.</p>

        <p>Any version of this errata document actually distributed
        with the release (for example, on a CDROM distribution)
        will be out of date by definition, but other copies are
        kept updated on the Internet and should be consulted as the
        ``current errata'' for this release. These other copies of
        the errata are located at <a href=
        "http://www.FreeBSD.org/releases/" target=
        "_top">http://www.FreeBSD.org/releases/</a>, plus any sites
        which keep up-to-date mirrors of this location.</p>

        <p>Source and binary snapshots of FreeBSD 4-STABLE also
        contain up-to-date copies of this document (as of the time
        of the snapshot).</p>

        <p>For a list of all FreeBSD CERT security advisories, see
        <a href="http://www.FreeBSD.org/security/" target=
        "_top">http://www.FreeBSD.org/security/</a> or <a href=
        "ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/" target=
        "_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/</a>.</p>
      </div>

      <div class="SECT1">
        <hr>

        <h1 class="SECT1"><a name="AEN25">2 Security
        Advisories</a></h1>

        <p>A buffer overflow in the resolver could be exploited by
        a malicious domain name server or an attacker forging DNS
        messages. This could potentially be used to force arbitrary
        code to run on a client machine with the privileges of a
        resolver-using application. See security advisory <a href=
        "ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:28.resolv.asc"
         target="_top">FreeBSD-SA-02:28</a> for more information
        and a fix.</p>

        <p>Badly-formed NFS packets could trigger a buffer overflow
        in <a href=
        "http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&sektion=1&manpath=FreeBSD+4.5-stable">
        <span class="CITEREFENTRY"><span class=
        "REFENTRYTITLE">tcpdump</span>(1)</span></a>. For a fix to
        this problem, see security advisory <a href=
        "ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:29.tcpdump.asc"
         target="_top">FreeBSD-SA-02:29</a>.</p>

        <p><a href=
        "http://www.FreeBSD.org/cgi/man.cgi?query=ktrace&sektion=1&manpath=FreeBSD+4.5-stable">
        <span class="CITEREFENTRY"><span class=
        "REFENTRYTITLE">ktrace</span>(1)</span></a> can be used to
        trace the operation of formerly-privileged processes. This
        is undesirable, as it is then possible to leak information
        obtained while these processes had elevated privileges. See
        security advisory <a href=
        "ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:30.ktrace.asc"
         target="_top">FreeBSD-SA-02:30</a> for a workaround and a
        fix.</p>
      </div>

      <div class="SECT1">
        <hr>

        <h1 class="SECT1"><a name="AEN39">3 Late-Breaking
        News</a></h1>

        <p>In FreeBSD 4.6-RELEASE, the default maximum TCP window
        size was lowered from 65536 bytes to 57334 bytes, for
        better compatability with some versions of <b class=
        "APPLICATION">IPFilter</b>.</p>

        <p>A recently-discovered interaction between the FreeBSD
        kernel and the <tt class="FILENAME">archivers/zip</tt> port
        can result in some errors on the alpha platform. A
        post-release fix has been committed to the FreeBSD ports
        tree; versions of the <tt class=
        "FILENAME">archivers/zip</tt> port beginning with 2.3_1
        will function correctly.</p>

        <p>On the alpha platform, the <a href=
        "http://www.FreeBSD.org/cgi/man.cgi?query=de&sektion=4&manpath=FreeBSD+4.5-stable">
        <span class="CITEREFENTRY"><span class=
        "REFENTRYTITLE">de</span>(4)</span></a> and <a href=
        "http://www.FreeBSD.org/cgi/man.cgi?query=txp&sektion=4&manpath=FreeBSD+4.5-stable">
        <span class="CITEREFENTRY"><span class=
        "REFENTRYTITLE">txp</span>(4)</span></a> drivers were moved
        from the boot kernel on the floppy images to modules on the
        <tt class="FILENAME">mfsroot</tt> floppy. This change was
        made in order to get the alpha kernel to fit onto the boot
        floppy. It should be transparent to all users, as <a href=
        "http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+4.5-stable">
        <span class="CITEREFENTRY"><span class=
        "REFENTRYTITLE">sysinstall</span>(8)</span></a> will
        automatically load any kernel modules it finds on the <tt
        class="FILENAME">mfsroot</tt> floppy.</p>

        <p>Several last-minute patches were made to the <tt class=
        "FILENAME">x11-servers/XFree86-4-Server</tt> package. These
        allow the various server configuration programs to give
        better support for the <tt class="FILENAME">sysmouse</tt>
        device supported by <a href=
        "http://www.FreeBSD.org/cgi/man.cgi?query=moused&sektion=8&manpath=FreeBSD+4.5-stable">
        <span class="CITEREFENTRY"><span class=
        "REFENTRYTITLE">moused</span>(8)</span></a>. The binary
        packages on the CDROMs and the FTP sites incoporate this
        patch and bear the version number 4.2.0_3. However, the
        ports collection included in the distribution does not
        contain this patch. To get an updated version, use <b
        class="APPLICATION">CVSup</b> to obtain a more recent ports
        collection.</p>

        <p>Some FreeBSD/i386 users have experienced difficulties
        reading from certain ATA CDROM drives. Specific models on
        which this problem has been observed include the AOpen 48x,
        52x, and 56x CDROM drives, as well as the Mitsumi Slim
        CRMC-SR242S CDROM drive. A typical symptom is the following
        error message on the console and/or <a href=
        "http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&sektion=8&manpath=FreeBSD+4.5-stable">
        <span class="CITEREFENTRY"><span class=
        "REFENTRYTITLE">dmesg</span>(8)</span></a> buffer
        (sometimes accompanied by a kernel panic):</p>
<pre class="SCREEN">
    acd0: READ_BIG command timeout - resetting
    ata1: resetting devices .. done
</pre>

        <p>In some cases, this bug can prevent installation of
        FreeBSD from an affected CDROM drive. It can cause <a href=
        "http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+4.5-stable">
        <span class="CITEREFENTRY"><span class=
        "REFENTRYTITLE">sysinstall</span>(8)</span></a> to hang
        while extracting distribution files from CD media.</p>

        <p>A two-part workaround listed here has shown to be
        helpful in some (but not necessarily all) cases. First, to
        allow a CDROM installation, it is necessary to modify the
        normal CDROM installation procedure:</p>

        <div class="PROCEDURE">
          <ol type="1">
            <li>
              <p>Start the computer with a FreeBSD installation
              CDROM in the drive.</p>
            </li>

            <li>
              <p>Wait for a console message similar to:</p>
<pre class="SCREEN">
    Hit [Enter] to boot immediately, or any other key for command prompt.
    Booting [kernel] in 9 seconds...
</pre>
            </li>

            <li>
              <p>Immediately interrupt the boot process by pressing
              the <b class="KEYCAP">Space</b> bar on the
              keyboard.</p>
            </li>

            <li>
              <p>Enter the following three lines at the <tt class=
              "LITERAL">ok</tt> prompt:</p>
<pre class="SCREEN">
    <tt class="PROMPT">ok</tt> <tt class=
"USERINPUT"><b>set hw.ata.ata_dma="1"</b></tt>
</pre>
<pre class="SCREEN">
    <tt class="PROMPT">ok</tt> <tt class=
"USERINPUT"><b>set hw.ata.atapi_dma="1"</b></tt>
</pre>
<pre class="SCREEN">
    <tt class="PROMPT">ok</tt> <tt class=
"USERINPUT"><b>boot</b></tt>
</pre>
            </li>

            <li>
              <p>Continue the installation as normal.</p>
            </li>
          </ol>
        </div>

        <p>The second part of the workaround takes place after
        completing the CDROM installation (or a successful source
        upgrade). It consists of configuring the <a href=
        "http://www.FreeBSD.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+4.5-stable">
        <span class="CITEREFENTRY"><span class=
        "REFENTRYTITLE">ata</span>(4)</span></a> driver so that
        future CDROM reads work correctly:</p>

        <div class="PROCEDURE">
          <ol type="1">
            <li>
              <p>Add the following two lines to <tt class=
              "FILENAME">/boot/loader.conf</tt> (creating this file
              if it does not already exist):</p>
<pre class="PROGRAMLISTING">
    hw.ata.ata_dma="1"
    hw.ata.atapi_dma="1"
</pre>
            </li>

            <li>
              <p>Reboot the machine.</p>
            </li>
          </ol>
        </div>

        <p>As of this writing, this issue is under continuing
        investigation.</p>

        <p>Due to a bug in the release generation process, some of
        the directories under <tt class=
        "FILENAME">/usr/share/examples</tt> are empty (most notably
        <tt class="FILENAME">/usr/share/examples/cvsup</tt>). A
        partial workaround is to install the <tt class=
        "FILENAME">sshare</tt> distribution via <a href=
        "http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+4.5-stable">
        <span class="CITEREFENTRY"><span class=
        "REFENTRYTITLE">sysinstall</span>(8)</span></a> (from the
        main menu, choose <span class=
        "GUIMENUITEM">Configure</span>, <span class=
        "GUIMENUITEM">Distributions</span>, <span class=
        "GUIMENUITEM">src</span>, then <span class=
        "GUIMENUITEM">share</span>). <tt class=
        "FILENAME">/usr/src/share/examples</tt> will then contain
        the missing files. This problem has been corrected in
        recent FreeBSD 4.6-STABLE snapshots.</p>
      </div>
    </div>
    <hr>

    <p align="center"><small>This file, and other release-related
    documents, can be downloaded from <a href=
    "http://snapshots.jp.FreeBSD.org/">http://snapshots.jp.FreeBSD.org/</a>.</small></p>

    <p align="center"><small>For questions about FreeBSD, read the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a>
    before contacting &#60;<a href=
    "mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;.</small></p>

    <p align="center"><small><small>All users of FreeBSD 4-STABLE
    should subscribe to the &#60;<a href=
    "mailto:stable@FreeBSD.org">stable@FreeBSD.org</a>&#62; mailing
    list.</small></small></p>

    <p align="center">For questions about this documentation,
    e-mail &#60;<a href=
    "mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;.</p>
    <br>
    <br>
  </body>
</html>

