<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" [
<!ENTITY base CDATA "../..">
<!ENTITY email 'freebsd-qa'>
<!ENTITY date "$FreeBSD: www/en/releases/5.4R/todo.sgml,v 1.13 2005/03/01 16:22:45 kensmith Exp $">
<!ENTITY title "FreeBSD 5.4 Open Issues">
<!ENTITY % includes SYSTEM "../../includes.sgml"> %includes;
<!ENTITY % developers SYSTEM "../../developers.sgml"> %developers;
<!-- Status levels -->
<!ENTITY status.na "<font color=green>N/A</font>">
<!ENTITY status.done "<font color=green>Done</font>">
<!ENTITY status.wip "<font color=blue>In&nbsp;progress</font>">
<!ENTITY status.untested "<font color=orange>Needs&nbsp;testing</font>">
<!ENTITY status.new "<font color=red>Not&nbsp;done</font>">
<!ENTITY status.unknown "<font color=red>Unknown</font>">

<!ENTITY url.cvsweb "http://www.freebsd.org/cgi/cvsweb.cgi">
<!ENTITY url.mid "http://docs.freebsd.org/cgi/mid.cgi?">
<!ENTITY url.pr "http://www.freebsd.org/cgi/query-pr.cgi?">
]>

<!--

  Changes to this list MUST NOT be committed without approval of
  Release Engineering Team (re@FreeBSD.org) (for general items) or
  Documentation Engineering Team (doceng@FreeBSD.org) (for doc-related
  items).

-->

<html>
&header;

<h1>Open Issues</h1>

<p>This is the beginning of a list of open issues that need to be worked on
  or resolved for FreeBSD 5.4.  If you have any updates for this list, please
  e-mail re@FreeBSD.org.  The feature list for 5.4 is still a work in
  progress, so items may be added, removed, or modified before we're done.
  </p>

<h3>Show stopper defects for 5.4-RELEASE</h3>

<table border=1 width="100%">
  <tr>
    <th>Issue</th>
    <th>Status</th>
    <th>Responsible</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>Deadlock under heavy network load on systems with more than 4 CPUs</td>
    <td>&status.wip;</td>
    <td>&a.rwatson;</td>
    <td>A deadlock of unknown origin has started to appear on systems with
      4 or more real CPUs when under heavy TCP load.</td>
  </tr>

  <tr>
    <td>IPFilter mpsafe fixes</td>
    <td>&status.wip;</td>
    <td>&a.rwatson;</td>
    <td>IPFilter is currently not mpsafe but doesn't run with Giant.</td>
  </tr>
</table>

<h3>Required features for 5.4-RELEASE</h3>

<table border=1 width="100%">
  <tr>
    <th>Issue</th>
    <th>Status</th>
    <th>Responsible</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>Update sysinstall to handle separate packages CD</td>
    <td>&status.wip;</td>
    <td>&a.jhb;</td>
    <td>Avoid the need for a disc1-gnome/disc1-kde as was done for 4.11</td>
  </tr>

  <tr>
    <td>busdma fixes</td>
    <td>&status.wip;</td>
    <td>&a.scottl;</td>
    <td>More work is needed on busdma to fix bounce buffer problems.</td>
  </tr>

  <tr>
    <td>ATAPI CDROMs in PIO mode during install</td>
    <td>&status.wip;</td>
    <td>&a.jhb;</td>
    <td>People are having difficulties with various ATAPI CDROMs on
	various architectures.  We need to either do all installs
	in PIO mode or provide a boot menu method of selecting it.</td>
  </tr>
</table>

<h3>Desired features for 5.4-RELEASE</h3>

<table border=1 width="100%">
  <tr>
    <th>Issue</th>
    <th>Status</th>
    <th>Responsible</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>ACL_MASK override of umask support in UFS</td>
    <td>&status.new;</td>
    <td>&a.rwatson;</td>
    <td>Many systems supporting POSIX.1e ACLs permit a minor violation
      to that specification, in which the ACL_MASK entry overrides the
      umask, rather than being intersected with it.  The resulting
      semantics can be useful in group-oriented environments, and as
      such would be very helpful on FreeBSD.</td>
  </tr>

  <tr>
    <td>Entropy harvesting optimizations</td>
    <td>&status.wip;</td>
    <td>&a.rwatson;, &a.markm;</td>
    <td>Entropy harvesting in the interrupt and incoming packet paths
      currently involves a large number of mutex operations.  In order to
      improve performance, it is desirable to reduce the number of mutex
      operations substantially.  Improvements in the harvesting locking
      scheme have been merged to 6.x, but are considered too risky at this
      stage to be merged to 5.x until after 5.3.</td>
  </tr>

  <tr>
    <td>KAME IPSEC without the Giant Lock</td>
    <td>&status.wip;</td>
    <td>&a.gnn;</td>
    <td>Currently, the KAME IPSEC implementation contains inadequate locking
      to operate without the Giant lock over the network stack, forcing
      kernels compiled with the KAME IPSEC implementation (not FAST_IPSEC)
      to run the network stack with the Giant lock, reducing parallelism,
      increasing lock contention, and increasing latency by preventing
      preemption.  For 5.4-RELEASE, it is desirable to complete the locking
      work for KAME IPSEC so that it can run without the Giant lock.</td>
  </tr>

  <tr>
    <td>All Network Interface Drivers MPSAFE</td>
    <td>&status.wip;</td>
    <td>--</td>
    <td>Currently, some network interface drivers are not safe without the
      Giant lock due to missing synchronization.  These drivers are protected
      by running non-INTR_MPSAFE and with the IFF_NEEDSGIANT flag set, which
      cause interrupt threads to acquire the Giant lock before executing the
      driver's interrupt handler, and to perform if_start (interface
      transmit start) asynchronously once the Giant lock can be acquired.
      This results in these drivers performing less well due to increased
      lock contention, decreased ability to preempt, and latency associated
      with asynchronous launching of latency-critical events.  For 5.4, all
      network drivers should be able to operate without the Giant lock.</td>
  </tr>

  <tr>
    <td>NetIPX without the Giant Lock</td>
    <td>&status.wip;</td>
    <td>&a.rwatson;</td>
    <td>Currently, the IPX/SPX (netipx) implementation contains inadequate
      locking to operate without the Giant lock over the network stack,
      forcing kernels compiled with IPX support to run the network stack
      with the Giant lock, reducing parallelism, increasing lock contention,
      and increasing latency by preventing preemption.  For 5.4-RELEASE, it
      is desirable to complete the locking work for IPX so that it can run
      without the Giant lock.</td>
  </tr>

  <tr>
    <td>Fix regression in file(1)</td>
    <td>--</td>
    <td>--</td>
    <td>The new version of file(1) does not cross-build properly.  If
      sparc64 executables are built on i386 the compiled magic numbers
      file that gets installed is wrong and file(1) doesn't work
      properly.</td>
  </tr>

  <tr>
    <td>AMR driver MPSAFE</td>
    <td>&status.wip;</td>
    <td>&a.scottl;</td>
    <td>Making the AMR driver MPSAFE will greatly increase its performance.</td>
  </tr>

  <tr>
    <td>SCHED_ULE update</td>
    <td>&status.new;</td>
    <td>--</td>
    <td>Many improvements have been made to the ULE scheduler in 6-CURRENT.
      These should be merged back to 5.4.</td>
  </tr>

  <tr>
    <td>CARP support</td>
    <td>&status.wip;</td>
    <td>&a.glebius;</td>
    <td>Common Address Redundancy Protocol allows multiple hosts on the same
      local network to share a set of IP addresses.</td>
  </tr>
</table>

<h3>Documentation items that must be resolved for 5.4</h3>

<table border=1 width="100%">
  <tr>
    <th>Issue</th>
    <th>Status</th>
    <th>Responsible</th>
    <th>Description</th>
  </tr>
</table>

<h3>Testing focuses for 5.4-RELEASE</h3>

<table border=1 width="100%">
  <tr>
    <th>Issue</th>
    <th>Status</th>
    <th>Responsible</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>File descriptor locking</td>
    <td>&status.done;</td>
    <td>&a.jeff;</td>
    <td>File descriptor locking needs to be merged back from HEAD.</td>
  </tr>

</table>

    &footer;

  </body>
</html>
